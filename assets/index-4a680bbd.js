var Iu=Object.defineProperty;var Eu=(t,e,n)=>e in t?Iu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>(Eu(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function St(){}const Pu=t=>t;function Bo(t){return t()}function Pa(){return Object.create(null)}function Et(t){t.forEach(Bo)}function Mr(t){return typeof t=="function"}function cn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Fu(t){return Object.keys(t).length===0}function Fa(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Oo=typeof window<"u";let Vu=Oo?()=>window.performance.now():()=>Date.now(),js=Oo?t=>requestAnimationFrame(t):St;const xn=new Set;function qo(t){xn.forEach(e=>{e.c(t)||(xn.delete(e),e.f())}),xn.size!==0&&js(qo)}function Uu(t){let e;return xn.size===0&&js(qo),{promise:new Promise(n=>{xn.add(e={c:t,f:n})}),abort(){xn.delete(e)}}}function S(t,e){t.appendChild(e)}function Ho(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ru(t){const e=T("style");return Bu(Ho(t),e),e.sheet}function Bu(t,e){return S(t.head||t,e),e.sheet}function it(t,e,n){t.insertBefore(e,n||null)}function et(t){t.parentNode&&t.parentNode.removeChild(t)}function ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function Xt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _t(t){return document.createTextNode(t)}function H(){return _t(" ")}function Ni(){return _t("")}function ct(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ou(t){return Array.from(t.childNodes)}function Nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function qu(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Js(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function at(t,e,n){t.classList[n?"add":"remove"](e)}function Hu(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}class Yu{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Xt(n.nodeName):this.e=T(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)it(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(et)}}const Qi=new Map;let tr=0;function Gu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ku(t,e){const n={stylesheet:Ru(e),rules:{}};return Qi.set(t,n),n}function Va(t,e,n,i,r,s,a,l=0){const c=16.666/i;let o=`{
`;for(let v=0;v<=1;v+=c){const p=e+(n-e)*s(v);o+=v*100+`%{${a(p,1-p)}}
`}const u=o+`100% {${a(n,1-n)}}
}`,f=`__svelte_${Gu(u)}_${l}`,h=Ho(t),{stylesheet:d,rules:m}=Qi.get(h)||Ku(h,t);m[f]||(m[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length));const w=t.style.animation||"";return t.style.animation=`${w?`${w}, `:""}${f} ${i}ms linear ${r}ms 1 both`,tr+=1,f}function Xu(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),tr-=r,tr||Wu())}function Wu(){js(()=>{tr||(Qi.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&et(e)}),Qi.clear())})}let pi;function di(t){pi=t}function Zu(){if(!pi)throw new Error("Function called outside component initialization");return pi}function Cr(t){Zu().$$.on_mount.push(t)}const wn=[],He=[];let kn=[];const Ua=[],Yo=Promise.resolve();let _s=!1;function Go(){_s||(_s=!0,Yo.then(Xo))}function Ko(){return Go(),Yo}function mi(t){kn.push(t)}const qr=new Set;let pn=0;function Xo(){if(pn!==0)return;const t=pi;do{try{for(;pn<wn.length;){const e=wn[pn];pn++,di(e),ju(e.$$)}}catch(e){throw wn.length=0,pn=0,e}for(di(null),wn.length=0,pn=0;He.length;)He.pop()();for(let e=0;e<kn.length;e+=1){const n=kn[e];qr.has(n)||(qr.add(n),n())}kn.length=0}while(wn.length);for(;Ua.length;)Ua.pop()();_s=!1,qr.clear(),di(t)}function ju(t){if(t.fragment!==null){t.update(),Et(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(mi)}}function Ju(t){const e=[],n=[];kn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),kn=e}let jn;function Qu(){return jn||(jn=Promise.resolve(),jn.then(()=>{jn=null})),jn}function Hr(t,e,n){t.dispatchEvent(Hu(`${e?"intro":"outro"}${n}`))}const Gi=new Set;let Ne;function Wo(){Ne={r:0,c:[],p:Ne}}function Zo(){Ne.r||Et(Ne.c),Ne=Ne.p}function Ht(t,e){t&&t.i&&(Gi.delete(t),t.i(e))}function pe(t,e,n,i){if(t&&t.o){if(Gi.has(t))return;Gi.add(t),Ne.c.push(()=>{Gi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const th={duration:0};function Ra(t,e,n,i){const r={direction:"both"};let s=e(t,n,r),a=i?0:1,l=null,c=null,o=null;function u(){o&&Xu(t,o)}function f(d,m){const w=d.b-a;return m*=Math.abs(w),{a,b:d.b,d:w,duration:m,start:d.start,end:d.start+m,group:d.group}}function h(d){const{delay:m=0,duration:w=300,easing:v=Pu,tick:p=St,css:y}=s||th,b={start:Vu()+m,b:d};d||(b.group=Ne,Ne.r+=1),l||c?c=b:(y&&(u(),o=Va(t,a,d,w,m,v,y)),d&&p(0,1),l=f(b,w),mi(()=>Hr(t,d,"start")),Uu(g=>{if(c&&g>c.start&&(l=f(c,w),c=null,Hr(t,l.b,"start"),y&&(u(),o=Va(t,a,l.b,l.duration,0,v,s.css))),l){if(g>=l.end)p(a=l.b,1-a),Hr(t,l.b,"end"),c||(l.b?u():--l.group.r||Et(l.group.c)),l=null;else if(g>=l.start){const _=g-l.start;a=l.a+l.d*v(_/l.duration),p(a,1-a)}}return!!(l||c)}))}return{run(d){Mr(s)?Qu().then(()=>{s=s(r),h(d)}):h(d)},end(){u(),l=c=null}}}const eh=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function nh(t,e){t.d(1),e.delete(t.key)}function ih(t,e,n,i,r,s,a,l,c,o,u,f){let h=t.length,d=s.length,m=h;const w={};for(;m--;)w[t[m].key]=m;const v=[],p=new Map,y=new Map,b=[];for(m=d;m--;){const N=f(r,s,m),I=n(N);let P=a.get(I);P?i&&b.push(()=>P.p(N,e)):(P=o(I,N),P.c()),p.set(I,v[m]=P),I in w&&y.set(I,Math.abs(m-w[I]))}const g=new Set,_=new Set;function M(N){Ht(N,1),N.m(l,u),a.set(N.key,N),u=N.first,d--}for(;h&&d;){const N=v[d-1],I=t[h-1],P=N.key,$=I.key;N===I?(u=N.first,h--,d--):p.has($)?!a.has(P)||g.has(P)?M(N):_.has($)?h--:y.get(P)>y.get($)?(_.add(P),M(N)):(g.add($),h--):(c(I,a),h--)}for(;h--;){const N=t[h];p.has(N.key)||c(N,a)}for(;d;)M(v[d-1]);return Et(b),v}function yi(t){t&&t.c()}function Nn(t,e,n,i){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),i||mi(()=>{const a=t.$$.on_mount.map(Bo).filter(Mr);t.$$.on_destroy?t.$$.on_destroy.push(...a):Et(a),t.$$.on_mount=[]}),s.forEach(mi)}function zn(t,e){const n=t.$$;n.fragment!==null&&(Ju(n.after_update),Et(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rh(t,e){t.$$.dirty[0]===-1&&(wn.push(t),Go(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Bn(t,e,n,i,r,s,a,l=[-1]){const c=pi;di(t);const o=t.$$={fragment:null,ctx:[],props:s,update:St,not_equal:r,bound:Pa(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Pa(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};a&&a(o.root);let u=!1;if(o.ctx=n?n(t,e.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return o.ctx&&r(o.ctx[f],o.ctx[f]=m)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](m),u&&rh(t,f)),h}):[],o.update(),u=!0,Et(o.before_update),o.fragment=i?i(o.ctx):!1,e.target){if(e.hydrate){const f=Ou(e.target);o.fragment&&o.fragment.l(f),f.forEach(et)}else o.fragment&&o.fragment.c();e.intro&&Ht(t.$$.fragment),Nn(t,e.target,e.anchor,e.customElement),Xo()}di(c)}class On{$destroy(){zn(this,1),this.$destroy=St}$on(e,n){if(!Mr(n))return St;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Fu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Ss="http://www.w3.org/1999/xhtml";const Ba={svg:"http://www.w3.org/2000/svg",xhtml:Ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ba.hasOwnProperty(e)?{space:Ba[e],local:t}:t}function sh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ss&&e.documentElement.namespaceURI===Ss?e.createElement(t):e.createElementNS(n,t)}}function ah(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function jo(t){var e=Tr(t);return(e.local?ah:sh)(e)}function lh(){}function Qs(t){return t==null?lh:function(){return this.querySelector(t)}}function oh(t){typeof t!="function"&&(t=Qs(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=new Array(a),c,o,u=0;u<a;++u)(c=s[u])&&(o=t.call(c,c.__data__,u,s))&&("__data__"in c&&(o.__data__=c.__data__),l[u]=o);return new Ut(i,this._parents)}function Jo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ch(){return[]}function Qo(t){return t==null?ch:function(){return this.querySelectorAll(t)}}function uh(t){return function(){return Jo(t.apply(this,arguments))}}function hh(t){typeof t=="function"?t=uh(t):t=Qo(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],l=a.length,c,o=0;o<l;++o)(c=a[o])&&(i.push(t.call(c,c.__data__,o,a)),r.push(c));return new Ut(i,r)}function tc(t){return function(){return this.matches(t)}}function ec(t){return function(e){return e.matches(t)}}var fh=Array.prototype.find;function dh(t){return function(){return fh.call(this.children,t)}}function gh(){return this.firstElementChild}function ph(t){return this.select(t==null?gh:dh(typeof t=="function"?t:ec(t)))}var mh=Array.prototype.filter;function yh(){return Array.from(this.children)}function bh(t){return function(){return mh.call(this.children,t)}}function vh(t){return this.selectAll(t==null?yh:bh(typeof t=="function"?t:ec(t)))}function wh(t){typeof t!="function"&&(t=tc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],c,o=0;o<a;++o)(c=s[o])&&t.call(c,c.__data__,o,s)&&l.push(c);return new Ut(i,this._parents)}function nc(t){return new Array(t.length)}function _h(){return new Ut(this._enter||this._groups.map(nc),this._parents)}function er(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}er.prototype={constructor:er,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Sh(t){return function(){return t}}function xh(t,e,n,i,r,s){for(var a=0,l,c=e.length,o=s.length;a<o;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):n[a]=new er(t,s[a]);for(;a<c;++a)(l=e[a])&&(r[a]=l)}function kh(t,e,n,i,r,s,a){var l,c,o=new Map,u=e.length,f=s.length,h=new Array(u),d;for(l=0;l<u;++l)(c=e[l])&&(h[l]=d=a.call(c,c.__data__,l,e)+"",o.has(d)?r[l]=c:o.set(d,c));for(l=0;l<f;++l)d=a.call(t,s[l],l,s)+"",(c=o.get(d))?(i[l]=c,c.__data__=s[l],o.delete(d)):n[l]=new er(t,s[l]);for(l=0;l<u;++l)(c=e[l])&&o.get(h[l])===c&&(r[l]=c)}function Mh(t){return t.__data__}function Ch(t,e){if(!arguments.length)return Array.from(this,Mh);var n=e?kh:xh,i=this._parents,r=this._groups;typeof t!="function"&&(t=Sh(t));for(var s=r.length,a=new Array(s),l=new Array(s),c=new Array(s),o=0;o<s;++o){var u=i[o],f=r[o],h=f.length,d=Th(t.call(u,u&&u.__data__,o,i)),m=d.length,w=l[o]=new Array(m),v=a[o]=new Array(m),p=c[o]=new Array(h);n(u,f,w,v,p,d,e);for(var y=0,b=0,g,_;y<m;++y)if(g=w[y]){for(y>=b&&(b=y+1);!(_=v[b])&&++b<m;);g._next=_||null}}return a=new Ut(a,i),a._enter=l,a._exit=c,a}function Th(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Dh(){return new Ut(this._exit||this._groups.map(nc),this._parents)}function Nh(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function zh(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),l=new Array(r),c=0;c<a;++c)for(var o=n[c],u=i[c],f=o.length,h=l[c]=new Array(f),d,m=0;m<f;++m)(d=o[m]||u[m])&&(h[m]=d);for(;c<r;++c)l[c]=n[c];return new Ut(l,this._parents)}function $h(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Lh(t){t||(t=Ah);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],l=a.length,c=r[s]=new Array(l),o,u=0;u<l;++u)(o=a[u])&&(c[u]=o);c.sort(e)}return new Ut(r,this._parents).order()}function Ah(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ih(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Eh(){return Array.from(this)}function Ph(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function Fh(){let t=0;for(const e of this)++t;return t}function Vh(){return!this.node()}function Uh(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,l;s<a;++s)(l=r[s])&&t.call(l,l.__data__,s,r);return this}function Rh(t){return function(){this.removeAttribute(t)}}function Bh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Oh(t,e){return function(){this.setAttribute(t,e)}}function qh(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Yh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Gh(t,e){var n=Tr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Bh:Rh:typeof e=="function"?n.local?Yh:Hh:n.local?qh:Oh)(n,e))}function ic(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Kh(t){return function(){this.style.removeProperty(t)}}function Xh(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Wh(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Zh(t,e,n){return arguments.length>1?this.each((e==null?Kh:typeof e=="function"?Wh:Xh)(t,e,n??"")):$n(this.node(),t)}function $n(t,e){return t.style.getPropertyValue(e)||ic(t).getComputedStyle(t,null).getPropertyValue(e)}function jh(t){return function(){delete this[t]}}function Jh(t,e){return function(){this[t]=e}}function Qh(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function tf(t,e){return arguments.length>1?this.each((e==null?jh:typeof e=="function"?Qh:Jh)(t,e)):this.node()[t]}function rc(t){return t.trim().split(/^|\s+/)}function ta(t){return t.classList||new sc(t)}function sc(t){this._node=t,this._names=rc(t.getAttribute("class")||"")}sc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ac(t,e){for(var n=ta(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function lc(t,e){for(var n=ta(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ef(t){return function(){ac(this,t)}}function nf(t){return function(){lc(this,t)}}function rf(t,e){return function(){(e.apply(this,arguments)?ac:lc)(this,t)}}function sf(t,e){var n=rc(t+"");if(arguments.length<2){for(var i=ta(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?rf:e?ef:nf)(n,e))}function af(){this.textContent=""}function lf(t){return function(){this.textContent=t}}function of(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function cf(t){return arguments.length?this.each(t==null?af:(typeof t=="function"?of:lf)(t)):this.node().textContent}function uf(){this.innerHTML=""}function hf(t){return function(){this.innerHTML=t}}function ff(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function df(t){return arguments.length?this.each(t==null?uf:(typeof t=="function"?ff:hf)(t)):this.node().innerHTML}function gf(){this.nextSibling&&this.parentNode.appendChild(this)}function pf(){return this.each(gf)}function mf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yf(){return this.each(mf)}function bf(t){var e=typeof t=="function"?t:jo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vf(){return null}function wf(t,e){var n=typeof t=="function"?t:jo(t),i=e==null?vf:typeof e=="function"?e:Qs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function _f(){var t=this.parentNode;t&&t.removeChild(this)}function Sf(){return this.each(_f)}function xf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function kf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Mf(t){return this.select(t?kf:xf)}function Cf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tf(t){return function(e){t.call(this,e,this.__data__)}}function Df(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Nf(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function zf(t,e,n){return function(){var i=this.__on,r,s=Tf(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function $f(t,e,n){var i=Df(t+""),r,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,o=l.length,u;c<o;++c)for(r=0,u=l[c];r<s;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?zf:Nf,r=0;r<s;++r)this.each(l(i[r],e,n));return this}function oc(t,e,n){var i=ic(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Lf(t,e){return function(){return oc(this,t,e)}}function Af(t,e){return function(){return oc(this,t,e.apply(this,arguments))}}function If(t,e){return this.each((typeof e=="function"?Af:Lf)(t,e))}function*Ef(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var ea=[null];function Ut(t,e){this._groups=t,this._parents=e}function qn(){return new Ut([[document.documentElement]],ea)}function Pf(){return this}Ut.prototype=qn.prototype={constructor:Ut,select:oh,selectAll:hh,selectChild:ph,selectChildren:vh,filter:wh,data:Ch,enter:_h,exit:Dh,join:Nh,merge:zh,selection:Pf,order:$h,sort:Lh,call:Ih,nodes:Eh,node:Ph,size:Fh,empty:Vh,each:Uh,attr:Gh,style:Zh,property:tf,classed:sf,text:cf,html:df,raise:pf,lower:yf,append:bf,insert:wf,remove:Sf,clone:Mf,datum:Cf,on:$f,dispatch:If,[Symbol.iterator]:Ef};function Vt(t){return typeof t=="string"?new Ut([[document.querySelector(t)]],[document.documentElement]):new Ut([[t]],ea)}function Ff(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ee(t,e){if(t=Ff(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Vf(t){return typeof t=="string"?new Ut([document.querySelectorAll(t)],[document.documentElement]):new Ut([Jo(t)],ea)}function Uf(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Rf(t,e){return fetch(t,e).then(Uf)}function Ki(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bf(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function na(t){let e,n,i;t.length!==2?(e=Ki,n=(l,c)=>Ki(t(l),c),i=(l,c)=>t(l)-c):(e=t===Ki||t===Bf?t:Of,n=t,i=t);function r(l,c,o=0,u=l.length){if(o<u){if(e(c,c)!==0)return u;do{const f=o+u>>>1;n(l[f],c)<0?o=f+1:u=f}while(o<u)}return o}function s(l,c,o=0,u=l.length){if(o<u){if(e(c,c)!==0)return u;do{const f=o+u>>>1;n(l[f],c)<=0?o=f+1:u=f}while(o<u)}return o}function a(l,c,o=0,u=l.length){const f=r(l,c,o,u-1);return f>o&&i(l[f-1],c)>-i(l[f],c)?f-1:f}return{left:r,center:a,right:s}}function Of(){return 0}function qf(t){return t===null?NaN:+t}const Hf=na(Ki),Yf=Hf.right;na(qf).center;const cc=Yf;function Gf(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function gi(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Ln{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],a=e+s,l=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,s=r-(a-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}class Oa extends Map{constructor(e,n=Wf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(qa(this,e))}has(e){return super.has(qa(this,e))}set(e,n){return super.set(Kf(this,e),n)}delete(e){return super.delete(Xf(this,e))}}function qa({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Kf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Xf({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Wf(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Zf(t){return t}var jf=Array.prototype,Jf=jf.slice;function Yr(t){return()=>t}const Qf=Math.sqrt(50),t0=Math.sqrt(10),e0=Math.sqrt(2);function nr(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=Qf?10:s>=t0?5:s>=e0?2:1;let l,c,o;return r<0?(o=Math.pow(10,-r)/a,l=Math.round(t*o),c=Math.round(e*o),l/o<t&&++l,c/o>e&&--c,o=-o):(o=Math.pow(10,r)*a,l=Math.round(t/o),c=Math.round(e/o),l*o<t&&++l,c*o>e&&--c),c<l&&.5<=n&&n<2?nr(t,e,n*2):[l,c,o]}function bi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?nr(e,t,n):nr(t,e,n);if(!(s>=r))return[];const l=s-r+1,c=new Array(l);if(i)if(a<0)for(let o=0;o<l;++o)c[o]=(s-o)/-a;else for(let o=0;o<l;++o)c[o]=(s-o)*a;else if(a<0)for(let o=0;o<l;++o)c[o]=(r+o)/-a;else for(let o=0;o<l;++o)c[o]=(r+o)*a;return c}function An(t,e,n){return e=+e,t=+t,n=+n,nr(t,e,n)[2]}function xs(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?An(e,t,n):An(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function uc(t,e,n){let i;for(;;){const r=An(t,e,n);if(r===i||r===0||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function hc(t){return Math.max(1,Math.ceil(Math.log(Gf(t))/Math.LN2)+1)}function n0(){var t=Zf,e=gi,n=hc;function i(r){Array.isArray(r)||(r=Array.from(r));var s,a=r.length,l,c,o=new Array(a);for(s=0;s<a;++s)o[s]=t(r[s],s,r);var u=e(o),f=u[0],h=u[1],d=n(o,f,h);if(!Array.isArray(d)){const b=h,g=+d;if(e===gi&&([f,h]=uc(f,h,g)),d=bi(f,h,g),d[0]<=f&&(c=An(f,h,g)),d[d.length-1]>=h)if(b>=h&&e===gi){const _=An(f,h,g);isFinite(_)&&(_>0?h=(Math.floor(h/_)+1)*_:_<0&&(h=(Math.ceil(h*-_)+1)/-_))}else d.pop()}for(var m=d.length,w=0,v=m;d[w]<=f;)++w;for(;d[v-1]>h;)--v;(w||v<m)&&(d=d.slice(w,v),m=v-w);var p=new Array(m+1),y;for(s=0;s<=m;++s)y=p[s]=[],y.x0=s>0?d[s-1]:f,y.x1=s<m?d[s]:h;if(isFinite(c)){if(c>0)for(s=0;s<a;++s)(l=o[s])!=null&&f<=l&&l<=h&&p[Math.min(m,Math.floor((l-f)/c))].push(r[s]);else if(c<0){for(s=0;s<a;++s)if((l=o[s])!=null&&f<=l&&l<=h){const b=Math.floor((f-l)*c);p[Math.min(m,b+(d[b]<=l))].push(r[s])}}}else for(s=0;s<a;++s)(l=o[s])!=null&&f<=l&&l<=h&&p[cc(d,l,0,m)].push(r[s]);return p}return i.value=function(r){return arguments.length?(t=typeof r=="function"?r:Yr(r),i):t},i.domain=function(r){return arguments.length?(e=typeof r=="function"?r:Yr([r[0],r[1]]),i):e},i.thresholds=function(r){return arguments.length?(n=typeof r=="function"?r:Yr(Array.isArray(r)?Jf.call(r):r),i):n},i}function i0(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function r0(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function s0(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function a0(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function l0(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}const o0=c0(Math.random);function c0(t){return function(n,i=0,r=n.length){let s=r-(i=+i);for(;s;){const a=t()*s--|0,l=n[s+i];n[s+i]=n[a+i],n[a+i]=l}return n}}function u0(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function un(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function h0(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ha=Symbol("implicit");function ia(){var t=new Oa,e=[],n=[],i=Ha;function r(s){let a=t.get(s);if(a===void 0){if(i!==Ha)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Oa;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return ia(e,n).unknown(i)},un.apply(r,arguments),r}function ra(){var t=ia().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,l=!1,c=0,o=0,u=.5;delete t.unknown;function f(){var h=e().length,d=r<i,m=d?r:i,w=d?i:r;s=(w-m)/Math.max(1,h-c+o*2),l&&(s=Math.floor(s)),m+=(w-m-s*(h-c))*u,a=s*(1-c),l&&(m=Math.round(m),a=Math.round(a));var v=l0(h).map(function(p){return m+s*p});return n(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,o=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(o=+h,f()):o},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return ra(e(),[i,r]).round(l).paddingInner(c).paddingOuter(o).align(u)},un.apply(f(),arguments)}function fc(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fc(e())},t}function f0(){return fc(ra.apply(null,arguments).paddingInner(1))}function Hn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zi(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Xe(){}var an=.7,In=1/an,Mn="\\s*([+-]?\\d+)\\s*",vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d0=/^#([0-9a-f]{3,8})$/,g0=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),p0=new RegExp(`^rgb\\(${be},${be},${be}\\)$`),m0=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${vi}\\)$`),y0=new RegExp(`^rgba\\(${be},${be},${be},${vi}\\)$`),b0=new RegExp(`^hsl\\(${vi},${be},${be}\\)$`),v0=new RegExp(`^hsla\\(${vi},${be},${be},${vi}\\)$`),Ya={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Xe,Ye,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ga,formatHex:Ga,formatHex8:w0,formatHsl:_0,formatRgb:Ka,toString:Ka});function Ga(){return this.rgb().formatHex()}function w0(){return this.rgb().formatHex8()}function _0(){return dc(this).formatHsl()}function Ka(){return this.rgb().formatRgb()}function Ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=d0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Xa(e):n===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=g0.exec(t))?new Ct(e[1],e[2],e[3],1):(e=p0.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=m0.exec(t))?Pi(e[1],e[2],e[3],e[4]):(e=y0.exec(t))?Pi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=b0.exec(t))?ja(e[1],e[2]/100,e[3]/100,1):(e=v0.exec(t))?ja(e[1],e[2]/100,e[3]/100,e[4]):Ya.hasOwnProperty(t)?Xa(Ya[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Xa(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function Pi(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ct(t,e,n,i)}function sa(t){return t instanceof Xe||(t=Ye(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function wi(t,e,n,i){return arguments.length===1?sa(t):new Ct(t,e,n,i??1)}function Ct(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Hn(Ct,wi,zi(Xe,{brighter(t){return t=t==null?In:Math.pow(In,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(rn(this.r),rn(this.g),rn(this.b),ir(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wa,formatHex:Wa,formatHex8:S0,formatRgb:Za,toString:Za}));function Wa(){return`#${nn(this.r)}${nn(this.g)}${nn(this.b)}`}function S0(){return`#${nn(this.r)}${nn(this.g)}${nn(this.b)}${nn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Za(){const t=ir(this.opacity);return`${t===1?"rgb(":"rgba("}${rn(this.r)}, ${rn(this.g)}, ${rn(this.b)}${t===1?")":`, ${t})`}`}function ir(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nn(t){return t=rn(t),(t<16?"0":"")+t.toString(16)}function ja(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ie(t,e,n,i)}function dc(t){if(t instanceof ie)return new ie(t.h,t.s,t.l,t.opacity);if(t instanceof Xe||(t=Ye(t)),!t)return new ie;if(t instanceof ie)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,c=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+r:2-s-r,a*=60):l=c>0&&c<1?0:a,new ie(a,l,c,t.opacity)}function gc(t,e,n,i){return arguments.length===1?dc(t):new ie(t,e,n,i??1)}function ie(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Hn(ie,gc,zi(Xe,{brighter(t){return t=t==null?In:Math.pow(In,t),new ie(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new ie(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ct(Gr(t>=240?t-240:t+120,r,i),Gr(t,r,i),Gr(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ie(Ja(this.h),Fi(this.s),Fi(this.l),ir(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ir(this.opacity);return`${t===1?"hsl(":"hsla("}${Ja(this.h)}, ${Fi(this.s)*100}%, ${Fi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ja(t){return t=(t||0)%360,t<0?t+360:t}function Fi(t){return Math.max(0,Math.min(1,t||0))}function Gr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pc=Math.PI/180,mc=180/Math.PI,rr=18,yc=.96422,bc=1,vc=.82521,wc=4/29,Cn=6/29,_c=3*Cn*Cn,x0=Cn*Cn*Cn;function Sc(t){if(t instanceof ve)return new ve(t.l,t.a,t.b,t.opacity);if(t instanceof me)return kc(t);t instanceof Ct||(t=sa(t));var e=Zr(t.r),n=Zr(t.g),i=Zr(t.b),r=Kr((.2225045*e+.7168786*n+.0606169*i)/bc),s,a;return e===n&&n===i?s=a=r:(s=Kr((.4360747*e+.3850649*n+.1430804*i)/yc),a=Kr((.0139322*e+.0971045*n+.7141733*i)/vc)),new ve(116*r-16,500*(s-r),200*(r-a),t.opacity)}function k0(t,e,n,i){return arguments.length===1?Sc(t):new ve(t,e,n,i??1)}function ve(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Hn(ve,k0,zi(Xe,{brighter(t){return new ve(this.l+rr*(t??1),this.a,this.b,this.opacity)},darker(t){return new ve(this.l-rr*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=yc*Xr(e),t=bc*Xr(t),n=vc*Xr(n),new Ct(Wr(3.1338561*e-1.6168667*t-.4906146*n),Wr(-.9787684*e+1.9161415*t+.033454*n),Wr(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Kr(t){return t>x0?Math.pow(t,1/3):t/_c+wc}function Xr(t){return t>Cn?t*t*t:_c*(t-wc)}function Wr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Zr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xc(t){if(t instanceof me)return new me(t.h,t.c,t.l,t.opacity);if(t instanceof ve||(t=Sc(t)),t.a===0&&t.b===0)return new me(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*mc;return new me(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function M0(t,e,n,i){return arguments.length===1?xc(t):new me(n,e,t,i??1)}function ks(t,e,n,i){return arguments.length===1?xc(t):new me(t,e,n,i??1)}function me(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function kc(t){if(isNaN(t.h))return new ve(t.l,0,0,t.opacity);var e=t.h*pc;return new ve(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Hn(me,ks,zi(Xe,{brighter(t){return new me(this.h,this.c,this.l+rr*(t??1),this.opacity)},darker(t){return new me(this.h,this.c,this.l-rr*(t??1),this.opacity)},rgb(){return kc(this).rgb()}}));var Mc=-.14861,aa=1.78277,la=-.29227,Dr=-.90649,_i=1.97294,Qa=_i*Dr,tl=_i*aa,el=aa*la-Dr*Mc;function C0(t){if(t instanceof sn)return new sn(t.h,t.s,t.l,t.opacity);t instanceof Ct||(t=sa(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(el*i+Qa*e-tl*n)/(el+Qa-tl),s=i-r,a=(_i*(n-r)-la*s)/Dr,l=Math.sqrt(a*a+s*s)/(_i*r*(1-r)),c=l?Math.atan2(a,s)*mc-120:NaN;return new sn(c<0?c+360:c,l,r,t.opacity)}function Ge(t,e,n,i){return arguments.length===1?C0(t):new sn(t,e,n,i??1)}function sn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Hn(sn,Ge,zi(Xe,{brighter(t){return t=t==null?In:Math.pow(In,t),new sn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new sn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*pc,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Ct(255*(e+n*(Mc*i+aa*r)),255*(e+n*(la*i+Dr*r)),255*(e+n*(_i*i)),this.opacity)}}));function T0(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}function D0(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,l=i<e-1?t[i+2]:2*s-r;return T0((n-i/e)*e,a,r,s,l)}}const Nr=t=>()=>t;function Cc(t,e){return function(n){return t+n*e}}function N0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Tc(t,e){var n=e-t;return n?Cc(t,n>180||n<-180?n-360*Math.round(n/360):n):Nr(isNaN(t)?e:t)}function z0(t){return(t=+t)==1?Ae:function(e,n){return n-e?N0(e,n,t):Nr(isNaN(e)?n:e)}}function Ae(t,e){var n=e-t;return n?Cc(t,n):Nr(isNaN(t)?e:t)}const sr=function t(e){var n=z0(e);function i(r,s){var a=n((r=wi(r)).r,(s=wi(s)).r),l=n(r.g,s.g),c=n(r.b,s.b),o=Ae(r.opacity,s.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=c(u),r.opacity=o(u),r+""}}return i.gamma=t,i}(1);function $0(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=wi(e[a]),i[a]=l.r||0,r[a]=l.g||0,s[a]=l.b||0;return i=t(i),r=t(r),s=t(s),l.opacity=1,function(c){return l.r=i(c),l.g=r(c),l.b=s(c),l+""}}}var L0=$0(D0);function A0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function I0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function E0(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=Yn(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<i;++a)s[a]=r[a](l);return s}}function P0(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ne(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function F0(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Yn(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Ms=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(Ms.source,"g");function V0(t){return function(){return t}}function U0(t){return function(e){return t(e)+""}}function Dc(t,e){var n=Ms.lastIndex=jr.lastIndex=0,i,r,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(i=Ms.exec(t))&&(r=jr.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,c.push({i:a,x:ne(i,r)})),n=jr.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?U0(c[0].x):V0(e):(e=c.length,function(o){for(var u=0,f;u<e;++u)l[(f=c[u]).i]=f.x(o);return l.join("")})}function Yn(t,e){var n=typeof e,i;return e==null||n==="boolean"?Nr(e):(n==="number"?ne:n==="string"?(i=Ye(e))?(e=i,sr):Dc:e instanceof Ye?sr:e instanceof Date?P0:I0(e)?A0:Array.isArray(e)?E0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?F0:ne)(t,e)}function Nc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var nl=180/Math.PI,Cs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zc(t,e,n,i,r,s){var a,l,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),t*i<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*nl,skewX:Math.atan(c)*nl,scaleX:a,scaleY:l}}var Vi;function R0(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cs:zc(e.a,e.b,e.c,e.d,e.e,e.f)}function B0(t){return t==null||(Vi||(Vi=document.createElementNS("http://www.w3.org/2000/svg","g")),Vi.setAttribute("transform",t),!(t=Vi.transform.baseVal.consolidate()))?Cs:(t=t.matrix,zc(t.a,t.b,t.c,t.d,t.e,t.f))}function $c(t,e,n,i){function r(o){return o.length?o.pop()+" ":""}function s(o,u,f,h,d,m){if(o!==f||u!==h){var w=d.push("translate(",null,e,null,n);m.push({i:w-4,x:ne(o,f)},{i:w-2,x:ne(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(o,u,f,h){o!==u?(o-u>180?u+=360:u-o>180&&(o+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:ne(o,u)})):u&&f.push(r(f)+"rotate("+u+i)}function l(o,u,f,h){o!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:ne(o,u)}):u&&f.push(r(f)+"skewX("+u+i)}function c(o,u,f,h,d,m){if(o!==f||u!==h){var w=d.push(r(d)+"scale(",null,",",null,")");m.push({i:w-4,x:ne(o,f)},{i:w-2,x:ne(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(o,u){var f=[],h=[];return o=t(o),u=t(u),s(o.translateX,o.translateY,u.translateX,u.translateY,f,h),a(o.rotate,u.rotate,f,h),l(o.skewX,u.skewX,f,h),c(o.scaleX,o.scaleY,u.scaleX,u.scaleY,f,h),o=u=null,function(d){for(var m=-1,w=h.length,v;++m<w;)f[(v=h[m]).i]=v.x(d);return f.join("")}}}var O0=$c(R0,"px, ","px)","deg)"),q0=$c(B0,", ",")",")"),H0=1e-12;function il(t){return((t=Math.exp(t))+1/t)/2}function Y0(t){return((t=Math.exp(t))-1/t)/2}function G0(t){return((t=Math.exp(2*t))-1)/(t+1)}const K0=function t(e,n,i){function r(s,a){var l=s[0],c=s[1],o=s[2],u=a[0],f=a[1],h=a[2],d=u-l,m=f-c,w=d*d+m*m,v,p;if(w<H0)p=Math.log(h/o)/e,v=function(N){return[l+N*d,c+N*m,o*Math.exp(e*N*p)]};else{var y=Math.sqrt(w),b=(h*h-o*o+i*w)/(2*o*n*y),g=(h*h-o*o-i*w)/(2*h*n*y),_=Math.log(Math.sqrt(b*b+1)-b),M=Math.log(Math.sqrt(g*g+1)-g);p=(M-_)/e,v=function(N){var I=N*p,P=il(_),$=o/(n*y)*(P*G0(e*I+_)-Y0(_));return[l+$*d,c+$*m,o*P/il(e*I+_)]}}return v.duration=p*1e3*e/Math.SQRT2,v}return r.rho=function(s){var a=Math.max(.001,+s),l=a*a,c=l*l;return t(a,l,c)},r}(Math.SQRT2,2,4);function X0(t){return function(e,n){var i=t((e=ks(e)).h,(n=ks(n)).h),r=Ae(e.c,n.c),s=Ae(e.l,n.l),a=Ae(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=s(l),e.opacity=a(l),e+""}}}const W0=X0(Tc);function Lc(t){return function e(n){n=+n;function i(r,s){var a=t((r=Ge(r)).h,(s=Ge(s)).h),l=Ae(r.s,s.s),c=Ae(r.l,s.l),o=Ae(r.opacity,s.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=c(Math.pow(u,n)),r.opacity=o(u),r+""}}return i.gamma=e,i}(1)}Lc(Tc);var Ac=Lc(Ae);function Z0(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function j0(t){return function(){return t}}function J0(t){return+t}var rl=[0,1];function Wt(t){return t}function Ts(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:j0(isNaN(e)?NaN:.5)}function Q0(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function td(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Ts(r,i),s=n(a,s)):(i=Ts(i,r),s=n(s,a)),function(l){return s(i(l))}}function ed(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Ts(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=cc(t,l,1,i)-1;return s[c](r[c](l))}}function zr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oa(){var t=rl,e=rl,n=Yn,i,r,s,a=Wt,l,c,o;function u(){var h=Math.min(t.length,e.length);return a!==Wt&&(a=Q0(t[0],t[h-1])),l=h>2?ed:td,c=o=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(i),e,n)))(i(a(h)))}return f.invert=function(h){return a(r((o||(o=l(e,t.map(i),ne)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,J0),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Nc,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Wt,u()):a!==Wt},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function Ic(){return oa()(Wt,Wt)}function nd(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ar(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function En(t){return t=ar(Math.abs(t)),t?t[1]:NaN}function id(t,e){return function(n,i){for(var r=n.length,s=[],a=0,l=t[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function rd(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Si(t){if(!(e=sd.exec(t)))throw new Error("invalid format: "+t);var e;return new ca({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Si.prototype=ca.prototype;function ca(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ca.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ad(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Ec;function ld(t,e){var n=ar(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Ec=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+ar(t,Math.max(0,e+s-1))[0]}function sl(t,e){var n=ar(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const al={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nd,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>sl(t*100,e),r:sl,s:ld,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ll(t){return t}var ol=Array.prototype.map,cl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function od(t){var e=t.grouping===void 0||t.thousands===void 0?ll:id(ol.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ll:rd(ol.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function o(f){f=Si(f);var h=f.fill,d=f.align,m=f.sign,w=f.symbol,v=f.zero,p=f.width,y=f.comma,b=f.precision,g=f.trim,_=f.type;_==="n"?(y=!0,_="g"):al[_]||(b===void 0&&(b=12),g=!0,_="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var M=w==="$"?n:w==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",N=w==="$"?i:/[%p]/.test(_)?a:"",I=al[_],P=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(D){var B=M,A=N,x,E,z;if(_==="c")A=I(D)+A,D="";else{D=+D;var F=D<0||1/D<0;if(D=isNaN(D)?c:I(Math.abs(D),b),g&&(D=ad(D)),F&&+D==0&&m!=="+"&&(F=!1),B=(F?m==="("?m:l:m==="-"||m==="("?"":m)+B,A=(_==="s"?cl[8+Ec/3]:"")+A+(F&&m==="("?")":""),P){for(x=-1,E=D.length;++x<E;)if(z=D.charCodeAt(x),48>z||z>57){A=(z===46?r+D.slice(x+1):D.slice(x))+A,D=D.slice(0,x);break}}}y&&!v&&(D=e(D,1/0));var G=B.length+D.length+A.length,O=G<p?new Array(p-G+1).join(h):"";switch(y&&v&&(D=e(O+D,O.length?p-A.length:1/0),O=""),d){case"<":D=B+D+A+O;break;case"=":D=B+O+D+A;break;case"^":D=O.slice(0,G=O.length>>1)+B+D+A+O.slice(G);break;default:D=O+B+D+A;break}return s(D)}return $.toString=function(){return f+""},$}function u(f,h){var d=o((f=Si(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(En(h)/3)))*3,w=Math.pow(10,-m),v=cl[8+m/3];return function(p){return d(w*p)+v}}return{format:o,formatPrefix:u}}var Ui,$r,Pc;cd({thousands:",",grouping:[3],currency:["$",""]});function cd(t){return Ui=od(t),$r=Ui.format,Pc=Ui.formatPrefix,Ui}function ud(t){return Math.max(0,-En(Math.abs(t)))}function hd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(En(e)/3)))*3-En(Math.abs(t)))}function fd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,En(e)-En(t))+1}function dd(t,e,n,i){var r=xs(t,e,n),s;switch(i=Si(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=hd(r,a))&&(i.precision=s),Pc(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=fd(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=ud(r))&&(i.precision=s-(i.type==="%")*2);break}}return $r(i)}function ua(t){var e=t.domain;return t.ticks=function(n){var i=e();return bi(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return dd(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],l=i[s],c,o,u=10;for(l<a&&(o=a,a=l,l=o,o=r,r=s,s=o);u-- >0;){if(o=An(a,l,n),o===c)return i[r]=a,i[s]=l,e(i);if(o>0)a=Math.floor(a/o)*o,l=Math.ceil(l/o)*o;else if(o<0)a=Math.ceil(a*o)/o,l=Math.floor(l*o)/o;else break;c=o}return t},t}function Fc(){var t=Ic();return t.copy=function(){return zr(t,Fc())},un.apply(t,arguments),ua(t)}function Vc(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function ul(t){return Math.log(t)}function hl(t){return Math.exp(t)}function gd(t){return-Math.log(-t)}function pd(t){return-Math.exp(-t)}function md(t){return isFinite(t)?+("1e"+t):t<0?0:t}function yd(t){return t===10?md:t===Math.E?Math.exp:e=>Math.pow(t,e)}function bd(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function fl(t){return(e,n)=>-t(-e,n)}function vd(t){const e=t(ul,hl),n=e.domain;let i=10,r,s;function a(){return r=bd(i),s=yd(i),n()[0]<0?(r=fl(r),s=fl(s),t(gd,pd)):t(ul,hl),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let o=c[0],u=c[c.length-1];const f=u<o;f&&([o,u]=[u,o]);let h=r(o),d=r(u),m,w;const v=l==null?10:+l;let p=[];if(!(i%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(m=1;m<i;++m)if(w=h<0?m/s(-h):m*s(h),!(w<o)){if(w>u)break;p.push(w)}}else for(;h<=d;++h)for(m=i-1;m>=1;--m)if(w=h>0?m/s(-h):m*s(h),!(w<o)){if(w>u)break;p.push(w)}p.length*2<v&&(p=bi(o,u,v))}else p=bi(h,d,Math.min(d-h,v)).map(s);return f?p.reverse():p},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Si(c)).precision==null&&(c.trim=!0),c=$r(c)),l===1/0)return c;const o=Math.max(1,i*l/e.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=o?c(u):""}},e.nice=()=>n(Vc(n(),{floor:l=>s(Math.floor(r(l))),ceil:l=>s(Math.ceil(r(l)))})),e}function Uc(){const t=vd(oa()).domain([1,10]);return t.copy=()=>zr(t,Uc()).base(t.base()),un.apply(t,arguments),t}function dl(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wd(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _d(t){return t<0?-t*t:t*t}function Sd(t){var e=t(Wt,Wt),n=1;function i(){return n===1?t(Wt,Wt):n===.5?t(wd,_d):t(dl(n),dl(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ua(e)}function ha(){var t=Sd(oa());return t.copy=function(){return zr(t,ha()).exponent(t.exponent())},un.apply(t,arguments),t}function xd(){return ha.apply(null,arguments).exponent(.5)}const Jr=new Date,Qr=new Date;function Mt(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),l=r.ceil(s);return s-a<l-s?a:l},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,l)=>{const c=[];if(s=r.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let o;do c.push(o=new Date(+s)),e(s,l),t(s);while(o<s&&s<a);return c},r.filter=s=>Mt(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(Jr.setTime(+s),Qr.setTime(+a),t(Jr),t(Qr),Math.floor(n(Jr,Qr))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const lr=Mt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);lr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Mt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):lr);lr.range;const ze=1e3,Zt=ze*60,$e=Zt*60,Ie=$e*24,fa=Ie*7,gl=Ie*30,ts=Ie*365,qe=Mt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getUTCSeconds());qe.range;const Lr=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ze)},(t,e)=>{t.setTime(+t+e*Zt)},(t,e)=>(e-t)/Zt,t=>t.getMinutes());Lr.range;const da=Mt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Zt)},(t,e)=>(e-t)/Zt,t=>t.getUTCMinutes());da.range;const Ar=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ze-t.getMinutes()*Zt)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getHours());Ar.range;const ga=Mt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getUTCHours());ga.range;const Gn=Mt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zt)/Ie,t=>t.getDate()-1);Gn.range;const Ir=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ie,t=>t.getUTCDate()-1);Ir.range;const Rc=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ie,t=>Math.floor(t/Ie));Rc.range;function hn(t){return Mt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Zt)/fa)}const $i=hn(0),or=hn(1),kd=hn(2),Md=hn(3),Pn=hn(4),Cd=hn(5),Td=hn(6);$i.range;or.range;kd.range;Md.range;Pn.range;Cd.range;Td.range;function fn(t){return Mt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fa)}const Er=fn(0),cr=fn(1),Dd=fn(2),Nd=fn(3),Fn=fn(4),zd=fn(5),$d=fn(6);Er.range;cr.range;Dd.range;Nd.range;Fn.range;zd.range;$d.range;const Pr=Mt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Pr.range;const pa=Mt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pa.range;const we=Mt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());we.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});we.range;const Ee=Mt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ee.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ee.range;function Bc(t,e,n,i,r,s){const a=[[qe,1,ze],[qe,5,5*ze],[qe,15,15*ze],[qe,30,30*ze],[s,1,Zt],[s,5,5*Zt],[s,15,15*Zt],[s,30,30*Zt],[r,1,$e],[r,3,3*$e],[r,6,6*$e],[r,12,12*$e],[i,1,Ie],[i,2,2*Ie],[n,1,fa],[e,1,gl],[e,3,3*gl],[t,1,ts]];function l(o,u,f){const h=u<o;h&&([o,u]=[u,o]);const d=f&&typeof f.range=="function"?f:c(o,u,f),m=d?d.range(o,+u+1):[];return h?m.reverse():m}function c(o,u,f){const h=Math.abs(u-o)/f,d=na(([,,v])=>v).right(a,h);if(d===a.length)return t.every(xs(o/ts,u/ts,f));if(d===0)return lr.every(Math.max(xs(o,u,f),1));const[m,w]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return m.every(w)}return[l,c]}const[Ld,Ad]=Bc(Ee,pa,Er,Rc,ga,da),[Id,Ed]=Bc(we,Pr,$i,Gn,Ar,Lr);function es(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ns(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jn(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Pd(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,o=Qn(r),u=ti(r),f=Qn(s),h=ti(s),d=Qn(a),m=ti(a),w=Qn(l),v=ti(l),p=Qn(c),y=ti(c),b={a:F,A:G,b:O,B:K,c:null,d:wl,e:wl,f:s1,g:p1,G:y1,H:n1,I:i1,j:r1,L:Oc,m:a1,M:l1,p:W,q:Z,Q:xl,s:kl,S:o1,u:c1,U:u1,V:h1,w:f1,W:d1,x:null,X:null,y:g1,Y:m1,Z:b1,"%":Sl},g={a:pt,A:R,b:X,B:V,c:null,d:_l,e:_l,f:S1,g:L1,G:I1,H:v1,I:w1,j:_1,L:Hc,m:x1,M:k1,p:q,q:Q,Q:xl,s:kl,S:M1,u:C1,U:T1,V:D1,w:N1,W:z1,x:null,X:null,y:$1,Y:A1,Z:E1,"%":Sl},_={a:$,A:D,b:B,B:A,c:x,d:bl,e:bl,f:Jd,g:yl,G:ml,H:vl,I:vl,j:Xd,L:jd,m:Kd,M:Wd,p:P,q:Gd,Q:t1,s:e1,S:Zd,u:Bd,U:Od,V:qd,w:Rd,W:Hd,x:E,X:z,y:yl,Y:ml,Z:Yd,"%":Qd};b.x=M(n,b),b.X=M(i,b),b.c=M(e,b),g.x=M(n,g),g.X=M(i,g),g.c=M(e,g);function M(Y,j){return function(st){var U=[],ft=-1,nt=0,ht=Y.length,yt,J,gt;for(st instanceof Date||(st=new Date(+st));++ft<ht;)Y.charCodeAt(ft)===37&&(U.push(Y.slice(nt,ft)),(J=pl[yt=Y.charAt(++ft)])!=null?yt=Y.charAt(++ft):J=yt==="e"?" ":"0",(gt=j[yt])&&(yt=gt(st,J)),U.push(yt),nt=ft+1);return U.push(Y.slice(nt,ft)),U.join("")}}function N(Y,j){return function(st){var U=Jn(1900,void 0,1),ft=I(U,Y,st+="",0),nt,ht;if(ft!=st.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(j&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(nt=ns(Jn(U.y,0,1)),ht=nt.getUTCDay(),nt=ht>4||ht===0?cr.ceil(nt):cr(nt),nt=Ir.offset(nt,(U.V-1)*7),U.y=nt.getUTCFullYear(),U.m=nt.getUTCMonth(),U.d=nt.getUTCDate()+(U.w+6)%7):(nt=es(Jn(U.y,0,1)),ht=nt.getDay(),nt=ht>4||ht===0?or.ceil(nt):or(nt),nt=Gn.offset(nt,(U.V-1)*7),U.y=nt.getFullYear(),U.m=nt.getMonth(),U.d=nt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),ht="Z"in U?ns(Jn(U.y,0,1)).getUTCDay():es(Jn(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(ht+5)%7:U.w+U.U*7-(ht+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,ns(U)):es(U)}}function I(Y,j,st,U){for(var ft=0,nt=j.length,ht=st.length,yt,J;ft<nt;){if(U>=ht)return-1;if(yt=j.charCodeAt(ft++),yt===37){if(yt=j.charAt(ft++),J=_[yt in pl?j.charAt(ft++):yt],!J||(U=J(Y,st,U))<0)return-1}else if(yt!=st.charCodeAt(U++))return-1}return U}function P(Y,j,st){var U=o.exec(j.slice(st));return U?(Y.p=u.get(U[0].toLowerCase()),st+U[0].length):-1}function $(Y,j,st){var U=d.exec(j.slice(st));return U?(Y.w=m.get(U[0].toLowerCase()),st+U[0].length):-1}function D(Y,j,st){var U=f.exec(j.slice(st));return U?(Y.w=h.get(U[0].toLowerCase()),st+U[0].length):-1}function B(Y,j,st){var U=p.exec(j.slice(st));return U?(Y.m=y.get(U[0].toLowerCase()),st+U[0].length):-1}function A(Y,j,st){var U=w.exec(j.slice(st));return U?(Y.m=v.get(U[0].toLowerCase()),st+U[0].length):-1}function x(Y,j,st){return I(Y,e,j,st)}function E(Y,j,st){return I(Y,n,j,st)}function z(Y,j,st){return I(Y,i,j,st)}function F(Y){return a[Y.getDay()]}function G(Y){return s[Y.getDay()]}function O(Y){return c[Y.getMonth()]}function K(Y){return l[Y.getMonth()]}function W(Y){return r[+(Y.getHours()>=12)]}function Z(Y){return 1+~~(Y.getMonth()/3)}function pt(Y){return a[Y.getUTCDay()]}function R(Y){return s[Y.getUTCDay()]}function X(Y){return c[Y.getUTCMonth()]}function V(Y){return l[Y.getUTCMonth()]}function q(Y){return r[+(Y.getUTCHours()>=12)]}function Q(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var j=M(Y+="",b);return j.toString=function(){return Y},j},parse:function(Y){var j=N(Y+="",!1);return j.toString=function(){return Y},j},utcFormat:function(Y){var j=M(Y+="",g);return j.toString=function(){return Y},j},utcParse:function(Y){var j=N(Y+="",!0);return j.toString=function(){return Y},j}}}var pl={"-":"",_:" ",0:"0"},Tt=/^\s*\d+/,Fd=/^%/,Vd=/[\\^$*+?|[\]().{}]/g;function dt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Ud(t){return t.replace(Vd,"\\$&")}function Qn(t){return new RegExp("^(?:"+t.map(Ud).join("|")+")","i")}function ti(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Rd(t,e,n){var i=Tt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Bd(t,e,n){var i=Tt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Od(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function qd(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Hd(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function ml(t,e,n){var i=Tt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function yl(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Yd(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Gd(t,e,n){var i=Tt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Kd(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function bl(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Xd(t,e,n){var i=Tt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function vl(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Wd(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Zd(t,e,n){var i=Tt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function jd(t,e,n){var i=Tt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Jd(t,e,n){var i=Tt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Qd(t,e,n){var i=Fd.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function t1(t,e,n){var i=Tt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function e1(t,e,n){var i=Tt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function wl(t,e){return dt(t.getDate(),e,2)}function n1(t,e){return dt(t.getHours(),e,2)}function i1(t,e){return dt(t.getHours()%12||12,e,2)}function r1(t,e){return dt(1+Gn.count(we(t),t),e,3)}function Oc(t,e){return dt(t.getMilliseconds(),e,3)}function s1(t,e){return Oc(t,e)+"000"}function a1(t,e){return dt(t.getMonth()+1,e,2)}function l1(t,e){return dt(t.getMinutes(),e,2)}function o1(t,e){return dt(t.getSeconds(),e,2)}function c1(t){var e=t.getDay();return e===0?7:e}function u1(t,e){return dt($i.count(we(t)-1,t),e,2)}function qc(t){var e=t.getDay();return e>=4||e===0?Pn(t):Pn.ceil(t)}function h1(t,e){return t=qc(t),dt(Pn.count(we(t),t)+(we(t).getDay()===4),e,2)}function f1(t){return t.getDay()}function d1(t,e){return dt(or.count(we(t)-1,t),e,2)}function g1(t,e){return dt(t.getFullYear()%100,e,2)}function p1(t,e){return t=qc(t),dt(t.getFullYear()%100,e,2)}function m1(t,e){return dt(t.getFullYear()%1e4,e,4)}function y1(t,e){var n=t.getDay();return t=n>=4||n===0?Pn(t):Pn.ceil(t),dt(t.getFullYear()%1e4,e,4)}function b1(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+dt(e/60|0,"0",2)+dt(e%60,"0",2)}function _l(t,e){return dt(t.getUTCDate(),e,2)}function v1(t,e){return dt(t.getUTCHours(),e,2)}function w1(t,e){return dt(t.getUTCHours()%12||12,e,2)}function _1(t,e){return dt(1+Ir.count(Ee(t),t),e,3)}function Hc(t,e){return dt(t.getUTCMilliseconds(),e,3)}function S1(t,e){return Hc(t,e)+"000"}function x1(t,e){return dt(t.getUTCMonth()+1,e,2)}function k1(t,e){return dt(t.getUTCMinutes(),e,2)}function M1(t,e){return dt(t.getUTCSeconds(),e,2)}function C1(t){var e=t.getUTCDay();return e===0?7:e}function T1(t,e){return dt(Er.count(Ee(t)-1,t),e,2)}function Yc(t){var e=t.getUTCDay();return e>=4||e===0?Fn(t):Fn.ceil(t)}function D1(t,e){return t=Yc(t),dt(Fn.count(Ee(t),t)+(Ee(t).getUTCDay()===4),e,2)}function N1(t){return t.getUTCDay()}function z1(t,e){return dt(cr.count(Ee(t)-1,t),e,2)}function $1(t,e){return dt(t.getUTCFullYear()%100,e,2)}function L1(t,e){return t=Yc(t),dt(t.getUTCFullYear()%100,e,2)}function A1(t,e){return dt(t.getUTCFullYear()%1e4,e,4)}function I1(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Fn(t):Fn.ceil(t),dt(t.getUTCFullYear()%1e4,e,4)}function E1(){return"+0000"}function Sl(){return"%"}function xl(t){return+t}function kl(t){return Math.floor(+t/1e3)}var mn,ma,ya,Gc;P1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P1(t){return mn=Pd(t),ma=mn.format,mn.parse,ya=mn.utcFormat,Gc=mn.utcParse,mn}function F1(t){return new Date(t)}function V1(t){return t instanceof Date?+t:+new Date(+t)}function ba(t,e,n,i,r,s,a,l,c,o){var u=Ic(),f=u.invert,h=u.domain,d=o(".%L"),m=o(":%S"),w=o("%I:%M"),v=o("%I %p"),p=o("%a %d"),y=o("%b %d"),b=o("%B"),g=o("%Y");function _(M){return(c(M)<M?d:l(M)<M?m:a(M)<M?w:s(M)<M?v:i(M)<M?r(M)<M?p:y:n(M)<M?b:g)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,V1)):h().map(F1)},u.ticks=function(M){var N=h();return t(N[0],N[N.length-1],M??10)},u.tickFormat=function(M,N){return N==null?_:o(N)},u.nice=function(M){var N=h();return(!M||typeof M.range!="function")&&(M=e(N[0],N[N.length-1],M??10)),M?h(Vc(N,M)):u},u.copy=function(){return zr(u,ba(t,e,n,i,r,s,a,l,c,o))},u}function U1(){return un.apply(ba(Id,Ed,we,Pr,$i,Gn,Ar,Lr,qe,ma).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R1(){return un.apply(ba(Ld,Ad,Ee,pa,Er,Ir,ga,da,qe,ya).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B1(){var t=0,e=1,n,i,r,s,a=Wt,l=!1,c;function o(f){return f==null||isNaN(f=+f)?c:a(r===0?.5:(f=(s(f)-n)*r,l?Math.max(0,Math.min(1,f)):f))}o.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),o):[t,e]},o.clamp=function(f){return arguments.length?(l=!!f,o):l},o.interpolator=function(f){return arguments.length?(a=f,o):a};function u(f){return function(h){var d,m;return arguments.length?([d,m]=h,a=f(d,m),o):[a(0),a(1)]}}return o.range=u(Yn),o.rangeRound=u(Nc),o.unknown=function(f){return arguments.length?(c=f,o):c},function(f){return s=f,n=f(t),i=f(e),r=n===i?0:1/(i-n),o}}function O1(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Kc(){var t=ua(B1()(Wt));return t.copy=function(){return O1(t,Kc())},h0.apply(t,arguments)}function _e(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const q1=_e("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Li=t=>L0(t[t.length-1]);var H1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_e);const Y1=Li(H1);var G1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_e);const K1=Li(G1);var X1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(_e);const W1=Li(X1);var Z1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_e);const j1=Li(Z1);var J1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_e);const Q1=Li(J1);Ac(Ge(-100,.75,.35),Ge(80,1.5,.8));Ac(Ge(260,.75,.35),Ge(80,1.5,.8));var Ri=Ge();function tg(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Ri.h=360*t-100,Ri.s=1.5-1.5*e,Ri.l=.8-.9*e,Ri+""}function Fr(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const eg=Fr(_e("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Fr(_e("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Fr(_e("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));Fr(_e("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Vn=0,ai=0,ei=0,Xc=1e3,ur,li,hr=0,ln=0,Vr=0,xi=typeof performance=="object"&&performance.now?performance:Date,Wc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function va(){return ln||(Wc(ng),ln=xi.now()+Vr)}function ng(){ln=0}function fr(){this._call=this._time=this._next=null}fr.prototype=Zc.prototype={constructor:fr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?va():+n)+(e==null?0:+e),!this._next&&li!==this&&(li?li._next=this:ur=this,li=this),this._call=t,this._time=n,Ds()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ds())}};function Zc(t,e,n){var i=new fr;return i.restart(t,e,n),i}function ig(){va(),++Vn;for(var t=ur,e;t;)(e=ln-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vn}function Ml(){ln=(hr=xi.now())+Vr,Vn=ai=0;try{ig()}finally{Vn=0,sg(),ln=0}}function rg(){var t=xi.now(),e=t-hr;e>Xc&&(Vr-=e,hr=t)}function sg(){for(var t,e=ur,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ur=n);li=t,Ds(i)}function Ds(t){if(!Vn){ai&&(ai=clearTimeout(ai));var e=t-ln;e>24?(t<1/0&&(ai=setTimeout(Ml,t-xi.now()-Vr)),ei&&(ei=clearInterval(ei))):(ei||(hr=xi.now(),ei=setInterval(rg,Xc)),Vn=1,Wc(Ml))}}function Ns(t,e,n){var i=new fr;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var ag={value:()=>{}};function Ai(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Xi(n)}function Xi(t){this._=t}function lg(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Xi.prototype=Ai.prototype={constructor:Xi,on:function(t,e){var n=this._,i=lg(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=og(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=Cl(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Cl(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Xi(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function og(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Cl(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ag,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var cg=Ai("start","end","cancel","interrupt"),ug=[],jc=0,Tl=1,zs=2,Wi=3,Dl=4,$s=5,Zi=6;function Ur(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;hg(t,n,{name:e,index:i,group:r,on:cg,tween:ug,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:jc})}function wa(t,e){var n=le(t,e);if(n.state>jc)throw new Error("too late; already scheduled");return n}function Se(t,e){var n=le(t,e);if(n.state>Wi)throw new Error("too late; already running");return n}function le(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function hg(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Zc(s,0,n.time);function s(o){n.state=Tl,n.timer.restart(a,n.delay,n.time),n.delay<=o&&a(o-n.delay)}function a(o){var u,f,h,d;if(n.state!==Tl)return c();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Wi)return Ns(a);d.state===Dl?(d.state=Zi,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Zi,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Ns(function(){n.state===Wi&&(n.state=Dl,n.timer.restart(l,n.delay,n.time),l(o))}),n.state=zs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===zs){for(n.state=Wi,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function l(o){for(var u=o<n.duration?n.ease.call(null,o/n.duration):(n.timer.restart(c),n.state=$s,1),f=-1,h=r.length;++f<h;)r[f].call(t,u);n.state===$s&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Zi,n.timer.stop(),delete i[e];for(var o in i)return;delete t.__transition}}function Tn(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>zs&&i.state<$s,i.state=Zi,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function fg(t){return this.each(function(){Tn(this,t)})}function dg(t,e){var n,i;return function(){var r=Se(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function gg(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Se(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},c=0,o=r.length;c<o;++c)if(r[c].name===e){r[c]=l;break}c===o&&r.push(l)}s.tween=r}}function pg(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=le(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?dg:gg)(n,t,e))}function _a(t,e,n){var i=t._id;return t.each(function(){var r=Se(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return le(r,i).value[e]}}function Jc(t,e){var n;return(typeof e=="number"?ne:e instanceof Ye?sr:(n=Ye(e))?(e=n,sr):Dc)(t,e)}function mg(t){return function(){this.removeAttribute(t)}}function yg(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bg(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function vg(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function wg(t,e,n){var i,r,s;return function(){var a,l=n(this),c;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=l+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,l)))}}function _g(t,e,n){var i,r,s;return function(){var a,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=l+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,l)))}}function Sg(t,e){var n=Tr(t),i=n==="transform"?q0:Jc;return this.attrTween(t,typeof e=="function"?(n.local?_g:wg)(n,i,_a(this,"attr."+t,e)):e==null?(n.local?yg:mg)(n):(n.local?vg:bg)(n,i,e))}function xg(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function kg(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Mg(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&kg(t,s)),n}return r._value=e,r}function Cg(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&xg(t,s)),n}return r._value=e,r}function Tg(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Tr(t);return this.tween(n,(i.local?Mg:Cg)(i,e))}function Dg(t,e){return function(){wa(this,t).delay=+e.apply(this,arguments)}}function Ng(t,e){return e=+e,function(){wa(this,t).delay=e}}function zg(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Dg:Ng)(e,t)):le(this.node(),e).delay}function $g(t,e){return function(){Se(this,t).duration=+e.apply(this,arguments)}}function Lg(t,e){return e=+e,function(){Se(this,t).duration=e}}function Ag(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$g:Lg)(e,t)):le(this.node(),e).duration}function Ig(t,e){if(typeof e!="function")throw new Error;return function(){Se(this,t).ease=e}}function Eg(t){var e=this._id;return arguments.length?this.each(Ig(e,t)):le(this.node(),e).ease}function Pg(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Se(this,t).ease=n}}function Fg(t){if(typeof t!="function")throw new Error;return this.each(Pg(this._id,t))}function Vg(t){typeof t!="function"&&(t=tc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],c,o=0;o<a;++o)(c=s[o])&&t.call(c,c.__data__,o,s)&&l.push(c);return new Pe(i,this._parents,this._name,this._id)}function Ug(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var c=e[l],o=n[l],u=c.length,f=a[l]=new Array(u),h,d=0;d<u;++d)(h=c[d]||o[d])&&(f[d]=h);for(;l<i;++l)a[l]=e[l];return new Pe(a,this._parents,this._name,this._id)}function Rg(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Bg(t,e,n){var i,r,s=Rg(e)?wa:Se;return function(){var a=s(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function Og(t,e){var n=this._id;return arguments.length<2?le(this.node(),n).on.on(t):this.each(Bg(n,t,e))}function qg(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hg(){return this.on("end.remove",qg(this._id))}function Yg(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Qs(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var l=i[a],c=l.length,o=s[a]=new Array(c),u,f,h=0;h<c;++h)(u=l[h])&&(f=t.call(u,u.__data__,h,l))&&("__data__"in u&&(f.__data__=u.__data__),o[h]=f,Ur(o[h],e,n,h,o,le(u,n)));return new Pe(s,this._parents,e,n)}function Gg(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Qo(t));for(var i=this._groups,r=i.length,s=[],a=[],l=0;l<r;++l)for(var c=i[l],o=c.length,u,f=0;f<o;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),d,m=le(u,n),w=0,v=h.length;w<v;++w)(d=h[w])&&Ur(d,e,n,w,h,m);s.push(h),a.push(u)}return new Pe(s,a,e,n)}var Kg=qn.prototype.constructor;function Xg(){return new Kg(this._groups,this._parents)}function Wg(t,e){var n,i,r;return function(){var s=$n(this,t),a=(this.style.removeProperty(t),$n(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function Qc(t){return function(){this.style.removeProperty(t)}}function Zg(t,e,n){var i,r=n+"",s;return function(){var a=$n(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function jg(t,e,n){var i,r,s;return function(){var a=$n(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),$n(this,t))),a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,l))}}function Jg(t,e){var n,i,r,s="style."+e,a="end."+s,l;return function(){var c=Se(this,t),o=c.on,u=c.value[s]==null?l||(l=Qc(e)):void 0;(o!==n||r!==u)&&(i=(n=o).copy()).on(a,r=u),c.on=i}}function Qg(t,e,n){var i=(t+="")=="transform"?O0:Jc;return e==null?this.styleTween(t,Wg(t,i)).on("end.style."+t,Qc(t)):typeof e=="function"?this.styleTween(t,jg(t,i,_a(this,"style."+t,e))).each(Jg(this._id,t)):this.styleTween(t,Zg(t,i,e),n).on("end.style."+t,null)}function tp(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function ep(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&tp(t,a,n)),i}return s._value=e,s}function np(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,ep(t,e,n??""))}function ip(t){return function(){this.textContent=t}}function rp(t){return function(){var e=t(this);this.textContent=e??""}}function sp(t){return this.tween("text",typeof t=="function"?rp(_a(this,"text",t)):ip(t==null?"":t+""))}function ap(t){return function(e){this.textContent=t.call(this,e)}}function lp(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ap(r)),e}return i._value=t,i}function op(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,lp(t))}function cp(){for(var t=this._name,e=this._id,n=eu(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,c,o=0;o<l;++o)if(c=a[o]){var u=le(c,e);Ur(c,t,n,o,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Pe(i,this._parents,t,n)}function up(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--r===0&&s()}};n.each(function(){var o=Se(this,i),u=o.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),o.on=e}),r===0&&s()})}var hp=0;function Pe(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function tu(t){return qn().transition(t)}function eu(){return++hp}var Ce=qn.prototype;Pe.prototype=tu.prototype={constructor:Pe,select:Yg,selectAll:Gg,selectChild:Ce.selectChild,selectChildren:Ce.selectChildren,filter:Vg,merge:Ug,selection:Xg,transition:cp,call:Ce.call,nodes:Ce.nodes,node:Ce.node,size:Ce.size,empty:Ce.empty,each:Ce.each,on:Og,attr:Sg,attrTween:Tg,style:Qg,styleTween:np,text:sp,textTween:op,remove:Hg,tween:pg,delay:zg,duration:Ag,ease:Eg,easeVarying:Fg,end:up,[Symbol.iterator]:Ce[Symbol.iterator]};const fp=t=>+t;function dp(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function nu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Sa=3;(function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n})(Sa);(function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n})(Sa);var gp=function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n}(Sa);function dr(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}var Un=2*Math.PI,xa=1,ka=.3;(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Un);function r(s){return e*dr(- --s)*Math.sin((i-s)/n)}return r.amplitude=function(s){return t(s,n*Un)},r.period=function(s){return t(e,s)},r})(xa,ka);var pp=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Un);function r(s){return 1-e*dr(s=+s)*Math.sin((s+i)/n)}return r.amplitude=function(s){return t(s,n*Un)},r.period=function(s){return t(e,s)},r}(xa,ka);(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=Un);function r(s){return((s=s*2-1)<0?e*dr(-s)*Math.sin((i-s)/n):2-e*dr(s)*Math.sin((i+s)/n))/2}return r.amplitude=function(s){return t(s,n*Un)},r.period=function(s){return t(e,s)},r})(xa,ka);var mp={time:null,delay:0,duration:250,ease:nu};function yp(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function bp(t){var e,n;t instanceof Pe?(e=t._id,t=t._name):(e=eu(),(n=mp).time=va(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,c,o=0;o<l;++o)(c=a[o])&&Ur(c,t,e,o,a,n||yp(c,e));return new Pe(i,this._parents,t,e)}qn.prototype.interrupt=fg;qn.prototype.transition=bp;function vp(t){return t}var is=1,rs=2,Ls=3,oi=4,Nl=1e-6;function wp(t){return"translate("+t+",0)"}function _p(t){return"translate(0,"+t+")"}function Sp(t){return e=>+t(e)}function xp(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function kp(){return!this.__axis}function iu(t,e){var n=[],i=null,r=null,s=6,a=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,o=t===is||t===oi?-1:1,u=t===oi||t===rs?"x":"y",f=t===is||t===Ls?wp:_p;function h(d){var m=i??(e.ticks?e.ticks.apply(e,n):e.domain()),w=r??(e.tickFormat?e.tickFormat.apply(e,n):vp),v=Math.max(s,0)+l,p=e.range(),y=+p[0]+c,b=+p[p.length-1]+c,g=(e.bandwidth?xp:Sp)(e.copy(),c),_=d.selection?d.selection():d,M=_.selectAll(".domain").data([null]),N=_.selectAll(".tick").data(m,e).order(),I=N.exit(),P=N.enter().append("g").attr("class","tick"),$=N.select("line"),D=N.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(P),$=$.merge(P.append("line").attr("stroke","currentColor").attr(u+"2",o*s)),D=D.merge(P.append("text").attr("fill","currentColor").attr(u,o*v).attr("dy",t===is?"0em":t===Ls?"0.71em":"0.32em")),d!==_&&(M=M.transition(d),N=N.transition(d),$=$.transition(d),D=D.transition(d),I=I.transition(d).attr("opacity",Nl).attr("transform",function(B){return isFinite(B=g(B))?f(B+c):this.getAttribute("transform")}),P.attr("opacity",Nl).attr("transform",function(B){var A=this.parentNode.__axis;return f((A&&isFinite(A=A(B))?A:g(B))+c)})),I.remove(),M.attr("d",t===oi||t===rs?a?"M"+o*a+","+y+"H"+c+"V"+b+"H"+o*a:"M"+c+","+y+"V"+b:a?"M"+y+","+o*a+"V"+c+"H"+b+"V"+o*a:"M"+y+","+c+"H"+b),N.attr("opacity",1).attr("transform",function(B){return f(g(B)+c)}),$.attr(u+"2",o*s),D.attr(u,o*v).text(w),_.filter(kp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===rs?"start":t===oi?"end":"middle"),_.each(function(){this.__axis=g})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=a=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(l=+d,h):l},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function Mp(t){return iu(Ls,t)}function Cp(t){return iu(oi,t)}function It(t){return function(){return t}}const zl=Math.abs,$t=Math.atan2,Je=Math.cos,Tp=Math.max,ss=Math.min,he=Math.sin,_n=Math.sqrt,qt=1e-12,ki=Math.PI,gr=ki/2,Dp=2*ki;function Np(t){return t>1?0:t<-1?ki:Math.acos(t)}function $l(t){return t>=1?gr:t<=-1?-gr:Math.asin(t)}const As=Math.PI,Is=2*As,en=1e-6,zp=Is-en;function ru(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $p(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ru;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class Ma{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ru:$p(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=i-e,o=r-n,u=a-e,f=l-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>en)if(!(Math.abs(f*c-o*u)>en)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-a,m=r-l,w=c*c+o*o,v=d*d+m*m,p=Math.sqrt(w),y=Math.sqrt(h),b=s*Math.tan((As-Math.acos((w+h-v)/(2*p*y)))/2),g=b/y,_=b/p;Math.abs(g-1)>en&&this._append`L${e+g*u},${n+g*f}`,this._append`A${s},${s},0,0,${+(f*d>u*m)},${this._x1=e+_*c},${this._y1=n+_*o}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),o=e+l,u=n+c,f=1^a,h=a?r-s:s-r;this._x1===null?this._append`M${o},${u}`:(Math.abs(this._x1-o)>en||Math.abs(this._y1-u)>en)&&this._append`L${o},${u}`,i&&(h<0&&(h=h%Is+Is),h>zp?this._append`A${i},${i},0,1,${f},${e-l},${n-c}A${i},${i},0,1,${f},${this._x1=o},${this._y1=u}`:h>en&&this._append`A${i},${i},0,${+(h>=As)},${f},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function su(){return new Ma}su.prototype=Ma.prototype;function Ca(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Ma(e)}function Lp(t){return t.innerRadius}function Ap(t){return t.outerRadius}function Ip(t){return t.startAngle}function Ep(t){return t.endAngle}function Pp(t){return t&&t.padAngle}function Fp(t,e,n,i,r,s,a,l){var c=n-t,o=i-e,u=a-r,f=l-s,h=f*c-u*o;if(!(h*h<qt))return h=(u*(e-s)-f*(t-r))/h,[t+h*c,e+h*o]}function Bi(t,e,n,i,r,s,a){var l=t-n,c=e-i,o=(a?s:-s)/_n(l*l+c*c),u=o*c,f=-o*l,h=t+u,d=e+f,m=n+u,w=i+f,v=(h+m)/2,p=(d+w)/2,y=m-h,b=w-d,g=y*y+b*b,_=r-s,M=h*w-m*d,N=(b<0?-1:1)*_n(Tp(0,_*_*g-M*M)),I=(M*b-y*N)/g,P=(-M*y-b*N)/g,$=(M*b+y*N)/g,D=(-M*y+b*N)/g,B=I-v,A=P-p,x=$-v,E=D-p;return B*B+A*A>x*x+E*E&&(I=$,P=D),{cx:I,cy:P,x01:-u,y01:-f,x11:I*(r/_-1),y11:P*(r/_-1)}}function Vp(){var t=Lp,e=Ap,n=It(0),i=null,r=Ip,s=Ep,a=Pp,l=null,c=Ca(o);function o(){var u,f,h=+t.apply(this,arguments),d=+e.apply(this,arguments),m=r.apply(this,arguments)-gr,w=s.apply(this,arguments)-gr,v=zl(w-m),p=w>m;if(l||(l=u=c()),d<h&&(f=d,d=h,h=f),!(d>qt))l.moveTo(0,0);else if(v>Dp-qt)l.moveTo(d*Je(m),d*he(m)),l.arc(0,0,d,m,w,!p),h>qt&&(l.moveTo(h*Je(w),h*he(w)),l.arc(0,0,h,w,m,p));else{var y=m,b=w,g=m,_=w,M=v,N=v,I=a.apply(this,arguments)/2,P=I>qt&&(i?+i.apply(this,arguments):_n(h*h+d*d)),$=ss(zl(d-h)/2,+n.apply(this,arguments)),D=$,B=$,A,x;if(P>qt){var E=$l(P/h*he(I)),z=$l(P/d*he(I));(M-=E*2)>qt?(E*=p?1:-1,g+=E,_-=E):(M=0,g=_=(m+w)/2),(N-=z*2)>qt?(z*=p?1:-1,y+=z,b-=z):(N=0,y=b=(m+w)/2)}var F=d*Je(y),G=d*he(y),O=h*Je(_),K=h*he(_);if($>qt){var W=d*Je(b),Z=d*he(b),pt=h*Je(g),R=h*he(g),X;if(v<ki)if(X=Fp(F,G,pt,R,W,Z,O,K)){var V=F-X[0],q=G-X[1],Q=W-X[0],Y=Z-X[1],j=1/he(Np((V*Q+q*Y)/(_n(V*V+q*q)*_n(Q*Q+Y*Y)))/2),st=_n(X[0]*X[0]+X[1]*X[1]);D=ss($,(h-st)/(j-1)),B=ss($,(d-st)/(j+1))}else D=B=0}N>qt?B>qt?(A=Bi(pt,R,F,G,d,B,p),x=Bi(W,Z,O,K,d,B,p),l.moveTo(A.cx+A.x01,A.cy+A.y01),B<$?l.arc(A.cx,A.cy,B,$t(A.y01,A.x01),$t(x.y01,x.x01),!p):(l.arc(A.cx,A.cy,B,$t(A.y01,A.x01),$t(A.y11,A.x11),!p),l.arc(0,0,d,$t(A.cy+A.y11,A.cx+A.x11),$t(x.cy+x.y11,x.cx+x.x11),!p),l.arc(x.cx,x.cy,B,$t(x.y11,x.x11),$t(x.y01,x.x01),!p))):(l.moveTo(F,G),l.arc(0,0,d,y,b,!p)):l.moveTo(F,G),!(h>qt)||!(M>qt)?l.lineTo(O,K):D>qt?(A=Bi(O,K,W,Z,h,-D,p),x=Bi(F,G,pt,R,h,-D,p),l.lineTo(A.cx+A.x01,A.cy+A.y01),D<$?l.arc(A.cx,A.cy,D,$t(A.y01,A.x01),$t(x.y01,x.x01),!p):(l.arc(A.cx,A.cy,D,$t(A.y01,A.x01),$t(A.y11,A.x11),!p),l.arc(0,0,h,$t(A.cy+A.y11,A.cx+A.x11),$t(x.cy+x.y11,x.cx+x.x11),p),l.arc(x.cx,x.cy,D,$t(x.y11,x.x11),$t(x.y01,x.x01),!p))):l.arc(0,0,h,_,g,p)}if(l.closePath(),u)return l=null,u+""||null}return o.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-ki/2;return[Je(f)*u,he(f)*u]},o.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:It(+u),o):t},o.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:It(+u),o):e},o.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:It(+u),o):n},o.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:It(+u),o):i},o.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:It(+u),o):r},o.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:It(+u),o):s},o.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:It(+u),o):a},o.context=function(u){return arguments.length?(l=u??null,o):l},o}var Up=Array.prototype.slice;function Rp(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function au(t){this._context=t}au.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Bp(t){return new au(t)}function lu(t){return t[0]}function ou(t){return t[1]}function Op(t,e){var n=It(!0),i=null,r=Bp,s=null,a=Ca(l);t=typeof t=="function"?t:t===void 0?lu:It(t),e=typeof e=="function"?e:e===void 0?ou:It(e);function l(c){var o,u=(c=Rp(c)).length,f,h=!1,d;for(i==null&&(s=r(d=a())),o=0;o<=u;++o)!(o<u&&n(f=c[o],o,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,o,c),+e(f,o,c));if(d)return s=null,d+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:It(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:It(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:It(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(s=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=s=null:s=r(i=c),l):i},l}class cu{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qp(t){return new cu(t,!0)}function Hp(t){return new cu(t,!1)}function Yp(t){return t.source}function Gp(t){return t.target}function uu(t){let e=Yp,n=Gp,i=lu,r=ou,s=null,a=null,l=Ca(c);function c(){let o;const u=Up.call(arguments),f=e.apply(this,u),h=n.apply(this,u);if(s==null&&(a=t(o=l())),a.lineStart(),u[0]=f,a.point(+i.apply(this,u),+r.apply(this,u)),u[0]=h,a.point(+i.apply(this,u),+r.apply(this,u)),a.lineEnd(),o)return a=null,o+""||null}return c.source=function(o){return arguments.length?(e=o,c):e},c.target=function(o){return arguments.length?(n=o,c):n},c.x=function(o){return arguments.length?(i=typeof o=="function"?o:It(+o),c):i},c.y=function(o){return arguments.length?(r=typeof o=="function"?o:It(+o),c):r},c.context=function(o){return arguments.length?(o==null?s=a=null:a=t(s=o),c):s},c}function Kp(){return uu(qp)}function Xp(){return uu(Hp)}function Ll(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hu(t){this._context=t}hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ll(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ll(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wp(t){return new hu(t)}function Al(t){return t<0?-1:1}function Il(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(s*r+a*i)/(i+r);return(Al(s)+Al(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function El(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function as(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,r+l*e,s-l,a-l*n,s,a)}function pr(t){this._context=t}pr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:as(this,this._t0,El(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,as(this,El(this,n=Il(this,t,e)),n);break;default:as(this,this._t0,n=Il(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function fu(t){this._context=new du(t)}(fu.prototype=Object.create(pr.prototype)).point=function(t,e){pr.prototype.point.call(this,e,t)};function du(t){this._context=t}du.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function Zp(t){return new pr(t)}function jp(t){return new fu(t)}function gu(t,e){this._context=t,this._t=e}gu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Jp(t){return new gu(t,1)}function Qp(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function tm(){return this.eachAfter(Qp)}function em(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function nm(t,e){for(var n=this,i=[n],r,s,a=-1;n=i.pop();)if(t.call(e,n,++a,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function im(t,e){for(var n=this,i=[n],r=[],s,a,l,c=-1;n=i.pop();)if(r.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)i.push(s[a]);for(;n=r.pop();)t.call(e,n,++c,this);return this}function rm(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function sm(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function am(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function lm(t){for(var e=this,n=om(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function om(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function cm(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function um(){return Array.from(this)}function hm(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function fm(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*dm(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function Ta(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=mm)):e===void 0&&(e=pm);for(var n=new Mi(t),i,r=[n],s,a,l,c;i=r.pop();)if((a=e(i.data))&&(c=(a=Array.from(a)).length))for(i.children=a,l=c-1;l>=0;--l)r.push(s=a[l]=new Mi(a[l])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(bm)}function gm(){return Ta(this).eachBefore(ym)}function pm(t){return t.children}function mm(t){return Array.isArray(t)?t[1]:null}function ym(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function bm(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Mi(t){this.data=t,this.depth=this.height=0,this.parent=null}Mi.prototype=Ta.prototype={constructor:Mi,count:tm,each:em,eachAfter:im,eachBefore:nm,find:rm,sum:sm,sort:am,path:lm,ancestors:cm,descendants:um,leaves:hm,links:fm,copy:gm,[Symbol.iterator]:dm};function vm(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function wm(t,e,n,i,r){for(var s=t.children,a,l=-1,c=s.length,o=t.value&&(i-e)/t.value;++l<c;)a=s[l],a.y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*o}function _m(){var t=1,e=1,n=0,i=!1;function r(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/l,a.eachBefore(s(e,l)),i&&a.eachBefore(vm),a}function s(a,l){return function(c){c.children&&wm(c,c.x0,a*(c.depth+1)/l,c.x1,a*(c.depth+2)/l);var o=c.x0,u=c.y0,f=c.x1-n,h=c.y1-n;f<o&&(o=f=(o+f)/2),h<u&&(u=h=(u+h)/2),c.x0=o,c.y0=u,c.x1=f,c.y1=h}}return r.round=function(a){return arguments.length?(i=!!a,r):i},r.size=function(a){return arguments.length?(t=+a[0],e=+a[1],r):[t,e]},r.padding=function(a){return arguments.length?(n=+a,r):n},r}function Sm(t,e){return t.parent===e.parent?1:2}function ls(t){var e=t.children;return e?e[0]:t.t}function os(t){var e=t.children;return e?e[e.length-1]:t.t}function xm(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function km(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Mm(t,e,n){return t.a.parent===e.parent?t.a:n}function ji(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}ji.prototype=Object.create(Mi.prototype);function Cm(t){for(var e=new ji(t,0),n,i=[e],r,s,a,l;n=i.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)i.push(r=n.children[a]=new ji(s[a],a)),r.parent=n;return(e.parent=new ji(null,0)).children=[e],e}function Tm(){var t=Sm,e=1,n=1,i=null;function r(o){var u=Cm(o);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(a),i)o.eachBefore(c);else{var f=o,h=o,d=o;o.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var m=f===h?1:t(f,h)/2,w=m-f.x,v=e/(h.x+m+w),p=n/(d.depth||1);o.eachBefore(function(y){y.x=(y.x+w)*v,y.y=y.depth*p})}return o}function s(o){var u=o.children,f=o.parent.children,h=o.i?f[o.i-1]:null;if(u){km(o);var d=(u[0].z+u[u.length-1].z)/2;h?(o.z=h.z+t(o._,h._),o.m=o.z-d):o.z=d}else h&&(o.z=h.z+t(o._,h._));o.parent.A=l(o,h,o.parent.A||f[0])}function a(o){o._.x=o.z+o.parent.m,o.m+=o.parent.m}function l(o,u,f){if(u){for(var h=o,d=o,m=u,w=h.parent.children[0],v=h.m,p=d.m,y=m.m,b=w.m,g;m=os(m),h=ls(h),m&&h;)w=ls(w),d=os(d),d.a=o,g=m.z+y-h.z-v+t(m._,h._),g>0&&(xm(Mm(m,o,f),o,g),v+=g,p+=g),y+=m.m,v+=h.m,b+=w.m,p+=d.m;m&&!os(d)&&(d.t=m,d.m+=y-p),h&&!ls(w)&&(w.t=h,w.m+=v-b,f=o)}return f}function c(o){o.x*=e,o.y=o.depth*n}return r.separation=function(o){return arguments.length?(t=o,r):t},r.size=function(o){return arguments.length?(i=!1,e=+o[0],n=+o[1],r):i?null:[e,n]},r.nodeSize=function(o){return arguments.length?(i=!0,e=+o[0],n=+o[1],r):i?[e,n]:null},r}const Dm={passive:!1},Ci={capture:!0,passive:!1};function cs(t){t.stopImmediatePropagation()}function Dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Da(t){var e=t.document.documentElement,n=Vt(t).on("dragstart.drag",Dn,Ci);"onselectstart"in e?n.on("selectstart.drag",Dn,Ci):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Na(t,e){var n=t.document.documentElement,i=Vt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Dn,Ci),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Oi=t=>()=>t;function Es(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:s,x:a,y:l,dx:c,dy:o,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:o,enumerable:!0,configurable:!0},_:{value:u}})}Es.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Nm(t){return!t.ctrlKey&&!t.button}function zm(){return this.parentNode}function $m(t,e){return e??{x:t.x,y:t.y}}function Lm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Am(){var t=Nm,e=zm,n=$m,i=Lm,r={},s=Ai("start","drag","end"),a=0,l,c,o,u,f=0;function h(g){g.on("mousedown.drag",d).filter(i).on("touchstart.drag",v).on("touchmove.drag",p,Dm).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(g,_){if(!(u||!t.call(this,g,_))){var M=b(this,e.call(this,g,_),g,_,"mouse");M&&(Vt(g.view).on("mousemove.drag",m,Ci).on("mouseup.drag",w,Ci),Da(g.view),cs(g),o=!1,l=g.clientX,c=g.clientY,M("start",g))}}function m(g){if(Dn(g),!o){var _=g.clientX-l,M=g.clientY-c;o=_*_+M*M>f}r.mouse("drag",g)}function w(g){Vt(g.view).on("mousemove.drag mouseup.drag",null),Na(g.view,o),Dn(g),r.mouse("end",g)}function v(g,_){if(t.call(this,g,_)){var M=g.changedTouches,N=e.call(this,g,_),I=M.length,P,$;for(P=0;P<I;++P)($=b(this,N,g,_,M[P].identifier,M[P]))&&(cs(g),$("start",g,M[P]))}}function p(g){var _=g.changedTouches,M=_.length,N,I;for(N=0;N<M;++N)(I=r[_[N].identifier])&&(Dn(g),I("drag",g,_[N]))}function y(g){var _=g.changedTouches,M=_.length,N,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<M;++N)(I=r[_[N].identifier])&&(cs(g),I("end",g,_[N]))}function b(g,_,M,N,I,P){var $=s.copy(),D=ee(P||M,_),B,A,x;if((x=n.call(g,new Es("beforestart",{sourceEvent:M,target:h,identifier:I,active:a,x:D[0],y:D[1],dx:0,dy:0,dispatch:$}),N))!=null)return B=x.x-D[0]||0,A=x.y-D[1]||0,function E(z,F,G){var O=D,K;switch(z){case"start":r[I]=E,K=a++;break;case"end":delete r[I],--a;case"drag":D=ee(G||F,_),K=a;break}$.call(z,g,new Es(z,{sourceEvent:F,subject:x,target:h,identifier:I,active:K,x:D[0]+B,y:D[1]+A,dx:D[0]-O[0],dy:D[1]-O[1],dispatch:$}),N)}}return h.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Oi(!!g),h):t},h.container=function(g){return arguments.length?(e=typeof g=="function"?g:Oi(g),h):e},h.subject=function(g){return arguments.length?(n=typeof g=="function"?g:Oi(g),h):n},h.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:Oi(!!g),h):i},h.on=function(){var g=s.on.apply(s,arguments);return g===s?h:g},h.clickDistance=function(g){return arguments.length?(f=(g=+g)*g,h):Math.sqrt(f)},h}const us=t=>()=>t;function Im(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Em(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}var Pl={name:"drag"},fs={name:"space"},yn={name:"handle"},bn={name:"center"};const{abs:Fl,max:Lt,min:At}=Math;function Vl(t){return[+t[0],+t[1]]}function Ps(t){return[Vl(t[0]),Vl(t[1])]}var Ji={name:"x",handles:["w","e"].map(Ti),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ds={name:"y",handles:["n","s"].map(Ti),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Pm={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ti),input:function(t){return t==null?null:Ps(t)},output:function(t){return t}},Te={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Rl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Vm={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ti(t){return{type:t}}function Um(t){return!t.ctrlKey&&!t.button}function Rm(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Bm(){return navigator.maxTouchPoints||"ontouchstart"in this}function gs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Om(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function qm(){return pu(Ji)}function Hm(){return pu(Pm)}function pu(t){var e=Rm,n=Um,i=Bm,r=!0,s=Ai("start","brush","end"),a=6,l;function c(v){var p=v.property("__brush",w).selectAll(".overlay").data([Ti("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Te.overlay).merge(p).each(function(){var b=gs(this).extent;Vt(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([Ti("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Te.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=v.selectAll(".handle").data(t.handles,function(b){return b.type});y.exit().remove(),y.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Te[b.type]}),v.each(o).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(v,p,y){v.tween?v.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,g=b.__brush,_=u(b,arguments),M=g.selection,N=t.input(typeof p=="function"?p.apply(this,arguments):p,g.extent),I=Yn(M,N);function P($){g.selection=$===1&&N===null?null:I($),o.call(b),_.brush()}return M!==null&&N!==null?P:P(1)}):v.each(function(){var b=this,g=arguments,_=b.__brush,M=t.input(typeof p=="function"?p.apply(b,g):p,_.extent),N=u(b,g).beforestart();Tn(b),_.selection=M===null?null:M,o.call(b),N.start(y).brush(y).end(y)})},c.clear=function(v,p){c.move(v,null,p)};function o(){var v=Vt(this),p=gs(this).selection;p?(v.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?p[1][0]-a/2:p[0][0]-a/2}).attr("y",function(y){return y.type[0]==="s"?p[1][1]-a/2:p[0][1]-a/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?p[1][0]-p[0][0]+a:a}).attr("height",function(y){return y.type==="e"||y.type==="w"?p[1][1]-p[0][1]+a:a})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,p,y){var b=v.__brush.emitter;return b&&(!y||!b.clean)?b:new f(v,p,y)}function f(v,p,y){this.that=v,this.args=p,this.state=v.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,p){return this.starting?(this.starting=!1,this.emit("start",v,p)):this.emit("brush",v),this},brush:function(v,p){return this.emit("brush",v,p),this},end:function(v,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,p)),this},emit:function(v,p,y){var b=Vt(this.that).datum();s.call(v,this.that,new Im(v,{sourceEvent:p,target:c,selection:t.output(this.state.selection),mode:y,dispatch:s}),b)}};function h(v){if(l&&!v.touches||!n.apply(this,arguments))return;var p=this,y=v.target.__data__.type,b=(r&&v.metaKey?y="overlay":y)==="selection"?Pl:r&&v.altKey?bn:yn,g=t===ds?null:Fm[y],_=t===Ji?null:Vm[y],M=gs(p),N=M.extent,I=M.selection,P=N[0][0],$,D,B=N[0][1],A,x,E=N[1][0],z,F,G=N[1][1],O,K,W=0,Z=0,pt,R=g&&_&&r&&v.shiftKey,X,V,q=Array.from(v.touches||[v],J=>{const gt=J.identifier;return J=ee(J,p),J.point0=J.slice(),J.identifier=gt,J});Tn(p);var Q=u(p,arguments,!0).beforestart();if(y==="overlay"){I&&(pt=!0);const J=[q[0],q[1]||q[0]];M.selection=I=[[$=t===ds?P:At(J[0][0],J[1][0]),A=t===Ji?B:At(J[0][1],J[1][1])],[z=t===ds?E:Lt(J[0][0],J[1][0]),O=t===Ji?G:Lt(J[0][1],J[1][1])]],q.length>1&&ft(v)}else $=I[0][0],A=I[0][1],z=I[1][0],O=I[1][1];D=$,x=A,F=z,K=O;var Y=Vt(p).attr("pointer-events","none"),j=Y.selectAll(".overlay").attr("cursor",Te[y]);if(v.touches)Q.moved=U,Q.ended=nt;else{var st=Vt(v.view).on("mousemove.brush",U,!0).on("mouseup.brush",nt,!0);r&&st.on("keydown.brush",ht,!0).on("keyup.brush",yt,!0),Da(v.view)}o.call(p),Q.start(v,b.name);function U(J){for(const gt of J.changedTouches||[J])for(const jt of q)jt.identifier===gt.identifier&&(jt.cur=ee(gt,p));if(R&&!X&&!V&&q.length===1){const gt=q[0];Fl(gt.cur[0]-gt[0])>Fl(gt.cur[1]-gt[1])?V=!0:X=!0}for(const gt of q)gt.cur&&(gt[0]=gt.cur[0],gt[1]=gt.cur[1]);pt=!0,hs(J),ft(J)}function ft(J){const gt=q[0],jt=gt.point0;var zt;switch(W=gt[0]-jt[0],Z=gt[1]-jt[1],b){case fs:case Pl:{g&&(W=Lt(P-$,At(E-z,W)),D=$+W,F=z+W),_&&(Z=Lt(B-A,At(G-O,Z)),x=A+Z,K=O+Z);break}case yn:{q[1]?(g&&(D=Lt(P,At(E,q[0][0])),F=Lt(P,At(E,q[1][0])),g=1),_&&(x=Lt(B,At(G,q[0][1])),K=Lt(B,At(G,q[1][1])),_=1)):(g<0?(W=Lt(P-$,At(E-$,W)),D=$+W,F=z):g>0&&(W=Lt(P-z,At(E-z,W)),D=$,F=z+W),_<0?(Z=Lt(B-A,At(G-A,Z)),x=A+Z,K=O):_>0&&(Z=Lt(B-O,At(G-O,Z)),x=A,K=O+Z));break}case bn:{g&&(D=Lt(P,At(E,$-W*g)),F=Lt(P,At(E,z+W*g))),_&&(x=Lt(B,At(G,A-Z*_)),K=Lt(B,At(G,O+Z*_)));break}}F<D&&(g*=-1,zt=$,$=z,z=zt,zt=D,D=F,F=zt,y in Ul&&j.attr("cursor",Te[y=Ul[y]])),K<x&&(_*=-1,zt=A,A=O,O=zt,zt=x,x=K,K=zt,y in Rl&&j.attr("cursor",Te[y=Rl[y]])),M.selection&&(I=M.selection),X&&(D=I[0][0],F=I[1][0]),V&&(x=I[0][1],K=I[1][1]),(I[0][0]!==D||I[0][1]!==x||I[1][0]!==F||I[1][1]!==K)&&(M.selection=[[D,x],[F,K]],o.call(p),Q.brush(J,b.name))}function nt(J){if(Em(J),J.touches){if(J.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Na(J.view,pt),st.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Y.attr("pointer-events","all"),j.attr("cursor",Te.overlay),M.selection&&(I=M.selection),Om(I)&&(M.selection=null,o.call(p)),Q.end(J,b.name)}function ht(J){switch(J.keyCode){case 16:{R=g&&_;break}case 18:{b===yn&&(g&&(z=F-W*g,$=D+W*g),_&&(O=K-Z*_,A=x+Z*_),b=bn,ft(J));break}case 32:{(b===yn||b===bn)&&(g<0?z=F-W:g>0&&($=D-W),_<0?O=K-Z:_>0&&(A=x-Z),b=fs,j.attr("cursor",Te.selection),ft(J));break}default:return}hs(J)}function yt(J){switch(J.keyCode){case 16:{R&&(X=V=R=!1,ft(J));break}case 18:{b===bn&&(g<0?z=F:g>0&&($=D),_<0?O=K:_>0&&(A=x),b=yn,ft(J));break}case 32:{b===fs&&(J.altKey?(g&&(z=F-W*g,$=D+W*g),_&&(O=K-Z*_,A=x+Z*_),b=bn):(g<0?z=F:g>0&&($=D),_<0?O=K:_>0&&(A=x),b=yn),j.attr("cursor",Te[y]),ft(J));break}default:return}hs(J)}}function d(v){u(this,arguments).moved(v)}function m(v){u(this,arguments).ended(v)}function w(){var v=this.__brush||{selection:null};return v.extent=Ps(e.apply(this,arguments)),v.dim=t,v}return c.extent=function(v){return arguments.length?(e=typeof v=="function"?v:us(Ps(v)),c):e},c.filter=function(v){return arguments.length?(n=typeof v=="function"?v:us(!!v),c):n},c.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:us(!!v),c):i},c.handleSize=function(v){return arguments.length?(a=+v,c):a},c.keyModifiers=function(v){return arguments.length?(r=!!v,c):r},c.on=function(){var v=s.on.apply(s,arguments);return v===s?c:v},c}const qi=t=>()=>t;function Ym(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Le(t,e,n){this.k=t,this.x=e,this.y=n}Le.prototype={constructor:Le,scale:function(t){return t===1?this:new Le(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Le(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var za=new Le(1,0,0);Le.prototype;function ps(t){t.stopImmediatePropagation()}function ni(t){t.preventDefault(),t.stopImmediatePropagation()}function Gm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Km(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Bl(){return this.__zoom||za}function Xm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Wm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zm(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function jm(){var t=Gm,e=Km,n=Zm,i=Xm,r=Wm,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=K0,o=Ai("start","zoom","end"),u,f,h,d=500,m=150,w=0,v=10;function p(x){x.property("__zoom",Bl).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",$).filter(r).on("touchstart.zoom",D).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(x,E,z,F){var G=x.selection?x.selection():x;G.property("__zoom",Bl),x!==G?_(x,E,z,F):G.interrupt().each(function(){M(this,arguments).event(F).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},p.scaleBy=function(x,E,z,F){p.scaleTo(x,function(){var G=this.__zoom.k,O=typeof E=="function"?E.apply(this,arguments):E;return G*O},z,F)},p.scaleTo=function(x,E,z,F){p.transform(x,function(){var G=e.apply(this,arguments),O=this.__zoom,K=z==null?g(G):typeof z=="function"?z.apply(this,arguments):z,W=O.invert(K),Z=typeof E=="function"?E.apply(this,arguments):E;return n(b(y(O,Z),K,W),G,a)},z,F)},p.translateBy=function(x,E,z,F){p.transform(x,function(){return n(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),a)},null,F)},p.translateTo=function(x,E,z,F,G){p.transform(x,function(){var O=e.apply(this,arguments),K=this.__zoom,W=F==null?g(O):typeof F=="function"?F.apply(this,arguments):F;return n(za.translate(W[0],W[1]).scale(K.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof z=="function"?-z.apply(this,arguments):-z),O,a)},F,G)};function y(x,E){return E=Math.max(s[0],Math.min(s[1],E)),E===x.k?x:new Le(E,x.x,x.y)}function b(x,E,z){var F=E[0]-z[0]*x.k,G=E[1]-z[1]*x.k;return F===x.x&&G===x.y?x:new Le(x.k,F,G)}function g(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function _(x,E,z,F){x.on("start.zoom",function(){M(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(F).end()}).tween("zoom",function(){var G=this,O=arguments,K=M(G,O).event(F),W=e.apply(G,O),Z=z==null?g(W):typeof z=="function"?z.apply(G,O):z,pt=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),R=G.__zoom,X=typeof E=="function"?E.apply(G,O):E,V=c(R.invert(Z).concat(pt/R.k),X.invert(Z).concat(pt/X.k));return function(q){if(q===1)q=X;else{var Q=V(q),Y=pt/Q[2];q=new Le(Y,Z[0]-Q[0]*Y,Z[1]-Q[1]*Y)}K.zoom(null,q)}})}function M(x,E,z){return!z&&x.__zooming||new N(x,E)}function N(x,E){this.that=x,this.args=E,this.active=0,this.sourceEvent=null,this.extent=e.apply(x,E),this.taps=0}N.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,E){return this.mouse&&x!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var E=Vt(this.that).datum();o.call(x,this.that,new Ym(x,{sourceEvent:this.sourceEvent,target:p,type:x,transform:this.that.__zoom,dispatch:o}),E)}};function I(x,...E){if(!t.apply(this,arguments))return;var z=M(this,E).event(x),F=this.__zoom,G=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,i.apply(this,arguments)))),O=ee(x);if(z.wheel)(z.mouse[0][0]!==O[0]||z.mouse[0][1]!==O[1])&&(z.mouse[1]=F.invert(z.mouse[0]=O)),clearTimeout(z.wheel);else{if(F.k===G)return;z.mouse=[O,F.invert(O)],Tn(this),z.start()}ni(x),z.wheel=setTimeout(K,m),z.zoom("mouse",n(b(y(F,G),z.mouse[0],z.mouse[1]),z.extent,a));function K(){z.wheel=null,z.end()}}function P(x,...E){if(h||!t.apply(this,arguments))return;var z=x.currentTarget,F=M(this,E,!0).event(x),G=Vt(x.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",pt,!0),O=ee(x,z),K=x.clientX,W=x.clientY;Da(x.view),ps(x),F.mouse=[O,this.__zoom.invert(O)],Tn(this),F.start();function Z(R){if(ni(R),!F.moved){var X=R.clientX-K,V=R.clientY-W;F.moved=X*X+V*V>w}F.event(R).zoom("mouse",n(b(F.that.__zoom,F.mouse[0]=ee(R,z),F.mouse[1]),F.extent,a))}function pt(R){G.on("mousemove.zoom mouseup.zoom",null),Na(R.view,F.moved),ni(R),F.event(R).end()}}function $(x,...E){if(t.apply(this,arguments)){var z=this.__zoom,F=ee(x.changedTouches?x.changedTouches[0]:x,this),G=z.invert(F),O=z.k*(x.shiftKey?.5:2),K=n(b(y(z,O),F,G),e.apply(this,E),a);ni(x),l>0?Vt(this).transition().duration(l).call(_,K,F,x):Vt(this).call(p.transform,K,F,x)}}function D(x,...E){if(t.apply(this,arguments)){var z=x.touches,F=z.length,G=M(this,E,x.changedTouches.length===F).event(x),O,K,W,Z;for(ps(x),K=0;K<F;++K)W=z[K],Z=ee(W,this),Z=[Z,this.__zoom.invert(Z),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==Z[2]&&(G.touch1=Z,G.taps=0):(G.touch0=Z,O=!0,G.taps=1+!!u);u&&(u=clearTimeout(u)),O&&(G.taps<2&&(f=Z[0],u=setTimeout(function(){u=null},d)),Tn(this),G.start())}}function B(x,...E){if(this.__zooming){var z=M(this,E).event(x),F=x.changedTouches,G=F.length,O,K,W,Z;for(ni(x),O=0;O<G;++O)K=F[O],W=ee(K,this),z.touch0&&z.touch0[2]===K.identifier?z.touch0[0]=W:z.touch1&&z.touch1[2]===K.identifier&&(z.touch1[0]=W);if(K=z.that.__zoom,z.touch1){var pt=z.touch0[0],R=z.touch0[1],X=z.touch1[0],V=z.touch1[1],q=(q=X[0]-pt[0])*q+(q=X[1]-pt[1])*q,Q=(Q=V[0]-R[0])*Q+(Q=V[1]-R[1])*Q;K=y(K,Math.sqrt(q/Q)),W=[(pt[0]+X[0])/2,(pt[1]+X[1])/2],Z=[(R[0]+V[0])/2,(R[1]+V[1])/2]}else if(z.touch0)W=z.touch0[0],Z=z.touch0[1];else return;z.zoom("touch",n(b(K,W,Z),z.extent,a))}}function A(x,...E){if(this.__zooming){var z=M(this,E).event(x),F=x.changedTouches,G=F.length,O,K;for(ps(x),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),O=0;O<G;++O)K=F[O],z.touch0&&z.touch0[2]===K.identifier?delete z.touch0:z.touch1&&z.touch1[2]===K.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(K=ee(K,this),Math.hypot(f[0]-K[0],f[1]-K[1])<v)){var W=Vt(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return p.wheelDelta=function(x){return arguments.length?(i=typeof x=="function"?x:qi(+x),p):i},p.filter=function(x){return arguments.length?(t=typeof x=="function"?x:qi(!!x),p):t},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:qi(!!x),p):r},p.extent=function(x){return arguments.length?(e=typeof x=="function"?x:qi([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),p):e},p.scaleExtent=function(x){return arguments.length?(s[0]=+x[0],s[1]=+x[1],p):[s[0],s[1]]},p.translateExtent=function(x){return arguments.length?(a[0][0]=+x[0][0],a[1][0]=+x[1][0],a[0][1]=+x[0][1],a[1][1]=+x[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(x){return arguments.length?(n=x,p):n},p.duration=function(x){return arguments.length?(l=+x,p):l},p.interpolate=function(x){return arguments.length?(c=x,p):c},p.on=function(){var x=o.on.apply(o,arguments);return x===o?p:x},p.clickDistance=function(x){return arguments.length?(w=(x=+x)*x,p):Math.sqrt(w)},p.tapDistance=function(x){return arguments.length?(v=+x,p):v},p}const $a=Math.random,Jm=function t(e){function n(i,r){return i=i==null?0:+i,r=r==null?1:+r,arguments.length===1?(r=i,i=0):r-=i,function(){return e()*r+i}}return n.source=t,n}($a),Qm=function t(e){function n(i,r){return arguments.length<2&&(r=i,i=0),i=Math.floor(i),r=Math.floor(r)-i,function(){return Math.floor(e()*r+i)}}return n.source=t,n}($a),t2=function t(e){function n(i,r){var s,a;return i=i==null?0:+i,r=r==null?1:+r,function(){var l;if(s!=null)l=s,s=null;else do s=e()*2-1,l=e()*2-1,a=s*s+l*l;while(!a||a>1);return i+r*l*Math.sqrt(-2*Math.log(a)/a)}}return n.source=t,n}($a);var e2=Array.prototype,n2=e2.slice;function i2(t,e){return t-e}function r2(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}const Ol=t=>()=>t;function s2(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=a2(t,e[n]))return r;return 0}function a2(t,e){for(var n=e[0],i=e[1],r=-1,s=0,a=t.length,l=a-1;s<a;l=s++){var c=t[s],o=c[0],u=c[1],f=t[l],h=f[0],d=f[1];if(l2(c,f,e))return 0;u>i!=d>i&&n<(h-o)*(i-u)/(d-u)+o&&(r=-r)}return r}function l2(t,e,n){var i;return o2(t,e,n)&&c2(t[i=+(t[0]===e[0])],n[i],e[i])}function o2(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function c2(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function u2(){}var De=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function h2(){var t=1,e=1,n=hc,i=c;function r(o){var u=n(o);if(Array.isArray(u))u=u.slice().sort(i2);else{const f=gi(o,f2);for(u=bi(...uc(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(o,f))}function s(o,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return a(o,f,function(m){i(m,o,f),r2(m)>0?h.push([m]):d.push(m)}),d.forEach(function(m){for(var w=0,v=h.length,p;w<v;++w)if(s2((p=h[w])[0],m)!==-1){p.push(m);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function a(o,u,f){var h=new Array,d=new Array,m,w,v,p,y,b;for(m=w=-1,p=Qe(o[0],u),De[p<<1].forEach(g);++m<t-1;)v=p,p=Qe(o[m+1],u),De[v|p<<1].forEach(g);for(De[p<<0].forEach(g);++w<e-1;){for(m=-1,p=Qe(o[w*t+t],u),y=Qe(o[w*t],u),De[p<<1|y<<2].forEach(g);++m<t-1;)v=p,p=Qe(o[w*t+t+m+1],u),b=y,y=Qe(o[w*t+m+1],u),De[v|p<<1|y<<2|b<<3].forEach(g);De[p|y<<3].forEach(g)}for(m=-1,y=o[w*t]>=u,De[y<<2].forEach(g);++m<t-1;)b=y,y=Qe(o[w*t+m+1],u),De[y<<2|b<<3].forEach(g);De[y<<3].forEach(g);function g(_){var M=[_[0][0]+m,_[0][1]+w],N=[_[1][0]+m,_[1][1]+w],I=l(M),P=l(N),$,D;($=d[I])?(D=h[P])?(delete d[$.end],delete h[D.start],$===D?($.ring.push(N),f($.ring)):h[$.start]=d[D.end]={start:$.start,end:D.end,ring:$.ring.concat(D.ring)}):(delete d[$.end],$.ring.push(N),d[$.end=P]=$):($=h[P])?(D=d[I])?(delete h[$.start],delete d[D.end],$===D?($.ring.push(N),f($.ring)):h[D.start]=d[$.end]={start:D.start,end:$.end,ring:D.ring.concat($.ring)}):(delete h[$.start],$.ring.unshift(M),h[$.start=I]=$):h[I]=d[P]={start:I,end:P,ring:[M,N]}}}function l(o){return o[0]*2+o[1]*(t+1)*4}function c(o,u,f){o.forEach(function(h){var d=h[0],m=h[1],w=d|0,v=m|0,p=ms(u[v*t+w]);d>0&&d<t&&w===d&&(h[0]=ql(d,ms(u[v*t+w-1]),p,f)),m>0&&m<e&&v===m&&(h[1]=ql(m,ms(u[(v-1)*t+w]),p,f))})}return r.contour=s,r.size=function(o){if(!arguments.length)return[t,e];var u=Math.floor(o[0]),f=Math.floor(o[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return t=u,e=f,r},r.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Array.isArray(o)?Ol(n2.call(o)):Ol(o),r):n},r.smooth=function(o){return arguments.length?(i=o?c:u2,r):i===c},r}function f2(t){return isFinite(t)?t:NaN}function Qe(t,e){return t==null?!1:+t>=e}function ms(t){return t==null||isNaN(t=+t)?-1/0:t}function ql(t,e,n,i){const r=i-e,s=n-e,a=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(a)?t:t+a-.5}var d2=Math.PI,g2=d2*2,p2=Math.abs,La=Math.sqrt;function ae(){}function mr(t,e){t&&Yl.hasOwnProperty(t.type)&&Yl[t.type](t,e)}var Hl={Feature:function(t,e){mr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)mr(n[i].geometry,e)}},Yl={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Fs(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Fs(n[i],e,0)},Polygon:function(t,e){Gl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Gl(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)mr(n[i],e)}};function Fs(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function Gl(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Fs(t[n],e,1);e.polygonEnd()}function ii(t,e){t&&Hl.hasOwnProperty(t.type)?Hl[t.type](t,e):mr(t,e)}const m2=t=>t;var ys=new Ln,Vs=new Ln,mu,yu,Us,Rs,Oe={point:ae,lineStart:ae,lineEnd:ae,polygonStart:function(){Oe.lineStart=y2,Oe.lineEnd=v2},polygonEnd:function(){Oe.lineStart=Oe.lineEnd=Oe.point=ae,ys.add(p2(Vs)),Vs=new Ln},result:function(){var t=ys/2;return ys=new Ln,t}};function y2(){Oe.point=b2}function b2(t,e){Oe.point=bu,mu=Us=t,yu=Rs=e}function bu(t,e){Vs.add(Rs*t-Us*e),Us=t,Rs=e}function v2(){bu(mu,yu)}const Kl=Oe;var Rn=1/0,yr=Rn,Di=-Rn,br=Di,w2={point:_2,lineStart:ae,lineEnd:ae,polygonStart:ae,polygonEnd:ae,result:function(){var t=[[Rn,yr],[Di,br]];return Di=br=-(yr=Rn=1/0),t}};function _2(t,e){t<Rn&&(Rn=t),t>Di&&(Di=t),e<yr&&(yr=e),e>br&&(br=e)}const Xl=w2;var Bs=0,Os=0,ci=0,vr=0,wr=0,Sn=0,qs=0,Hs=0,ui=0,vu,wu,de,ge,re={point:on,lineStart:Wl,lineEnd:Zl,polygonStart:function(){re.lineStart=k2,re.lineEnd=M2},polygonEnd:function(){re.point=on,re.lineStart=Wl,re.lineEnd=Zl},result:function(){var t=ui?[qs/ui,Hs/ui]:Sn?[vr/Sn,wr/Sn]:ci?[Bs/ci,Os/ci]:[NaN,NaN];return Bs=Os=ci=vr=wr=Sn=qs=Hs=ui=0,t}};function on(t,e){Bs+=t,Os+=e,++ci}function Wl(){re.point=S2}function S2(t,e){re.point=x2,on(de=t,ge=e)}function x2(t,e){var n=t-de,i=e-ge,r=La(n*n+i*i);vr+=r*(de+t)/2,wr+=r*(ge+e)/2,Sn+=r,on(de=t,ge=e)}function Zl(){re.point=on}function k2(){re.point=C2}function M2(){_u(vu,wu)}function C2(t,e){re.point=_u,on(vu=de=t,wu=ge=e)}function _u(t,e){var n=t-de,i=e-ge,r=La(n*n+i*i);vr+=r*(de+t)/2,wr+=r*(ge+e)/2,Sn+=r,r=ge*t-de*e,qs+=r*(de+t),Hs+=r*(ge+e),ui+=r*3,on(de=t,ge=e)}const jl=re;function Su(t){this._context=t}Su.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,g2);break}}},result:ae};var Ys=new Ln,bs,xu,ku,hi,fi,_r={point:ae,lineStart:function(){_r.point=T2},lineEnd:function(){bs&&Mu(xu,ku),_r.point=ae},polygonStart:function(){bs=!0},polygonEnd:function(){bs=null},result:function(){var t=+Ys;return Ys=new Ln,t}};function T2(t,e){_r.point=Mu,xu=hi=t,ku=fi=e}function Mu(t,e){hi-=t,fi-=e,Ys.add(La(hi*hi+fi*fi)),hi=t,fi=e}const Jl=_r;let Ql,Sr,to,eo;class no{constructor(e){this._append=e==null?Cu:D2(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==to||this._append!==Sr){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,to=i,Sr=this._append,eo=this._,this._=r}this._+=eo;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Cu(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function D2(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Cu;if(e!==Ql){const n=10**e;Ql=e,Sr=function(r){let s=1;this._+=r[0];for(const a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return Sr}function N2(t,e){let n=3,i=4.5,r,s;function a(l){return l&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),ii(l,r(s))),s.result()}return a.area=function(l){return ii(l,r(Kl)),Kl.result()},a.measure=function(l){return ii(l,r(Jl)),Jl.result()},a.bounds=function(l){return ii(l,r(Xl)),Xl.result()},a.centroid=function(l){return ii(l,r(jl)),jl.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,m2):(t=l).stream,a):t},a.context=function(l){return arguments.length?(s=l==null?(e=null,new no(n)):new Su(e=l),typeof i!="function"&&s.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(s.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return e===null&&(s=new no(n)),a},a.projection(t).digits(n).context(e)}const L={select:Vt,selectAll:Vf,json:Rf,scaleLinear:Fc,scaleSqrt:xd,scalePoint:f0,scaleBand:ra,scalePow:ha,scaleOrdinal:ia,scaleLog:Uc,scaleSequential:Kc,scaleTime:U1,scaleUtc:R1,schemeTableau10:q1,interpolateRainbow:tg,interpolateBlues:Y1,interpolateGreens:K1,interpolateReds:j1,interpolateOranges:Q1,interpolateGreys:W1,interpolateViridis:eg,lch:M0,hsl:gc,rgb:wi,color:Ye,quantize:Z0,interpolate:Yn,interpolateHcl:W0,max:i0,maxIndex:r0,min:s0,minIndex:a0,extent:gi,sum:u0,shuffle:o0,bin:n0,timeout:Ns,transition:tu,easeLinear:fp,easePolyInOut:gp,easeQuadInOut:dp,easeCubicInOut:nu,easeElasticOut:pp,axisLeft:Cp,axisBottom:Mp,line:Op,curveStepAfter:Jp,brush:Hm,brushX:qm,zoom:jm,zoomIdentity:za,drag:Am,format:$r,curveMonotoneX:Zp,curveMonotoneY:jp,curveBasis:Wp,timeFormat:ma,utcParse:Gc,utcFormat:ya,timeSecond:qe,timeMinute:Lr,timeHour:Ar,timeDay:Gn,timeWeek:$i,timeMonth:Pr,timeYear:we,hierarchy:Ta,partition:_m,tree:Tm,arc:Vp,linkHorizontal:Kp,linkVertical:Xp,path:su,randomNormal:t2,randomUniform:Jm,randomInt:Qm,contours:h2,geoPath:N2};var rt=(t=>(t.Keyword="keyword",t.Chrf="chrf",t.SourceID="source id",t.Embedding="embedding",t.Familiarity="familiarity",t.UnitTest="unit test",t))(rt||{}),Ft=(t=>(t.Date="date",t.Keyword="keyword",t.Embedding="embedding",t.Chrf="chrf",t.Familiarity="familiarity",t.SourceID="sourceID",t.OtherSet="otherSet",t.Search="search",t))(Ft||{}),ut=(t=>(t.displayName="displayName",t.logCount="logCount",t.trainCount="trainCount",t.chrf="chrf",t.familiarity="familiarity",t.trainLogRatio="trainLogRatio",t))(ut||{}),mt=(t=>(t.Topic="topic",t.UnitTest="unit-test",t))(mt||{});const z2=[{fileName:"challenge-ovs",displayName:"OVS Set",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-unicode",displayName:"Emojis",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-number",displayName:"Numbers",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-capital",displayName:"Capitals",count:100,type:mt.UnitTest},{fileName:"challenge-topic-pain",displayName:"Pain",count:100,chrf:90.79799999999999,type:mt.Topic},{fileName:"challenge-topic-bills",displayName:"Bills",count:100,chrf:79.7324,type:mt.Topic},{fileName:"challenge-topic-covid",displayName:"COVID",count:100,chrf:92.03,type:mt.Topic},{fileName:"challenge-topic-immigration",displayName:"Immigration",count:100,chrf:92.3788,type:mt.Topic},{fileName:"challenge-topic-insurance",displayName:"Insurance",count:100,chrf:91.81559999999999,type:mt.Topic},{fileName:"challenge-topic-lease",displayName:"Lease",count:100,chrf:91.40879999999999,type:mt.Topic},{fileName:"challenge-topic-legal",displayName:"Legal",count:100,chrf:89.2104,type:mt.Topic},{fileName:"challenge-topic-loans",displayName:"Loans",count:100,chrf:88.3268,type:mt.Topic},{fileName:"challenge-topic-medication",displayName:"Medication",count:100,chrf:87.2668,type:mt.Topic},{fileName:"challenge-topic-medicine",displayName:"Medicine",count:100,chrf:94.3276,type:mt.Topic},{fileName:"challenge-topic-passwords",displayName:"Passwords",count:100,chrf:88.786,type:mt.Topic},{fileName:"challenge-topic-privacy-agreements",displayName:"Privacy",count:100,chrf:94.88719999999999,type:mt.Topic},{fileName:"challenge-topic-school",displayName:"School",count:100,chrf:91.1164,type:mt.Topic},{fileName:"challenge-topic-taxes",displayName:"Taxes",count:100,chrf:92.4384,type:mt.Topic},{fileName:"challenge-topic-ukraine",displayName:"Ukraine",count:100,chrf:89.99799999999999,type:mt.Topic},{fileName:"challenge-topic-work",displayName:"Work",count:100,chrf:88.5992,type:mt.Topic},{fileName:"challenge-mismatch-dots",displayName:"Dots",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-exclamation",displayName:"Exclamation",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-parenthesis",displayName:"Parenthesis",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-period",displayName:"Period",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-question",displayName:"Question",count:100,type:mt.UnitTest},{fileName:"challenge-mismatch-url",displayName:"URL",count:100,type:mt.UnitTest},{fileName:"challenge-new-punctuation",displayName:"New Punctuation",count:100,type:mt.UnitTest}],$2={toolbarHeight:36},L2={mouseenterDelay:300},A2={"red-50":"hsl(350, 100.0%, 96.08%)","red-100":"hsl(354, 100.0%, 90.2%)","red-200":"hsl(0, 72.65%, 77.06%)","red-300":"hsl(0, 68.67%, 67.45%)","red-400":"hsl(1, 83.25%, 62.55%)","red-500":"hsl(4, 89.62%, 58.43%)","red-600":"hsl(1, 77.19%, 55.29%)","red-700":"hsl(0, 65.08%, 50.59%)","red-800":"hsl(0, 66.39%, 46.67%)","red-900":"hsl(0, 73.46%, 41.37%)","red-a100":"hsl(4, 100.0%, 75.1%)","red-a200":"hsl(0, 100.0%, 66.08%)","red-a400":"hsl(348, 100.0%, 54.51%)","red-a700":"hsl(0, 100.0%, 41.76%)","pink-50":"hsl(340, 80.0%, 94.12%)","pink-100":"hsl(339, 81.33%, 85.29%)","pink-200":"hsl(339, 82.11%, 75.88%)","pink-300":"hsl(339, 82.56%, 66.27%)","pink-400":"hsl(339, 81.9%, 58.82%)","pink-500":"hsl(339, 82.19%, 51.57%)","pink-600":"hsl(338, 77.78%, 47.65%)","pink-700":"hsl(336, 77.98%, 42.75%)","pink-800":"hsl(333, 79.27%, 37.84%)","pink-900":"hsl(328, 81.33%, 29.41%)","pink-a100":"hsl(339, 100.0%, 75.1%)","pink-a200":"hsl(339, 100.0%, 62.55%)","pink-a400":"hsl(338, 100.0%, 48.04%)","pink-a700":"hsl(333, 84.11%, 41.96%)","purple-50":"hsl(292, 44.44%, 92.94%)","purple-100":"hsl(291, 46.07%, 82.55%)","purple-200":"hsl(291, 46.94%, 71.18%)","purple-300":"hsl(291, 46.6%, 59.61%)","purple-400":"hsl(291, 46.61%, 50.78%)","purple-500":"hsl(291, 63.72%, 42.16%)","purple-600":"hsl(287, 65.05%, 40.39%)","purple-700":"hsl(282, 67.88%, 37.84%)","purple-800":"hsl(277, 70.17%, 35.49%)","purple-900":"hsl(267, 75.0%, 31.37%)","purple-a100":"hsl(291, 95.38%, 74.51%)","purple-a200":"hsl(291, 95.9%, 61.76%)","purple-a400":"hsl(291, 100.0%, 48.82%)","purple-a700":"hsl(280, 100.0%, 50.0%)","deep-purple-50":"hsl(264, 45.45%, 93.53%)","deep-purple-100":"hsl(261, 45.68%, 84.12%)","deep-purple-200":"hsl(261, 46.27%, 73.73%)","deep-purple-300":"hsl(261, 46.81%, 63.14%)","deep-purple-400":"hsl(261, 46.72%, 55.1%)","deep-purple-500":"hsl(261, 51.87%, 47.25%)","deep-purple-600":"hsl(259, 53.91%, 45.1%)","deep-purple-700":"hsl(257, 57.75%, 41.76%)","deep-purple-800":"hsl(254, 60.8%, 39.02%)","deep-purple-900":"hsl(251, 68.79%, 33.92%)","deep-purple-a100":"hsl(261, 100.0%, 76.67%)","deep-purple-a200":"hsl(255, 100.0%, 65.1%)","deep-purple-a400":"hsl(258, 100.0%, 56.08%)","deep-purple-a700":"hsl(265, 100.0%, 45.88%)","indigo-50":"hsl(231, 43.75%, 93.73%)","indigo-100":"hsl(231, 45.0%, 84.31%)","indigo-200":"hsl(230, 44.36%, 73.92%)","indigo-300":"hsl(230, 44.09%, 63.53%)","indigo-400":"hsl(230, 44.25%, 55.69%)","indigo-500":"hsl(230, 48.36%, 47.84%)","indigo-600":"hsl(231, 50.0%, 44.71%)","indigo-700":"hsl(231, 53.62%, 40.59%)","indigo-800":"hsl(232, 57.22%, 36.67%)","indigo-900":"hsl(234, 65.79%, 29.8%)","indigo-a100":"hsl(230, 100.0%, 77.45%)","indigo-a200":"hsl(230, 98.84%, 66.08%)","indigo-a400":"hsl(230, 98.97%, 61.76%)","indigo-a700":"hsl(230, 99.04%, 59.22%)","blue-50":"hsl(205, 86.67%, 94.12%)","blue-100":"hsl(207, 88.89%, 85.88%)","blue-200":"hsl(206, 89.74%, 77.06%)","blue-300":"hsl(206, 89.02%, 67.84%)","blue-400":"hsl(206, 89.95%, 60.98%)","blue-500":"hsl(206, 89.74%, 54.12%)","blue-600":"hsl(208, 79.28%, 50.78%)","blue-700":"hsl(209, 78.72%, 46.08%)","blue-800":"hsl(211, 80.28%, 41.76%)","blue-900":"hsl(216, 85.06%, 34.12%)","blue-a100":"hsl(217, 100.0%, 75.49%)","blue-a200":"hsl(217, 100.0%, 63.33%)","blue-a400":"hsl(217, 100.0%, 58.04%)","blue-a700":"hsl(224, 100.0%, 58.04%)","light-blue-50":"hsl(198, 93.55%, 93.92%)","light-blue-100":"hsl(198, 92.41%, 84.51%)","light-blue-200":"hsl(198, 92.37%, 74.31%)","light-blue-300":"hsl(198, 91.3%, 63.92%)","light-blue-400":"hsl(198, 91.93%, 56.27%)","light-blue-500":"hsl(198, 97.57%, 48.43%)","light-blue-600":"hsl(199, 97.41%, 45.49%)","light-blue-700":"hsl(201, 98.1%, 41.37%)","light-blue-800":"hsl(202, 97.91%, 37.45%)","light-blue-900":"hsl(206, 98.72%, 30.59%)","light-blue-a100":"hsl(198, 100.0%, 75.1%)","light-blue-a200":"hsl(198, 100.0%, 62.55%)","light-blue-a400":"hsl(198, 100.0%, 50.0%)","light-blue-a700":"hsl(202, 100.0%, 45.88%)","cyan-50":"hsl(186, 72.22%, 92.94%)","cyan-100":"hsl(186, 71.11%, 82.35%)","cyan-200":"hsl(186, 71.62%, 70.98%)","cyan-300":"hsl(186, 71.15%, 59.22%)","cyan-400":"hsl(186, 70.87%, 50.2%)","cyan-500":"hsl(186, 100.0%, 41.57%)","cyan-600":"hsl(186, 100.0%, 37.84%)","cyan-700":"hsl(185, 100.0%, 32.75%)","cyan-800":"hsl(185, 100.0%, 28.04%)","cyan-900":"hsl(182, 100.0%, 19.61%)","cyan-a100":"hsl(180, 100.0%, 75.88%)","cyan-a200":"hsl(180, 100.0%, 54.71%)","cyan-a400":"hsl(186, 100.0%, 50.0%)","cyan-a700":"hsl(187, 100.0%, 41.57%)","teal-50":"hsl(176, 40.91%, 91.37%)","teal-100":"hsl(174, 41.28%, 78.63%)","teal-200":"hsl(174, 41.9%, 64.9%)","teal-300":"hsl(174, 41.83%, 50.78%)","teal-400":"hsl(174, 62.75%, 40.0%)","teal-500":"hsl(174, 100.0%, 29.41%)","teal-600":"hsl(173, 100.0%, 26.86%)","teal-700":"hsl(173, 100.0%, 23.73%)","teal-800":"hsl(172, 100.0%, 20.59%)","teal-900":"hsl(169, 100.0%, 15.1%)","teal-a100":"hsl(166, 100.0%, 82.75%)","teal-a200":"hsl(165, 100.0%, 69.61%)","teal-a400":"hsl(165, 82.26%, 51.37%)","teal-a700":"hsl(171, 100.0%, 37.45%)","green-50":"hsl(124, 39.39%, 93.53%)","green-100":"hsl(121, 37.5%, 84.31%)","green-200":"hsl(122, 37.4%, 74.31%)","green-300":"hsl(122, 38.46%, 64.31%)","green-400":"hsl(122, 38.46%, 56.67%)","green-500":"hsl(122, 39.44%, 49.22%)","green-600":"hsl(122, 40.97%, 44.51%)","green-700":"hsl(122, 43.43%, 38.82%)","green-800":"hsl(123, 46.2%, 33.53%)","green-900":"hsl(124, 55.37%, 23.73%)","green-a100":"hsl(136, 77.22%, 84.51%)","green-a200":"hsl(150, 81.82%, 67.65%)","green-a400":"hsl(150, 100.0%, 45.1%)","green-a700":"hsl(144, 100.0%, 39.22%)","light-green-50":"hsl(88, 51.72%, 94.31%)","light-green-100":"hsl(87, 50.68%, 85.69%)","light-green-200":"hsl(88, 50.0%, 76.47%)","light-green-300":"hsl(87, 50.0%, 67.06%)","light-green-400":"hsl(87, 50.24%, 59.8%)","light-green-500":"hsl(87, 50.21%, 52.75%)","light-green-600":"hsl(89, 46.12%, 48.04%)","light-green-700":"hsl(92, 47.91%, 42.16%)","light-green-800":"hsl(95, 49.46%, 36.47%)","light-green-900":"hsl(103, 55.56%, 26.47%)","light-green-a100":"hsl(87, 100.0%, 78.24%)","light-green-a200":"hsl(87, 100.0%, 67.45%)","light-green-a400":"hsl(92, 100.0%, 50.59%)","light-green-a700":"hsl(96, 81.15%, 47.84%)","lime-50":"hsl(65, 71.43%, 94.51%)","lime-100":"hsl(64, 69.01%, 86.08%)","lime-200":"hsl(65, 70.69%, 77.25%)","lime-300":"hsl(65, 70.37%, 68.24%)","lime-400":"hsl(65, 69.7%, 61.18%)","lime-500":"hsl(65, 69.96%, 54.31%)","lime-600":"hsl(63, 59.68%, 49.61%)","lime-700":"hsl(62, 61.43%, 43.73%)","lime-800":"hsl(59, 62.89%, 38.04%)","lime-900":"hsl(53, 69.93%, 30.0%)","lime-a100":"hsl(65, 100.0%, 75.29%)","lime-a200":"hsl(65, 100.0%, 62.75%)","lime-a400":"hsl(73, 100.0%, 50.0%)","lime-a700":"hsl(75, 100.0%, 45.88%)","yellow-50":"hsl(55, 100.0%, 95.29%)","yellow-100":"hsl(53, 100.0%, 88.43%)","yellow-200":"hsl(53, 100.0%, 80.78%)","yellow-300":"hsl(53, 100.0%, 73.14%)","yellow-400":"hsl(53, 100.0%, 67.25%)","yellow-500":"hsl(53, 100.0%, 61.57%)","yellow-600":"hsl(48, 98.04%, 60.0%)","yellow-700":"hsl(42, 96.26%, 58.04%)","yellow-800":"hsl(37, 94.64%, 56.08%)","yellow-900":"hsl(28, 91.74%, 52.55%)","yellow-a100":"hsl(60, 100.0%, 77.65%)","yellow-a200":"hsl(60, 100.0%, 50.0%)","yellow-a400":"hsl(55, 100.0%, 50.0%)","yellow-a700":"hsl(50, 100.0%, 50.0%)","amber-50":"hsl(46, 100.0%, 94.12%)","amber-100":"hsl(45, 100.0%, 85.1%)","amber-200":"hsl(45, 100.0%, 75.49%)","amber-300":"hsl(45, 100.0%, 65.49%)","amber-400":"hsl(45, 100.0%, 57.84%)","amber-500":"hsl(45, 100.0%, 51.37%)","amber-600":"hsl(42, 100.0%, 50.0%)","amber-700":"hsl(37, 100.0%, 50.0%)","amber-800":"hsl(33, 100.0%, 50.0%)","amber-900":"hsl(26, 100.0%, 50.0%)","amber-a100":"hsl(47, 100.0%, 74.9%)","amber-a200":"hsl(47, 100.0%, 62.55%)","amber-a400":"hsl(46, 100.0%, 50.0%)","amber-a700":"hsl(40, 100.0%, 50.0%)","orange-50":"hsl(36, 100.0%, 93.92%)","orange-100":"hsl(35, 100.0%, 84.9%)","orange-200":"hsl(35, 100.0%, 75.1%)","orange-300":"hsl(35, 100.0%, 65.1%)","orange-400":"hsl(35, 100.0%, 57.45%)","orange-500":"hsl(35, 100.0%, 50.0%)","orange-600":"hsl(33, 100.0%, 49.22%)","orange-700":"hsl(30, 100.0%, 48.04%)","orange-800":"hsl(27, 100.0%, 46.86%)","orange-900":"hsl(21, 100.0%, 45.1%)","orange-a100":"hsl(38, 100.0%, 75.1%)","orange-a200":"hsl(33, 100.0%, 62.55%)","orange-a400":"hsl(34, 100.0%, 50.0%)","orange-a700":"hsl(25, 100.0%, 50.0%)","deep-orange-50":"hsl(5, 71.43%, 94.51%)","deep-orange-100":"hsl(14, 100.0%, 86.86%)","deep-orange-200":"hsl(14, 100.0%, 78.43%)","deep-orange-300":"hsl(14, 100.0%, 69.8%)","deep-orange-400":"hsl(14, 100.0%, 63.14%)","deep-orange-500":"hsl(14, 100.0%, 56.67%)","deep-orange-600":"hsl(14, 90.68%, 53.73%)","deep-orange-700":"hsl(14, 80.39%, 50.0%)","deep-orange-800":"hsl(14, 82.28%, 46.47%)","deep-orange-900":"hsl(14, 88.18%, 39.8%)","deep-orange-a100":"hsl(14, 100.0%, 75.1%)","deep-orange-a200":"hsl(14, 100.0%, 62.55%)","deep-orange-a400":"hsl(14, 100.0%, 50.0%)","deep-orange-a700":"hsl(11, 100.0%, 43.33%)","brown-50":"hsl(19, 15.79%, 92.55%)","brown-100":"hsl(16, 15.79%, 81.37%)","brown-200":"hsl(14, 15.19%, 69.02%)","brown-300":"hsl(15, 15.32%, 56.47%)","brown-400":"hsl(15, 17.5%, 47.06%)","brown-500":"hsl(15, 25.39%, 37.84%)","brown-600":"hsl(15, 25.29%, 34.12%)","brown-700":"hsl(14, 25.68%, 29.02%)","brown-800":"hsl(11, 25.81%, 24.31%)","brown-900":"hsl(8, 27.84%, 19.02%)","gray-50":"hsl(0, 0.0%, 98.04%)","gray-100":"hsl(0, 0.0%, 96.08%)","gray-200":"hsl(0, 0.0%, 93.33%)","gray-300":"hsl(0, 0.0%, 87.84%)","gray-400":"hsl(0, 0.0%, 74.12%)","gray-500":"hsl(0, 0.0%, 61.96%)","gray-600":"hsl(0, 0.0%, 45.88%)","gray-700":"hsl(0, 0.0%, 38.04%)","gray-800":"hsl(0, 0.0%, 25.88%)","gray-900":"hsl(0, 0.0%, 12.94%)","blue-gray-50":"hsl(204, 15.15%, 93.53%)","blue-gray-100":"hsl(198, 15.66%, 83.73%)","blue-gray-200":"hsl(199, 15.33%, 73.14%)","blue-gray-300":"hsl(199, 15.63%, 62.35%)","blue-gray-400":"hsl(200, 15.38%, 54.12%)","blue-gray-500":"hsl(199, 18.3%, 46.08%)","blue-gray-600":"hsl(198, 18.45%, 40.39%)","blue-gray-700":"hsl(199, 18.34%, 33.14%)","blue-gray-800":"hsl(199, 17.91%, 26.27%)","blue-gray-900":"hsl(199, 19.15%, 18.43%)","blue-gray-1000":"hsl(199, 20.93%, 8.43%)"},Fe={colors:A2,layout:$2,time:L2,challengeSets:z2},vn=[];function Rr(t,e=St){let n;const i=new Set;function r(l){if(cn(t,l)&&(t=l,n)){const c=!vn.length;for(const o of i)o[1](),vn.push(o,t);if(c){for(let o=0;o<vn.length;o+=2)vn[o][0](vn[o+1]);vn.length=0}}}function s(l){r(l(t))}function a(l,c=St){const o=[l,c];return i.add(o),i.size===1&&(n=e(r)||St),l(t),()=>{i.delete(o),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:a}}const Kn=()=>({selectedFileName:"",fileNames:new Set,selectedTypes:new Set(["test","topic"])}),Xn=()=>({show:!1,html:"null",left:0,top:0,width:0,maxWidth:400,fontSize:"13px",tryHeight:!1,orientation:"s"}),Br=()=>({selectedDates:[],allDates:[],dateFormatter:null}),Or=()=>({sampleMin:0,sampleMax:1e3,curSample:200,curSampleMethod:"unfamiliar",filteredIndexes:[],showLogContour:!1,showLogSample:!0,showTrainSample:!0}),I2=()=>Rr(Xn()),E2=()=>Rr(Kn()),Tu=()=>Rr(Br()),P2=()=>Rr(Or());class F2{constructor({component:e,myTableViewUpdated:n,challengeSets:i,challengeSetDataMap:r,tooltipStore:s,challengeStore:a}){C(this,"component");C(this,"myTableViewUpdated");C(this,"challengeSets");C(this,"challengeSetDataMap");C(this,"svgSize");C(this,"tooltipStore");C(this,"tooltipStoreValue");C(this,"challengeStore");C(this,"challengeStoreValue");C(this,"selectedSetName","");C(this,"selectedSetSentences",[]);C(this,"selectedSetKeywords",[]);C(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.challengeStore.subscribe(e=>{this.challengeStoreValue=e})});C(this,"rowClicked",e=>{if(L.randomUniform(),e.fileName===this.selectedSetName)this.selectedSetName="";else{this.selectedSetName=e.fileName;const n=new Set,i=this.challengeSetDataMap.get(this.selectedSetName);this.selectedSetSentences=[];for(let c=0;c<Math.min(i.source.length,100);c++)!n.has(i.source[c])&&i.hyp[c]!==null&&(this.selectedSetSentences.push({source:i.source[c],hyp:i.hyp[c],showHyp:!1}),n.add(i.source[c]));const r=[],s=50;for(const[c,o]of i.keywords)r.push({word:c,value:o});this.selectedSetKeywords=r.slice(0,s);const a=L.extent(this.selectedSetKeywords,c=>c.value),l=L.scaleLinear().domain(a).range([.005,.3]);for(const c of this.selectedSetKeywords)c.color=L.interpolateGreys(l(c.value));this.selectedSetKeywords.sort((c,o)=>o.value-c.value)}this.myTableViewUpdated()});C(this,"drawRowTrainCountBar",()=>{const e=L.select(this.component).select("table.table"),n=L.max(this.challengeSets,r=>r.trainCount),i=L.scaleLinear().domain([0,n]).range([this.svgSize.width,0]);for(const r of this.challengeSets){const a=e.select(`#cell-train-count-${r.fileName}`).append("g").attr("class","content");a.append("rect").attr("class","count-bar-back train").attr("width",this.svgSize.width).attr("height",this.svgSize.height),a.append("rect").attr("class","count-bar-front train").attr("x",i(r.trainCount)).attr("width",this.svgSize.width-i(r.trainCount)).attr("height",this.svgSize.height)}});C(this,"drawRowLogCountBar",()=>{const e=L.select(this.component).select("table.table"),n=L.max(this.challengeSets,r=>r.logCount),i=L.scaleLinear().domain([0,n]).range([this.svgSize.width,0]);for(const r of this.challengeSets){const a=e.select(`#cell-log-count-${r.fileName}`).append("g").attr("class","content");a.append("rect").attr("class","count-bar-back log").attr("width",this.svgSize.width).attr("height",this.svgSize.height),a.append("rect").attr("class","count-bar-front log").attr("x",i(r.logCount)).attr("width",this.svgSize.width-i(r.logCount)).attr("height",this.svgSize.height)}});C(this,"drawRowRatio",()=>{const e=L.select(this.component).select("table.table");for(const n of this.challengeSets){const i=n.trainLogRatio?n.trainLogRatio:0,r=e.select(`#cell-ratio-${n.fileName}`);r.style("width",`${2*this.svgSize.height}px`);const s=L.arc(),a={innerRadius:0,outerRadius:this.svgSize.height,startAngle:Math.PI/2,endAngle:Math.PI*3/2},l={innerRadius:0,outerRadius:this.svgSize.height,startAngle:Math.PI/2,endAngle:Math.PI/2+Math.PI*i},c=r.append("g").attr("class","content").attr("transform",`rotate(180, ${this.svgSize.height}, ${this.svgSize.height/2})`);c.append("path").attr("transform",`translate(${this.svgSize.height}, 0)`).attr("class","arc-back").attr("d",s(a)),c.append("path").attr("transform",`translate(${this.svgSize.height}, 0)`).attr("class","arc-front").attr("d",s(l))}});C(this,"drawRowHistograms",(e,n)=>{const i=L.select(this.component).select("table.table");for(const r of this.challengeSets){if(n&&r.type!=="topic")continue;let s=[];if(e==="chrf")s=this.challengeSetDataMap.get(r.fileName).chrf.filter(y=>y!==null);else if(e==="familiarity")s=this.challengeSetDataMap.get(r.fileName).familiarity.filter(y=>y!==null);else{console.error("Unknown metric",e);return}const a=i.select(`#cell-${e}-${r.fileName}`),l=9,c=Array(l).fill(0).map((y,b)=>(b+1)*(1/(l+1))),u=L.bin().domain([0,1]).thresholds(c)(s),f=u.map(y=>y.length),h=a.append("g").attr("class","content");if(e==="chrf"&&s.length===0){h.selectAll("rect.hist-bar").data([0]).join("rect").attr("class",`hist-bar ${e} missing`).attr("x",0).attr("y",0).attr("width",this.svgSize.width).attr("height",this.svgSize.height);continue}const d=L.scaleLinear().domain([0,1]).range([0,this.svgSize.width]),m=L.scaleLinear().domain([0,Math.max(...f)]).range([this.svgSize.height,0]),w=d(.1)-d(0),v=.5,p=.5;h.selectAll("rect.hist-bar").data(u).join("rect").attr("class",`hist-bar ${e}`).attr("x",y=>d(y.x0)+v).attr("y",y=>m(y.length)).attr("width",Math.max(0,w-v-p)).attr("height",y=>this.svgSize.height-m(y.length))}});C(this,"showDetailClicked",e=>{this.challengeStoreValue.selectedFileName=e.fileName,this.challengeStoreValue.challengeSet=e,this.challengeStoreValue.challengeData=this.challengeSetDataMap.get(e.fileName),this.challengeStore.set(this.challengeStoreValue)});C(this,"headerMouseenter",(e,n)=>{let i="";switch(n.key){case ut.chrf:{i="Average of ChrF scores (translation quality) on the training data";break}case ut.trainCount:{i="Number of all training samples in this challenge set";break}case ut.logCount:{i="Number of all log samples in this challenge set";break}case ut.familiarity:{i="Likelyhood of seeing a usage log sample under the training data's distributition";break}case ut.trainLogRatio:{i="Percentage of training samples in this set (training and log samples)";break}default:return}this.tooltipStoreValue.html=i;const s=e.currentTarget.querySelector("span").getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=s.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=s.x+s.width/2,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"headerMouseleave",(e,n)=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"filterHelperMouseenter",(e,n="filter")=>{switch(n){case"filter":{this.tooltipStoreValue.html="Interact the tool to apply filters. For example, you can brush the       timeline to filter sentences by dates. Or you can click keywords to       choose sentences that include certain keywords.";break}case"keyword":{this.tooltipStoreValue.html="Most representative keywords in this set, sorted by their          representativeness. A darker background means the word is          more representative.";break}case"embedding":{this.tooltipStoreValue.html="Position of each sample in the semantic embedding space.";break}case"chrf":{this.tooltipStoreValue.html="Distribution of ChrF scores from training samples. Higher score          suggests better translation quality.";break}case"familiarity":{this.tooltipStoreValue.html="Distribution of the familiarity scores from log samples. Higher          value indicates closer distance to the training distribution.";break}case"sourceid":{this.tooltipStoreValue.html="Distribution of the source apps of translation requests.";break}case"test":{this.tooltipStoreValue.html="Distribution of sentences that are also in other challenge sets.";break}}const r=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=r.y,this.tooltipStoreValue.left=r.x+r.width/2,this.tooltipStoreValue.maxWidth=260,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"filterHelperMouseleave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});this.component=e,this.myTableViewUpdated=n,this.challengeSets=i,this.challengeSetDataMap=r,this.tooltipStore=s,this.tooltipStoreValue=Xn(),this.challengeStore=a,this.challengeStoreValue=Kn(),this.subscribeStores();const l=L.select(this.component).select("tr:not(.hide) .cell-svg").node().getBoundingClientRect();this.svgSize={width:50,height:l.height},this.drawRowHistograms("chrf",!1),this.drawRowHistograms("familiarity",!1),this.drawRowRatio(),this.drawRowTrainCountBar(),this.drawRowLogCountBar()}}const Gs=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 14 7" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-2264,-55)">
        <g transform="matrix(4.33918,0,0,3.4263,3972.51,-1878.31)">
            <g transform="matrix(0.230458,0,0,0.29186,-394.834,561.784)">
                <path d="M11.646,15.146L5.854,9.354C5.76,9.26 5.707,9.133 5.707,9C5.707,8.726 5.933,8.5 6.207,8.5L17.793,8.5C18.067,8.5 18.293,8.726 18.293,9C18.293,9.133 18.24,9.26 18.146,9.354L12.353,15.146C12.159,15.34 11.84,15.34 11.646,15.146Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,Du=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 78" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-614,-249)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-search" transform="matrix(0.0292011,0,0,0.0553024,-897.818,566.082)">
                <path d="M8.789,-42.236C8.789,-25.098 22.705,-11.23 39.844,-11.23C46.436,-11.23 52.49,-13.281 57.52,-16.797L75.684,1.416C76.709,2.393 77.979,2.832 79.297,2.832C82.129,2.832 84.18,0.684 84.18,-2.148C84.18,-3.516 83.643,-4.736 82.813,-5.664L64.746,-23.779C68.604,-28.955 70.85,-35.303 70.85,-42.236C70.85,-59.375 56.982,-73.291 39.844,-73.291C22.705,-73.291 8.789,-59.375 8.789,-42.236ZM16.309,-42.236C16.309,-55.273 26.807,-65.772 39.844,-65.772C52.832,-65.772 63.379,-55.273 63.379,-42.236C63.379,-29.248 52.832,-18.701 39.844,-18.701C26.807,-18.701 16.309,-29.248 16.309,-42.236Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,Aa=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-312,-408)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-info" transform="matrix(0.0292011,0,0,0.0553024,-906.585,574.91)">
                <path d="M46.24,4.15C67.773,4.15 85.693,-13.721 85.693,-35.254C85.693,-56.787 67.725,-74.658 46.191,-74.658C24.707,-74.658 6.836,-56.787 6.836,-35.254C6.836,-13.721 24.756,4.15 46.24,4.15ZM46.24,-3.271C28.516,-3.271 14.355,-17.481 14.355,-35.254C14.355,-53.027 28.467,-67.236 46.191,-67.236C63.965,-67.236 78.223,-53.027 78.223,-35.254C78.223,-17.481 64.014,-3.271 46.24,-3.271Z" style="fill-rule:nonzero;"/>
                <path d="M39.648,-13.623L55.176,-13.623C56.934,-13.623 58.35,-14.893 58.35,-16.699C58.35,-18.408 56.934,-19.727 55.176,-19.727L50.879,-19.727L50.879,-37.988C50.879,-40.381 49.707,-41.895 47.51,-41.895L40.381,-41.895C38.623,-41.895 37.256,-40.576 37.256,-38.916C37.256,-37.109 38.623,-35.84 40.381,-35.84L43.945,-35.84L43.945,-19.727L39.648,-19.727C37.891,-19.727 36.475,-18.408 36.475,-16.699C36.475,-14.893 37.891,-13.623 39.648,-13.623ZM45.85,-47.9C48.926,-47.9 51.318,-50.342 51.318,-53.418C51.318,-56.494 48.926,-58.887 45.85,-58.887C42.822,-58.887 40.381,-56.494 40.381,-53.418C40.381,-50.342 42.822,-47.9 45.85,-47.9Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{Map:V2}=eh;function io(t,e,n){const i=t.slice();return i[38]=e[n],i}function ro(t,e,n){const i=t.slice();return i[41]=e[n],i}function so(t,e,n){const i=t.slice();return i[44]=e[n],i[45]=e,i[46]=n,i}function ao(t,e,n){const i=t.slice();return i[47]=e[n],i[49]=n,i}function U2(t){let e,n,i,r,s,a;return{c(){e=T("div"),n=T("span"),i=H(),r=T("input"),k(n,"class","svg-icon svelte-1crkzsa"),k(r,"class","search-bar-input svelte-1crkzsa"),k(r,"type","text"),k(r,"id","input-search"),k(r,"placeholder","Search..."),k(e,"class","search-bar svelte-1crkzsa")},m(l,c){it(l,e,c),S(e,n),n.innerHTML=Du,S(e,i),S(e,r),s||(a=ct(r,"input",t[20]),s=!0)},p:St,d(l){l&&et(e),s=!1,a()}}}function lo(t){let e,n,i,r=t[47].displayName+"",s,a,l,c,o,u,f,h,d,m;function w(){return t[17](t[47])}function v(){return t[18](t[47])}function p(){return t[19](t[47])}let y=t[49]===0&&U2(t);function b(..._){return t[21](t[47],..._)}function g(..._){return t[22](t[47],..._)}return{c(){e=T("th"),n=T("div"),i=T("span"),s=_t(r),a=H(),l=T("div"),c=T("div"),o=H(),u=T("div"),f=H(),y&&y.c(),h=H(),k(c,"class","svg-icon icon-sort-up svelte-1crkzsa"),k(u,"class","svg-icon icon-sort-down svelte-1crkzsa"),k(l,"class","sort-icons svelte-1crkzsa"),at(l,"active-up",t[4].key===t[47].key&&t[4].direction==="up"),at(l,"active-down",t[4].key===t[47].key&&t[4].direction==="down"),k(n,"class","header-cell-content svelte-1crkzsa"),k(e,"colspan",t[49]===0?"":"2"),k(e,"class","header-cell svelte-1crkzsa")},m(_,M){it(_,e,M),S(e,n),S(n,i),S(i,s),S(n,a),S(n,l),S(l,c),c.innerHTML=Gs,S(l,o),S(l,u),u.innerHTML=Gs,S(n,f),y&&y.m(n,null),S(e,h),d||(m=[ct(i,"click",w),ct(c,"click",v),ct(u,"click",p),ct(n,"mouseenter",b),ct(n,"mouseleave",g)],d=!0)},p(_,M){t=_,M[0]&128&&r!==(r=t[47].displayName+"")&&Nt(s,r),M[0]&144&&at(l,"active-up",t[4].key===t[47].key&&t[4].direction==="up"),M[0]&144&&at(l,"active-down",t[4].key===t[47].key&&t[4].direction==="down"),t[49]===0&&y.p(t,M)},d(_){_&&et(e),y&&y.d(),d=!1,Et(m)}}}function oo(t){let e,n=t[3].selectedSetSentences,i=[];for(let r=0;r<n.length;r+=1)i[r]=co(so(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ni()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);it(r,e,s)},p(r,s){if(s[0]&8){n=r[3].selectedSetSentences;let a;for(a=0;a<n.length;a+=1){const l=so(r,n,a);i[a]?i[a].p(l,s):(i[a]=co(l),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ye(i,r),r&&et(e)}}}function co(t){let e,n,i=t[44].source+"",r,s,a,l=t[44].hyp+"",c,o,u,f;function h(){return t[24](t[44],t[45],t[46])}return{c(){e=T("div"),n=T("div"),r=_t(i),s=H(),a=T("div"),c=_t(l),o=H(),k(n,"class","sentence-source"),k(a,"class","sentence-hyp svelte-1crkzsa"),at(a,"shown",t[44].showHyp),k(e,"class","sentence-row svelte-1crkzsa")},m(d,m){it(d,e,m),S(e,n),S(n,r),S(e,s),S(e,a),S(a,c),S(e,o),u||(f=ct(e,"click",h),u=!0)},p(d,m){t=d,m[0]&8&&i!==(i=t[44].source+"")&&Nt(r,i),m[0]&8&&l!==(l=t[44].hyp+"")&&Nt(c,l),m[0]&8&&at(a,"shown",t[44].showHyp)},d(d){d&&et(e),u=!1,f()}}}function uo(t){let e,n,i=t[3].selectedSetKeywords,r=[];for(let s=0;s<i.length;s+=1)r[s]=ho(ro(t,i,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=H(),n=T("div"),k(n,"class","keyword phantom svelte-1crkzsa")},m(s,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);it(s,e,a),it(s,n,a)},p(s,a){if(a[0]&520){i=s[3].selectedSetKeywords;let l;for(l=0;l<i.length;l+=1){const c=ro(s,i,l);r[l]?r[l].p(c,a):(r[l]=ho(c),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=i.length}},d(s){ye(r,s),s&&et(e),s&&et(n)}}}function ho(t){let e,n=t[41].word+"",i,r,s;return{c(){e=T("div"),i=_t(n),k(e,"class","keyword svelte-1crkzsa"),k(e,"style",r=`background-color: ${t[41].color};`),k(e,"title",s=`${t[41].word}, c-TF-IDF: ${t[9](t[41].value)}`)},m(a,l){it(a,e,l),S(e,i)},p(a,l){l[0]&8&&n!==(n=a[41].word+"")&&Nt(i,n),l[0]&8&&r!==(r=`background-color: ${a[41].color};`)&&k(e,"style",r),l[0]&8&&s!==(s=`${a[41].word}, c-TF-IDF: ${a[9](a[41].value)}`)&&k(e,"title",s)},d(a){a&&et(e)}}}function fo(t,e){let n,i,r,s=e[38].displayName+"",a,l,c,o,u,f,h,d,m,w,v=e[38].logCount+"",p,y,b,g,_,M,N,I,P,$,D=(e[38].familiarity===void 0?"0.00":e[8](e[38].familiarity))+"",B,A,x,E,z,F,G,O,K,W=e[38].trainCount+"",Z,pt,R,X,V,q,Q,Y,j,st,U=(e[38].chrf===void 0?"N/A":e[8](e[38].chrf))+"",ft,nt,ht,yt,J,gt,jt,zt,Ve,Rt,xe=e[38].trainLogRatio===void 0?"0.00":`${Math.floor(e[38].trainLogRatio*100)}%`,dn,ke,Pt,Gt,Jt,Qt,Yt,gn,Ue,Me,kt,Wn,te,Dt,oe,wt,Ii,ce,Bt,xt,Zn,je,lt,ot,vt,Re;function Ei(){return e[23](e[38])}let tt=e[3]!==null&&oo(e);function ue(){return e[27](e[38])}let Ot=e[3]!==null&&uo(e);return{key:t,first:null,c(){var Kt,bt;n=T("tr"),i=T("td"),r=T("div"),a=_t(s),c=H(),o=T("td"),u=T("div"),f=Xt("svg"),d=H(),m=T("td"),w=T("div"),p=_t(v),y=H(),b=T("td"),g=T("div"),_=Xt("svg"),N=H(),I=T("td"),P=T("div"),$=T("div"),B=_t(D),A=H(),x=T("td"),E=T("div"),z=Xt("svg"),G=H(),O=T("td"),K=T("div"),Z=_t(W),pt=H(),R=T("td"),X=T("div"),V=Xt("svg"),Q=H(),Y=T("td"),j=T("div"),st=T("div"),ft=_t(U),nt=H(),ht=T("td"),yt=T("div"),J=Xt("svg"),jt=H(),zt=T("td"),Ve=T("div"),Rt=T("div"),dn=_t(xe),ke=H(),Pt=T("tr"),Gt=T("td"),Jt=T("div"),Qt=T("div"),Yt=T("div"),Yt.innerHTML='<span class="name-label">Sample Sentences</span>',gn=H(),Ue=T("div"),tt&&tt.c(),Me=H(),kt=T("div"),Wn=H(),te=T("div"),Dt=T("div"),oe=T("div"),wt=T("span"),wt.textContent="Keywords",Ii=H(),ce=T("span"),Bt=H(),xt=T("div"),xt.textContent="Show Details",Zn=H(),je=T("div"),lt=T("div"),Ot&&Ot.c(),ot=H(),k(r,"class","cell cell-label svelte-1crkzsa"),k(r,"title",l=e[38].displayName),k(i,"class","td-name svelte-1crkzsa"),k(f,"class","cell-svg cell-svg-log-count svelte-1crkzsa"),k(f,"id",h=`cell-log-count-${e[38].fileName}`),k(u,"class","cell cell-plot svelte-1crkzsa"),k(o,"class","td-log-count td-plot svelte-1crkzsa"),k(w,"class","cell cell-label log svelte-1crkzsa"),k(m,"class","td-log-count td-label svelte-1crkzsa"),k(_,"class","cell-svg cell-svg-familiarity svelte-1crkzsa"),k(_,"id",M=`cell-familiarity-${e[38].fileName}`),k(g,"class","cell cell-plot svelte-1crkzsa"),k(b,"class","td-familiarity td-plot svelte-1crkzsa"),k(P,"class","cell cell-label log svelte-1crkzsa"),k(I,"class","td-familiarity td-label svelte-1crkzsa"),k(z,"class","cell-svg cell-svg-train-count svelte-1crkzsa"),k(z,"id",F=`cell-train-count-${e[38].fileName}`),k(E,"class","cell cell-plot svelte-1crkzsa"),k(x,"class","td-train-count td-plot svelte-1crkzsa"),k(K,"class","cell cell-label train svelte-1crkzsa"),k(O,"class","td-train-count td-label svelte-1crkzsa"),k(V,"class","cell-svg cell-svg-chrf svelte-1crkzsa"),k(V,"id",q=`cell-chrf-${e[38].fileName}`),k(X,"class","cell cell-plot svelte-1crkzsa"),k(R,"class","td-chrf td-plot svelte-1crkzsa"),k(j,"class","cell cell-label train svelte-1crkzsa"),k(Y,"class","td-chrf td-label svelte-1crkzsa"),k(J,"class","cell-svg cell-svg-ratio svelte-1crkzsa"),k(J,"id",gt=`cell-ratio-${e[38].fileName}`),k(yt,"class","cell cell-plot svelte-1crkzsa"),k(ht,"class","td-ratio td-plot svelte-1crkzsa"),k(Ve,"class","cell cell-label svelte-1crkzsa"),k(zt,"class","td-ratio td-label svelte-1crkzsa"),k(n,"class","hoverrable svelte-1crkzsa"),at(n,"selected",((Kt=e[3])==null?void 0:Kt.selectedSetName)===e[38].fileName),at(n,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),k(Yt,"class","name svelte-1crkzsa"),k(Ue,"class","sentence-list svelte-1crkzsa"),k(Qt,"class","sentence-block svelte-1crkzsa"),k(kt,"class","separator svelte-1crkzsa"),k(wt,"class","name-label"),k(ce,"class","svg-icon icon-info svelte-1crkzsa"),k(oe,"class","name-left svelte-1crkzsa"),k(xt,"class","detail-button svelte-1crkzsa"),k(Dt,"class","name svelte-1crkzsa"),k(lt,"class","keyword-wrapper svelte-1crkzsa"),k(je,"class","keyword-grid svelte-1crkzsa"),k(te,"class","keyword-block svelte-1crkzsa"),k(Jt,"class","detail-content svelte-1crkzsa"),k(Gt,"colspan","11"),k(Gt,"class","svelte-1crkzsa"),at(Gt,"hidden",((bt=e[3])==null?void 0:bt.selectedSetName)!==e[38].fileName),k(Pt,"class","detail-row svelte-1crkzsa"),at(Pt,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),this.first=n},m(Kt,bt){it(Kt,n,bt),S(n,i),S(i,r),S(r,a),S(n,c),S(n,o),S(o,u),S(u,f),S(n,d),S(n,m),S(m,w),S(w,p),S(n,y),S(n,b),S(b,g),S(g,_),S(n,N),S(n,I),S(I,P),S(P,$),S($,B),S(n,A),S(n,x),S(x,E),S(E,z),S(n,G),S(n,O),S(O,K),S(K,Z),S(n,pt),S(n,R),S(R,X),S(X,V),S(n,Q),S(n,Y),S(Y,j),S(j,st),S(st,ft),S(n,nt),S(n,ht),S(ht,yt),S(yt,J),S(n,jt),S(n,zt),S(zt,Ve),S(Ve,Rt),S(Rt,dn),it(Kt,ke,bt),it(Kt,Pt,bt),S(Pt,Gt),S(Gt,Jt),S(Jt,Qt),S(Qt,Yt),S(Qt,gn),S(Qt,Ue),tt&&tt.m(Ue,null),S(Jt,Me),S(Jt,kt),S(Jt,Wn),S(Jt,te),S(te,Dt),S(Dt,oe),S(oe,wt),S(oe,Ii),S(oe,ce),ce.innerHTML=Aa,S(Dt,Bt),S(Dt,xt),S(te,Zn),S(te,je),S(je,lt),Ot&&Ot.m(lt,null),S(Pt,ot),vt||(Re=[ct(n,"click",Ei),ct(ce,"mouseenter",e[25]),ct(ce,"mouseleave",e[26]),ct(xt,"click",ue)],vt=!0)},p(Kt,bt){var Ia,Ea;e=Kt,bt[0]&128&&s!==(s=e[38].displayName+"")&&Nt(a,s),bt[0]&128&&l!==(l=e[38].displayName)&&k(r,"title",l),bt[0]&128&&h!==(h=`cell-log-count-${e[38].fileName}`)&&k(f,"id",h),bt[0]&128&&v!==(v=e[38].logCount+"")&&Nt(p,v),bt[0]&128&&M!==(M=`cell-familiarity-${e[38].fileName}`)&&k(_,"id",M),bt[0]&128&&D!==(D=(e[38].familiarity===void 0?"0.00":e[8](e[38].familiarity))+"")&&Nt(B,D),bt[0]&128&&F!==(F=`cell-train-count-${e[38].fileName}`)&&k(z,"id",F),bt[0]&128&&W!==(W=e[38].trainCount+"")&&Nt(Z,W),bt[0]&128&&q!==(q=`cell-chrf-${e[38].fileName}`)&&k(V,"id",q),bt[0]&128&&U!==(U=(e[38].chrf===void 0?"N/A":e[8](e[38].chrf))+"")&&Nt(ft,U),bt[0]&128&&gt!==(gt=`cell-ratio-${e[38].fileName}`)&&k(J,"id",gt),bt[0]&128&&xe!==(xe=e[38].trainLogRatio===void 0?"0.00":`${Math.floor(e[38].trainLogRatio*100)}%`)&&Nt(dn,xe),bt[0]&136&&at(n,"selected",((Ia=e[3])==null?void 0:Ia.selectedSetName)===e[38].fileName),bt[0]&164&&at(n,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),e[3]!==null?tt?tt.p(e,bt):(tt=oo(e),tt.c(),tt.m(Ue,null)):tt&&(tt.d(1),tt=null),e[3]!==null?Ot?Ot.p(e,bt):(Ot=uo(e),Ot.c(),Ot.m(lt,null)):Ot&&(Ot.d(1),Ot=null),bt[0]&136&&at(Gt,"hidden",((Ea=e[3])==null?void 0:Ea.selectedSetName)!==e[38].fileName),bt[0]&164&&at(Pt,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName))},d(Kt){Kt&&et(n),Kt&&et(ke),Kt&&et(Pt),tt&&tt.d(),Ot&&Ot.d(),vt=!1,Et(Re)}}}function go(t){let e;return{c(){e=T("div"),e.innerHTML=`<span class="loader-label svelte-1crkzsa">Loading</span> 
      <span class="loader svelte-1crkzsa"></span>`,k(e,"class","loading-placeholder svelte-1crkzsa")},m(n,i){it(n,e,i)},d(n){n&&et(e)}}}function po(t){let e;return{c(){e=T("div"),e.innerHTML='<span class="loader-label svelte-1crkzsa">No challenge set found</span>',k(e,"class","empty-placeholder svelte-1crkzsa")},m(n,i){it(n,e,i)},d(n){n&&et(e)}}}function R2(t){let e,n,i,r,s,a,l=[],c=new V2,o,u,f=t[7].headers,h=[];for(let p=0;p<f.length;p+=1)h[p]=lo(ao(t,f,p));let d=t[7].challengeSets;const m=p=>p[38].fileName;for(let p=0;p<d.length;p+=1){let y=io(t,d,p),b=m(y);c.set(b,l[p]=fo(b,y))}let w=!t[1]&&go(),v=t[6]&&po();return{c(){e=T("div"),n=T("table"),i=T("thead"),r=T("tr");for(let p=0;p<h.length;p+=1)h[p].c();s=H(),a=T("tbody");for(let p=0;p<l.length;p+=1)l[p].c();o=H(),w&&w.c(),u=H(),v&&v.c(),k(r,"class","svelte-1crkzsa"),k(i,"class","svelte-1crkzsa"),k(n,"class","table svelte-1crkzsa"),k(e,"class","table-view-wrapper svelte-1crkzsa")},m(p,y){it(p,e,y),S(e,n),S(n,i),S(i,r);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(r,null);S(n,s),S(n,a);for(let b=0;b<l.length;b+=1)l[b]&&l[b].m(a,null);S(e,o),w&&w.m(e,null),S(e,u),v&&v.m(e,null),t[28](e)},p(p,y){if(y[0]&7320){f=p[7].headers;let b;for(b=0;b<f.length;b+=1){const g=ao(p,f,b);h[b]?h[b].p(g,y):(h[b]=lo(g),h[b].c(),h[b].m(r,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=f.length}y[0]&940&&(d=p[7].challengeSets,l=ih(l,y,m,1,p,d,c,a,nh,fo,null,io)),p[1]?w&&(w.d(1),w=null):w||(w=go(),w.c(),w.m(e,u)),p[6]?v||(v=po(),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:St,o:St,d(p){p&&et(e),ye(h,p);for(let y=0;y<l.length;y+=1)l[y].d();w&&w.d(),v&&v.d(),t[28](null)}}}function B2(t,e,n){let{tooltipStore:i=null}=e,{challengeStore:r=null}=e,s=Kn(),a=!1,l=!1,c=null,o=!1,u=null;const f=new Map;let h={key:ut.logCount,direction:"down"};const d=L.format(".2f"),m=L.format(".4f");L.format(",%");let w=new Set([]),v=!1,p=null,b={headers:[{displayName:"Challenge Set",key:ut.displayName},{displayName:"Log Count",key:ut.logCount},{displayName:"Familiarity",key:ut.familiarity},{displayName:"Train Count",key:ut.trainCount},{displayName:"ChrF",key:ut.chrf},{displayName:"Train Ratio",key:ut.trainLogRatio}],challengeSets:[]};const g=()=>{n(3,u)},_=()=>{n(7,b)},M=async()=>{console.time("Reading challenge sets"),p=await caches.open("cache");const R=await L.json("./data/challenge-sets.json");if(R===void 0){console.error("Cannot load table meta data.");return}for(const X of R.challengeSets)try{let V;const q=`./data/challenge-set/${X.fileName}.json`,Q=await p.match(q);if(Q)V=await Q.json();else{await p.add(q);const nt=await p.match(q);V=await(nt==null?void 0:nt.json())}X.count=V.source.length,X.trainCount=V.train.reduce((nt,ht)=>nt+ht),X.logCount=X.count-X.trainCount;const Y=V.train.reduce((nt,ht)=>nt+ht);X.trainLogRatio=Y/X.count;const j=V.chrf.reduce((nt,ht)=>(nt===null?0:nt)+(ht===null?0:ht)),st=V.chrf.filter(nt=>nt!==null).length;st===0?X.chrf=void 0:X.chrf=j/st;const U=V.familiarity.reduce((nt,ht)=>(nt===null?0:nt)+(ht===null?0:ht)),ft=V.familiarity.filter(nt=>nt!==null).length;X.familiarity=U/ft,b.challengeSets.push(X),f.set(X.fileName,V)}catch(V){console.error(V)}console.timeEnd("Reading challenge sets"),N(b.challengeSets,h.key,h.direction),_(),n(16,l=!0)},N=(R,X,V)=>{switch(X){case ut.displayName:{R.sort((q,Q)=>V==="up"?q.displayName.localeCompare(Q.displayName):-q.displayName.localeCompare(Q.displayName));break}case ut.trainCount:{R.sort((q,Q)=>V==="up"?q.trainCount-Q.trainCount:Q.trainCount-q.trainCount);break}case ut.logCount:{R.sort((q,Q)=>V==="up"?q.logCount-Q.logCount:Q.logCount-q.logCount);break}case ut.chrf:{R.sort((q,Q)=>V==="up"?(q.chrf?q.chrf:0)-(Q.chrf?Q.chrf:0):(Q.chrf?Q.chrf:0)-(q.chrf?q.chrf:0));break}case ut.familiarity:{R.sort((q,Q)=>V==="up"?(q.familiarity?q.familiarity:0)-(Q.familiarity?Q.familiarity:0):(Q.familiarity?Q.familiarity:0)-(q.familiarity?q.familiarity:0));break}case ut.trainLogRatio:R.sort((q,Q)=>V==="up"?(q.trainLogRatio?q.trainLogRatio:0)-(Q.trainLogRatio?Q.trainLogRatio:0):(Q.trainLogRatio?Q.trainLogRatio:0)-(q.trainLogRatio?q.trainLogRatio:0))}},I=(R,X)=>{n(4,h.key=X.key,h),n(4,h.direction=R,h),n(4,h),N(b.challengeSets,h.key,h.direction),_()},P=R=>{h.key===R.key?h.direction==="up"?n(4,h.direction="down",h):n(4,h.direction="up",h):(n(4,h.key=R.key,h),n(4,h.direction="up",h)),n(4,h),N(b.challengeSets,h.key,h.direction),_()},$=R=>{let X;n(6,v=!1),R!==null?X=L.select(R.target).property("value"):X="",w.clear();let V=!0;for(const q of b.challengeSets)q.fileName.toLowerCase().includes(X.toLowerCase())&&(w.add(q.fileName),V=!1);X!==""&&V&&(w.add("■"),n(6,v=!0)),n(5,w)};Cr(async()=>{await M(),n(15,a=!0)});const D=()=>{a&&c&&i&&r&&l&&(r.subscribe(R=>{n(2,s=R)}),n(1,o=!0),n(3,u=new F2({component:c,myTableViewUpdated:g,challengeSets:b.challengeSets,challengeSetDataMap:f,tooltipStore:i,challengeStore:r})))},B=R=>P(R),A=R=>I("up",R),x=R=>I("down",R),E=R=>$(R),z=(R,X)=>u==null?void 0:u.headerMouseenter(X,R),F=(R,X)=>u==null?void 0:u.headerMouseleave(X,R),G=R=>{u==null||u.rowClicked(R)},O=(R,X,V)=>{n(3,X[V].showHyp=!R.showHyp,u)},K=R=>u==null?void 0:u.filterHelperMouseenter(R,"keyword"),W=R=>u==null?void 0:u.filterHelperMouseleave(R),Z=R=>u==null?void 0:u.showDetailClicked(R);function pt(R){He[R?"unshift":"push"](()=>{c=R,n(0,c)})}return t.$$set=R=>{"tooltipStore"in R&&n(13,i=R.tooltipStore),"challengeStore"in R&&n(14,r=R.challengeStore)},t.$$.update=()=>{t.$$.dirty[0]&122883&&a&&!o&&c&&i&&r&&l&&D()},[c,o,s,u,h,w,v,b,d,m,I,P,$,i,r,a,l,B,A,x,E,z,F,G,O,K,W,Z,pt]}class O2 extends On{constructor(e){super(),Bn(this,e,B2,R2,cn,{tooltipStore:13,challengeStore:14},null,[-1,-1])}}class q2{constructor({component:e,tooltipStore:n,timelineStore:i,padding:r,dateCount:s}){C(this,"component");C(this,"svg");C(this,"brush",null);C(this,"dateCount");C(this,"padding");C(this,"xAxisHeight",15);C(this,"width");C(this,"height");C(this,"bandwidth",0);C(this,"transformK",1);C(this,"xScale",null);C(this,"orgXScale",null);C(this,"xScaleBand",null);C(this,"yScale",null);C(this,"xAxis",null);C(this,"brushSelection",null);C(this,"tooltipStore");C(this,"tooltipStoreValue");C(this,"timelineStore");C(this,"timelineStoreValue");C(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e})});C(this,"initDensityPlot",async()=>{let e;if(this.dateCount)e=this.dateCount;else{const f=await L.json("./data/daily-count-202203.json");if(f===void 0){console.error("Cannot load density data.");return}e=f.map(h=>{const d=/(\d{4})(\d{2})(\d{2})/;return{date:new Date(String(h[0]).replace(d,"$1-$2-$3")),count:h[1]}}).sort((h,d)=>h.date<d.date?-1:1)}const n=this.svg.select("g.content"),i=L.extent(e,f=>f.date);i[0]=new Date(new Date(i[0].valueOf()).setDate(i[0].getDate()-1)),i[1]=new Date(new Date(i[1].valueOf()).setDate(i[1].getDate()+1));const r=n.append("g").attr("class","density-group");this.xScale=L.scaleUtc().domain(i).range([0,this.width]),this.orgXScale=L.scaleUtc().domain(i).range([0,this.width]);const s=[];for(let f=i[0];f<=i[1];f.setDate(f.getDate()+1))s.push(f.toDateString());this.xScaleBand=L.scaleBand().domain(s).range([0,this.width]).padding(.3),this.yScale=L.scaleLinear().domain([0,L.max(e,f=>f.count)]).range([this.height-this.xAxisHeight,0]),this.bandwidth=this.xScaleBand.bandwidth(),r.selectAll("rect.density-bar").data(e).join("rect").attr("class","density-bar").attr("x",f=>this.xScale(f.date)-this.bandwidth/2).attr("y",f=>this.yScale(f.count)).attr("width",this.bandwidth).attr("height",f=>this.height-this.xAxisHeight-this.yScale(f.count)),r.clone(!0).lower().attr("class","density-group-clone").selectAll("rect.density-bar").data(e),this.xAxis=L.axisBottom(this.xScale);const a=n.append("g").attr("class","x-axis-group").attr("transform",`translate(0, ${this.height-this.xAxisHeight})`).style("cursor","inherent").call(this.xAxis),c=a.select("path.domain").node().getBoundingClientRect();a.selectAll("g.tick").each((f,h,d)=>{const m=d[h],w=m.getBoundingClientRect();w.x<c.x&&m.remove(),w.x+w.width>c.x+c.width&&m.remove()});const o=L.zoom().scaleExtent([1,4]).translateExtent([[0,0],[this.width,this.height]]).extent([[0,0],[this.width,this.height]]).on("zoom",this.zoomed);this.svg.call(o),this.svg.on("dblclick.zoom",null),this.svg.on("dblclick",()=>{this.svg.transition("reset").duration(750).ease(L.easeCubicInOut).call(f=>o.transform(f,L.zoomIdentity)),this.removeOutOfBoundAxisLabels(a)}),this.svg.style("cursor","default"),this.brush=L.brushX().extent([[this.padding.left,0],[this.width+this.padding.left,this.height-this.xAxisHeight+this.padding.top-1]]).on("brush",this.brushed).on("end",this.brushEnd);const u=this.svg.append("g").attr("class","timeline-brush-group").call(this.brush);u.on("mousemove",f=>{const h=u.node().getBoundingClientRect(),d=f.clientX-h.x,m=L.utcFormat("%B %d (%a), %Y"),w=L.format(".2f");this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",v=>{const p=this.xScale(v.date);let y=!1;return d-this.xScaleBand.bandwidth()*this.transformK/2<p&&d+this.xScaleBand.bandwidth()*this.transformK/2>p?y=!0:y=!1,y&&(this.dateCount?this.tooltipStoreValue.html=`<div class="tb"><span class="date">              ${m(v.date)}</span>              <span class="count">${v.count}               requests</span>              </div>
            `:this.tooltipStoreValue.html=`<div class="tb"><span class="date">              ${m(v.date)}</span>              <span class="count">${w(v.count*100/1e6)}M               requests</span>              </div>
            `,this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=h.y,this.tooltipStoreValue.left=p+h.x,this.tooltipStore.set(this.tooltipStoreValue)),y})}),u.on("mouseleave",()=>{this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)}),u.on("mousedown",f=>{f.stopPropagation()})});C(this,"updateDateCount",e=>{const i=this.svg.select("g.content").select("g.density-group"),r=L.transition("update").duration(200);i.selectAll("rect.density-bar").data(e).attr("x",s=>this.xScale(s.date)-this.bandwidth/2).attr("width",this.bandwidth).transition(r).attr("y",s=>this.yScale(s.count)).attr("height",s=>this.height-this.xAxisHeight-this.yScale(s.count))});C(this,"zoomed",e=>{const n=e.transform,i=this.svg.select("g.content"),r=i.select(".x-axis-group");this.transformK=n.k,this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),this.xScale=n.rescaleX(this.orgXScale),this.xAxis.scale(this.xScale),r.call(this.xAxis),this.bandwidth=this.xScaleBand.bandwidth()*n.k,i.select(".density-group").selectAll("rect.density-bar").attr("x",l=>this.xScale(l.date)-this.bandwidth/2).attr("width",this.bandwidth),i.select(".density-group-clone").selectAll("rect.density-bar").attr("x",l=>this.xScale(l.date)-this.bandwidth/2).attr("width",this.bandwidth),this.removeOutOfBoundAxisLabels(r),n.k>1?this.svg.style("cursor","move"):this.svg.style("cursor","default"),this.brushSelection!==null&&this.brushSelectionChanged()});C(this,"brushSelectionChanged",()=>{const e=[];this.brushSelection!==null&&this.svg.select(".density-group").selectAll("rect.density-bar").classed("selected",r=>{const s=this.xScale(r.date);return s>=this.brushSelection[0]&&s<this.brushSelection[1]?(e.push(r.date),!0):!1});const n=L.utcFormat("%Y%m%d"),i=e.map(n);H2(new Set(i),new Set(this.timelineStoreValue.selectedDates))||(this.timelineStoreValue.selectedDates=i,this.timelineStore.set(this.timelineStoreValue))});C(this,"brushed",e=>{e.selection!==null&&(this.brushSelection=e.selection.map(n=>n-this.padding.left),this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),this.brushSelectionChanged())});C(this,"brushEnd",e=>{e.selection===null&&(this.svg.select(".density-group").selectAll("rect.density-bar").classed("selected",!1),this.brushSelection=null,this.brushSelectionChanged())});C(this,"brushClear",()=>{this.brush&&this.svg.select("g.timeline-brush-group").call(e=>{this.brush.move(e,null)})});C(this,"removeOutOfBoundAxisLabels",e=>{const i=e.select("path.domain").node().getBoundingClientRect();e.selectAll("g.tick").each((r,s,a)=>{const l=a[s],c=l.getBoundingClientRect();c.x<i.x&&l.remove(),c.x+c.width>i.x+i.width&&l.remove()})});this.component=e,s?this.dateCount=s:this.dateCount=null,this.svg=L.select(this.component).select("svg.timeline-svg"),this.svg.attr("width","100%").attr("height","100%").attr("viewbox","0 0 600 60").attr("preserveAspectRatio","none"),r?this.padding=r:this.padding={top:20,bottom:7,left:10,right:10};const a=this.svg.node().getBoundingClientRect();this.width=a.width-this.padding.left-this.padding.right,this.height=a.height-this.padding.top-this.padding.bottom,this.tooltipStore=n,this.tooltipStoreValue=Xn(),this.timelineStore=i,this.timelineStoreValue=Br(),this.subscribeStores(),this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),this.initDensityPlot()}}const H2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;for(const n of e)if(!t.has(n))return!1;return!0},Nu=16,We=new Map;We.set(rt.Keyword,"Keywords");We.set(rt.Chrf,"ChrF");We.set(rt.SourceID,"Input Source");We.set(rt.Embedding,"Embeddings");We.set(rt.Familiarity,"Familiarities");We.set(rt.UnitTest,"Unit Tests");let Ks=null,xr=null,vs=0,Xs=null,kr=null,ws=0;function Y2(t){Xs=t;const e={top:65,left:10,right:10,bottom:10},n=20,i=35,r=this.focusSVGs[t].select(".content"),s=19,a=Array(s).fill(0).map((g,_)=>(_+1)*(1/(s+1))),l=!this.focusScales.has("familiarity");if(l){r.append("g").attr("class","bar-group");const g=this.challengeData.familiarity.filter(D=>D!==null),M=L.bin().domain([0,1]).thresholds(a)(g),N=M.map(D=>D.length);M[0].x0!==0&&(M[0].x0=0);const I=L.scaleLinear().domain([0,1]).range([i,this.focusSize.width-e.left-e.right]),P=L.scaleLinear().domain([Math.max(...N),0]).range([e.top,this.focusSize.height-n]),$=r.append("g").attr("class","axis-group");$.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-n})`).call(L.axisBottom(I)),$.append("g").attr("class","y-axis").attr("transform",`translate(${i}, 0)`).call(L.axisLeft(P)),r.append("text").attr("transform",`translate(${i+(this.focusSize.width-e.left-e.right-i)/2}, ${Nu})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("Sample Familiarity Distribution").append("tspan").attr("class","tspan-log").style("font-size","0.92em").attr("dominant-baseline","middle").attr("dy","1.1em").attr("x",0).text(`(${g.length} usage log samples)`),ws=g.length,this.focusScales.set("familiarity",[I,P])}const c=this.focusScales.get("familiarity"),o=c[0],u=c[1],f=r.select("g.bar-group"),h=new Set(this.filteredIndexes),d=this.challengeData.familiarity.filter((g,_)=>h.has(_)).filter(g=>g!==null),w=L.bin().domain([0,1]).thresholds(a)(d),v=this.focusSize.height-n,p=o(a[1])-o(a[0]);w[0].x0!==0&&(w[0].x0=0);const y=L.transition("update-familiarity-focus").duration(200);f.selectAll("g.familiarity-bar").data(w).join(g=>{const _=g.append("g").attr("class","familiarity-bar").attr("transform",M=>`translate(${o(M.x0)}, ${u(M.length)})`);return _.append("rect").attr("class","familiarity-rect").attr("width",p).attr("height",M=>v-u(M.length)),_.append("text").attr("class","bar-label is-left is-log").attr("x",p/2).attr("y",-3).style("text-anchor","middle").style("opacity",M=>M.length===0?0:1).text(M=>M.length),_},g=>(g.transition(y).attr("transform",_=>`translate(${o(_.x0)}, ${u(_.length)})`),g.select("rect").transition(y).attr("height",_=>v-u(_.length)),g.select("text").style("opacity",_=>_.length===0?0:1).text(_=>_.length),g),g=>g.remove());let b="";if(d.length===ws?b=`(${d.length} log samples)`:b=`(${d.length} out of ${ws} log samples)`,r.select(".tspan-log").text(b),l){f.clone(!0).lower().attr("class","bar-group-clone");let g=[];const _=N=>{if(N.selection===null)return;const I=[g[0],g[1]];if(g=N.selection.map(P=>{const $=o.invert(P),D=1/(s+1);return Math.floor(Math.floor($*100)/(D*100))*D}),g[0]!==I[0]||g[1]!==I[1]){this.filters.familiarity=[];for(const[P,$]of this.challengeData.familiarity.entries())$!==null&&$>=g[0]&&$<=g[1]&&this.filters.familiarity.push(P);this.syncFilters()}},M=N=>{N.selection===null&&(this.filters.familiarity=[],this.syncFilters())};kr=L.brushX().extent([[this.focusPadding.left+i,this.focusPadding.top+e.top-1],[this.focusSize.width-e.right-4,this.focusPadding.top+this.focusSize.height-n-1]]).on("brush",_).on("end",M),this.focusSVGs[t].append("g").attr("class","familiarity-brush-group").call(kr)}}function G2(){Xs&&kr&&this.focusSVGs[Xs].select("g.familiarity-brush-group").call(t=>kr.move(t,null))}function K2(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n=19,i=Array(n).fill(0).map((y,b)=>(b+1)*(1/(n+1))),r=L.bin().domain([0,1]).thresholds(i),s={top:5,left:5,right:0,bottom:5},a=5,l=5,c=!this.thumbnailScales.has("familiarity");if(c){this.thumbnailLabels[t].text(We.get(rt.Familiarity)),e.append("g").attr("class","bar-group");const y=this.challengeData.familiarity.filter(I=>I!==null),g=r(y).map(I=>I.length),_=L.scaleLinear().domain([0,1]).range([l,this.thumbnailSize.width-s.left-s.right]),M=L.scaleLinear().domain([Math.max(...g),0]).range([s.top,this.thumbnailSize.height-a]),N=e.append("g").attr("class","axis-group").style("opacity",.6);N.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-a})`).call(L.axisBottom(_).tickValues([])),N.append("g").attr("class","y-axis").attr("transform",`translate(${l}, 0)`).call(L.axisLeft(M).tickValues([])),this.thumbnailScales.set("familiarity",[_,M])}const o=e.select("g.bar-group"),u=this.thumbnailScales.get("familiarity"),f=u[0],h=u[1],d=new Set(this.filteredIndexes),m=this.challengeData.familiarity.filter((y,b)=>d.has(b)).filter(y=>y!==null),w=r(m),v=this.thumbnailSize.height-a,p=f(i[1])-f(i[0]);w[0].x0!==0&&(w[0].x0=0),o.selectAll("g.familiarity-bar").data(w).join(y=>{const b=y.append("g").attr("class","familiarity-bar").attr("transform",g=>`translate(${f(g.x0)}, ${h(g.length)})`);return b.append("rect").attr("class","familiarity-rect").attr("width",p).attr("height",g=>v-h(g.length)),b},y=>(y.transition("update-familiarity-thumbnail").duration(200).attr("transform",b=>`translate(${f(b.x0)}, ${h(b.length)})`),y.select("rect").transition("update-familiarity-thumbnail").duration(200).attr("height",b=>v-h(b.length)),y),y=>y.remove()),c&&o.clone(!0).lower().attr("class","bar-group-clone")}function X2(t){Ks=t;const e=this.focusSVGs[t].select(".content"),n=19,i=Array(n).fill(0).map((g,_)=>(_+1)*(1/(n+1))),r=L.bin().domain([0,1]).thresholds(i),s={top:65,left:10,right:10,bottom:10},a=20,l=35,c=!this.focusScales.has("chrf");if(c){e.append("g").attr("class","bar-group");const g=this.challengeData.chrf.filter($=>$!==null),_=r(g);_[0].x0!==0&&(_[0].x0=0);const M=_.map($=>$.length),N=L.scaleLinear().domain([0,1]).range([l,this.focusSize.width-s.left-s.right]),I=L.scaleLinear().domain([Math.max(...M),0]).range([s.top,this.focusSize.height-a]),P=e.append("g").attr("class","axis-group");P.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-a})`).call(L.axisBottom(N)),P.append("g").attr("class","y-axis").attr("transform",`translate(${l}, 0)`).call(L.axisLeft(I)),e.append("text").attr("transform",`translate(${l+(this.focusSize.width-s.left-s.right-l)/2}, ${Nu})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("ChrF Score Distribution").append("tspan").attr("class","tspan-train").style("font-size","0.92em").attr("dominant-baseline","middle").attr("dy","1.1em").attr("x",0).text(`(${g.length} training samples)`),vs=g.length,this.focusScales.set("chrf",[N,I])}const o=this.focusScales.get("chrf"),u=o[0],f=o[1],h=new Set(this.filteredIndexes),d=this.challengeData.chrf.filter((g,_)=>h.has(_)).filter(g=>g!==null);let m=r(d);m[0].x0!==0&&(m[0].x0=0);const w=e.select("g.bar-group"),v=this.focusSize.height-a,p=u(i[1])-u(i[0]),y=L.transition("update-chrf-focus").duration(200);d.length===0&&(m=[]),w.selectAll("g.chrf-bar").data(m).join(g=>{const _=g.append("g").attr("class","chrf-bar").attr("transform",M=>`translate(${u(M.x0)}, ${f(M.length)})`);return _.append("rect").attr("class","chrf-rect").attr("width",p).attr("height",M=>v-f(M.length)),_.append("text").attr("class","bar-label is-left is-train").attr("x",p/2).attr("y",-3).style("text-anchor","middle").style("opacity",M=>M.length===0?0:1).text(M=>M.length),_},g=>(g.transition(y).attr("transform",_=>`translate(${u(_.x0)}, ${f(_.length)})`),g.select("rect").transition(y).attr("height",_=>v-f(_.length)),g.select("text").style("opacity",_=>_.length===0?0:1).text(_=>_.length),g),g=>g.remove());let b="";if(d.length===vs?b=`(${d.length} training samples)`:b=`(${d.length} out of ${vs} training samples)`,e.select(".tspan-train").text(b),c){w.clone(!0).lower().attr("class","bar-group-clone");let g=[];const _=N=>{if(N.selection===null)return;const I=[g[0],g[1]];if(g=N.selection.map(P=>{const $=u.invert(P),D=1/(n+1);return Math.floor(Math.floor($*100)/(D*100))*D}),g[0]!==I[0]||g[1]!==I[1]){this.filters.chrf=[];for(const[P,$]of this.challengeData.chrf.entries())$!==null&&$>=g[0]&&$<=g[1]&&this.filters.chrf.push(P);this.syncFilters()}},M=N=>{N.selection===null&&(this.filters.chrf=[],this.syncFilters())};xr=L.brushX().extent([[this.focusPadding.left+l,this.focusPadding.top+s.top-1],[this.focusSize.width-s.right-4,this.focusPadding.top+this.focusSize.height-a-1]]).on("brush",_).on("end",M),this.focusSVGs[t].append("g").attr("class","chrf-brush-group").call(xr)}}function W2(){Ks&&xr&&this.focusSVGs[Ks].select("g.chrf-brush-group").call(t=>xr.move(t,null))}function Z2(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n=19,i=Array(n).fill(0).map((b,g)=>(g+1)*(1/(n+1))),r=L.bin().domain([0,1]).thresholds(i),s={top:5,left:5,right:0,bottom:5},a=5,l=5,c=!this.thumbnailScales.has("chrf");if(c){this.thumbnailLabels[t].text(We.get(rt.Chrf)),e.append("g").attr("class","bar-group");const b=this.challengeData.chrf.filter(P=>P!==null),g=r(b);g[0].x0!==0&&(g[0].x0=0);const _=g.map(P=>P.length),M=L.scaleLinear().domain([0,1]).range([l,this.thumbnailSize.width-s.left-s.right]),N=L.scaleLinear().domain([Math.max(..._),0]).range([s.top,this.thumbnailSize.height-a]),I=e.append("g").attr("class","axis-group").style("opacity",.6);I.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-a})`).call(L.axisBottom(M).tickValues([])),I.append("g").attr("class","y-axis").attr("transform",`translate(${l}, 0)`).call(L.axisLeft(N).tickValues([])),this.thumbnailScales.set("chrf",[M,N])}const o=this.thumbnailScales.get("chrf"),u=o[0],f=o[1],h=e.select("g.bar-group"),d=new Set(this.filteredIndexes),m=this.challengeData.chrf.filter((b,g)=>d.has(g)).filter(b=>b!==null);let w=r(m);w[0].x0!==0&&(w[0].x0=0);const v=this.thumbnailSize.height-a,p=u(i[1])-u(i[0]),y=L.transition("update-chrf-thumbnail").duration(200);m.length===0&&(w=[]),h.selectAll("g.chrf-bar").data(w).join(b=>{const g=b.append("g").attr("class","chrf-bar").attr("transform",_=>`translate(${u(_.x0)}, ${f(_.length)})`);return g.append("rect").attr("class","chrf-rect").attr("width",p).attr("height",_=>v-f(_.length)),g},b=>(b.transition(y).attr("transform",g=>`translate(${u(g.x0)}, ${f(g.length)})`),b.select("rect").transition(y).attr("height",g=>v-f(g.length)),b),b=>b.remove()),c&&h.clone(!0).lower().attr("class","bar-group-clone")}const zu=16,Ze=new Map;Ze.set(rt.Keyword,"Keywords");Ze.set(rt.Chrf,"ChrF");Ze.set(rt.SourceID,"Input Source");Ze.set(rt.Embedding,"Embeddings");Ze.set(rt.Familiarity,"Familiarities");Ze.set(rt.UnitTest,"Unit Tests");const ri=new Map,fe=new Set;let si=0,$u=null,Ws=null,Lu=null,Zs=null;async function j2(t){const e=this.focusSVGs[t].select(".content"),n={top:45,left:10,right:10,bottom:10},i=20,r=90,s=!this.focusScales.has("sourceid");if(s){const p="./data/dataset-id-map.json",y=await caches.open("cache"),b=await y.match(p);if(this.sourceIDMap===null)if(this.sourceIDMap={},b)this.sourceIDMap=await b.json();else{await y.add(p);const D=await y.match(p);this.sourceIDMap=await(D==null?void 0:D.json())}e.append("g").attr("class","bar-group");const g=new Map;for(const D of Object.keys(this.sourceIDMap))g.set(D,0);g.set(null,0);for(const[D,B]of this.challengeData.source_id.entries())this.challengeData.train[D]===0&&g.set(B,g.get(B)+1);const _=[];for(const[D,B]of g.entries()){let A="";D===null?A="Redacted/Others":A=this.sourceIDMap[parseInt(D)][1],ri.has(A)||ri.set(A,D?parseInt(D):null),_.push({id:D,count:B,displayName:A})}_.sort((D,B)=>B.count-D.count);const M=L.extent(_,D=>D.count),N=L.scaleLinear().domain(M).range([r,this.focusSize.width-n.left-n.right]),I=L.scaleBand().domain(_.map(D=>D.displayName)).range([n.top,this.focusSize.height-i]).padding(.2),P=e.append("g").attr("class","axis-group");P.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-i})`).call(L.axisBottom(N));const $=P.append("g").attr("class","y-axis y-axis-cat").attr("transform",`translate(${r}, 0)`).call(L.axisLeft(I));$u=I,Ws=$,$.selectAll(".tick").on("click",(D,B)=>{const A=B,x=ri.get(A);if(fe.has(x)?fe.delete(x):fe.add(x),$.selectAll(".tick").select("text").classed("selected",E=>fe.size===0||fe.has(ri.get(E))),this.filters.sourceID=[],fe.size>0)for(const[E,z]of this.challengeData.source_id.entries())fe.has(z?parseInt(z):null)&&this.filters.sourceID.push(E);this.syncFilters()}).select("text").classed("selected",D=>fe.size===0||fe.has(ri.get(D))),si=[...g.values()].reduce((D,B)=>D+B),e.append("text").attr("transform",`translate(${r+(this.focusSize.width-n.left-n.right-r)/2}, ${zu})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("Input Source Distribution").append("tspan").attr("class","tspan-log").style("font-size","0.92em").attr("dy","1.1em").attr("dominant-baseline","middle").attr("x",0).text(`(${si} usage log samples)`),this.focusScales.set("sourceid",[N,I])}const a=e.select("g.bar-group"),l=new Map;for(const p of Object.keys(this.sourceIDMap))l.set(p,0);l.set(null,0);const c=new Set(this.filteredIndexes);for(const[p,y]of this.challengeData.source_id.entries())c.has(p)&&this.challengeData.train[p]===0&&l.set(y,l.get(y)+1);const o=L.transition("update-sourceid-focus").duration(200),u=[];for(const[p,y]of l.entries()){let b="";p===null?b="Redacted/Others":b=this.sourceIDMap[parseInt(p)][1],u.push({id:p,count:y,displayName:b})}u.sort((p,y)=>y.count-p.count);const f=this.focusScales.get("sourceid"),h=f[0],d=f[1],m=h.domain();a.selectAll("g.count-bar").data(u,p=>p.displayName).join(p=>{const y=p.append("g").attr("class","count-bar").attr("transform",b=>`translate(${r}, ${d(b.displayName)})`);return y.append("rect").attr("class","bar-rect is-log").attr("width",b=>h(b.count)-h(0)).attr("height",d.bandwidth()),y.append("text").attr("class","bar-label is-log").classed("is-left",b=>b.count<=m[1]/2).attr("x",b=>b.count>m[1]/2?h(b.count)-h(0)-5:h(b.count)-h(0)+2).attr("y",d.paddingInner()*d.bandwidth()/2+d.bandwidth()/2).attr("dominant-baseline","baseline").text(b=>b.count),y},p=>(p.transition(o).attr("transform",y=>`translate(${r}, ${d(y.displayName)})`),p.select("rect").transition(o).attr("width",y=>h(y.count)-h(0)),p.select("text").text(y=>y.count).classed("is-left",y=>y.count<=m[1]/2).transition(o).attr("x",y=>y.count>m[1]/2?h(y.count)-h(0)-5:h(y.count)-h(0)+2),p),p=>p.remove());const w=[...l.values()].reduce((p,y)=>p+y);let v="";w===si?v=`(${si} log samples)`:v=`(${w} out of ${si} log samples)`,e.select(".tspan-log").text(v),s&&a.clone(!0).lower().attr("class","bar-group-clone")}function J2(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n={top:5,left:5,right:0,bottom:5},i=5,r=5,s=!this.thumbnailScales.has("sourceid");if(s){this.thumbnailLabels[t].text(Ze.get(rt.SourceID));const m=new Map;m.set(null,0);for(const[g,_]of this.challengeData.source_id.entries())this.challengeData.train[g]!==1&&(m.has(_)?m.set(_,m.get(_)+1):m.set(_,1));const w=[];for(const[g,_]of m.entries()){const M="";w.push({id:g,count:_,displayName:M})}w.sort((g,_)=>_.count-g.count);const v=L.extent([...m.entries()],g=>g[1]),p=L.scaleLinear().domain(v).range([r,this.thumbnailSize.width-n.left-n.right]),y=L.scaleBand().domain(w.map(g=>String(g.id))).range([n.top,this.thumbnailSize.height-i]).padding(.2);e.append("g").attr("class","bar-group");const b=e.append("g").attr("class","axis-group").style("opacity",.6);b.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-i})`).call(L.axisBottom(p).tickValues([])),b.append("g").attr("class","y-axis").attr("transform",`translate(${r}, 0)`).call(L.axisLeft(y).tickValues([])),this.thumbnailScales.set("sourceid",[p,y])}const a=e.select("g.bar-group"),l=this.thumbnailScales.get("sourceid"),c=l[0],o=l[1],u=new Map,f=new Set(this.filteredIndexes);for(const[m,w]of this.challengeData.source_id.entries())this.challengeData.train[m]!==1&&f.has(m)&&(u.has(w)?u.set(w,u.get(w)+1):u.set(w,1));for(const m of this.challengeData.source_id)u.has(m)||u.set(m,0);const h=[];for(const[m,w]of u.entries()){const v="";h.push({id:m,count:w,displayName:v})}h.sort((m,w)=>w.count-m.count);const d=L.transition("update-sourceid-thumbnail").duration(200);a.selectAll("g.count-bar").data(h,m=>{const w=m;return w===null?"redacted":w.id}).join(m=>{const w=m.append("g").attr("class","count-bar").attr("transform",v=>`translate(${r}, ${o(String(v.id))})`);return w.append("rect").attr("class","bar-rect is-log").attr("width",v=>c(v.count)-c(0)).attr("height",o.bandwidth()),w},m=>(m.transition(d).attr("transform",w=>`translate(${r}, ${o(String(w.id))})`),m.select("rect").transition(d).attr("width",w=>c(w.count)-c(0)),m),m=>m.remove()),s&&a.clone(!0).lower().attr("class","bar-group-clone")}function Q2(){$u===null||Ws===null||(fe.clear(),Ws.selectAll(".tick").select("text").classed("selected",!0),this.filters.sourceID=[],this.syncFilters())}async function t5(t){const e=this.focusSVGs[t].select(".content");if(this.intersectionData===null){const y="./data/challenge-set/challenge-intersections.json",b=await caches.open("cache"),g=await b.match(y);if(g)this.intersectionData=await g.json();else{await b.add(y);const _=await b.match(y);this.intersectionData=await(_==null?void 0:_.json())}}const n={top:30,left:10,right:10,bottom:10},i=20,r=this.challengeSet.type==="topic"?120:200,s=!this.focusScales.has("unittest");if(s){e.append("g").attr("class","bar-group");const b=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],g=new Map;for(const A of Object.keys(b))g.set(A,b[A].length);let _=[];const M=new Map;for(const[A,x]of g.entries()){let E=this.challengeSet.type==="topic"?A.replace("challenge-test_",""):A.replace(/challenge-topic-\d+_/,"");M.set(E,A),E.length>35&&(E=E.slice(0,35).concat("...")),_.push({displayName:E,count:x,sampleIndexes:b[A]})}_.sort((A,x)=>x.count-A.count),_=_.slice(0,15);const N=L.extent([...g.entries()],A=>A[1]),I=L.scaleLinear().domain(N).range([r,this.focusSize.width-n.left-n.right]),P=L.scaleBand().domain(_.map(A=>A.displayName)).range([n.top,this.focusSize.height-i]).padding(.2),$=e.append("g").attr("class","axis-group");$.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-i})`).call(L.axisBottom(I));const D=$.append("g").attr("class","y-axis y-axis-cat").attr("transform",`translate(${r}, 0)`).call(L.axisLeft(P));Lu=P,Zs=D;const B=new Set;D.selectAll(".tick").on("click",(A,x)=>{const E=x;if(B.has(E)?B.delete(E):B.add(E),D.selectAll(".tick").select("text").classed("selected",z=>B.size===0||B.has(z)),this.filters.otherSet=[],B.size>0){const z=new Set;for(const F of B){const G=M.get(F);for(const O of b[G])z.add(O)}for(let F=0;F<this.challengeData.source.length;F++)z.has(F)&&this.filters.otherSet.push(F)}this.syncFilters()}).select("text").classed("selected",A=>!B.has(A)),e.append("text").attr("transform",`translate(${r+(this.focusSize.width-n.left-n.right-r)/2}, ${zu})`).style("text-anchor","middle").attr("dominant-baseline","middle").text(this.challengeSet.type==="topic"?"Overlapping with Unit Test Challenge Sets":"Overlapping with Topic Challenge Sets"),this.focusScales.set("unittest",[I,P])}const a=this.focusScales.get("unittest"),l=a[0],c=a[1],o=e.select("g.bar-group"),f=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],h=new Map,d=new Set(this.filteredIndexes);for(const y of Object.keys(f))h.set(y,f[y].filter(b=>d.has(b)).length);let m=[];for(const[y,b]of h.entries()){let g=this.challengeSet.type==="topic"?y.replace("challenge-test_",""):y.replace(/challenge-topic-\d+_/,"");g.length>35&&(g=g.slice(0,35).concat("...")),m.push({displayName:g,count:b,sampleIndexes:f[y]})}m.sort((y,b)=>b.count-y.count);const w=new Set(c.domain());m=m.filter(y=>w.has(y.displayName));const v=l.domain(),p=L.transition("update-test-focus").duration(200);o.selectAll("g.count-bar").data(m,y=>y.displayName).join(y=>{const b=y.append("g").attr("class","count-bar").attr("transform",g=>`translate(${r}, ${c(g.displayName)})`);return b.append("rect").attr("class","bar-rect").attr("width",g=>l(g.count)-l(0)).attr("height",c.bandwidth()),b.append("text").attr("class","bar-label").classed("is-left",g=>g.count<=v[1]/2).attr("x",g=>g.count>v[1]/2?l(g.count)-l(0)-5:l(g.count)-l(0)+2).attr("y",c.paddingInner()*c.bandwidth()/2+c.bandwidth()/2).attr("dominant-baseline","baseline").text(g=>g.count),b},y=>(y.transition(p).attr("transform",b=>`translate(${r}, ${c(b.displayName)})`),y.select("rect").transition(p).attr("width",b=>l(b.count)-l(0)),y.select("text").classed("is-left",b=>b.count<=v[1]/2).text(b=>b.count).transition(p).attr("x",b=>b.count>v[1]/2?l(b.count)-l(0)-5:l(b.count)-l(0)+2),y),y=>y.remove()),s&&o.clone(!0).lower().attr("class","bar-group-clone")}async function e5(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n={top:5,left:5,right:0,bottom:5},i=5,r=5;if(this.intersectionData===null){const p="./data/challenge-set/challenge-intersections.json",y=await caches.open("cache"),b=await y.match(p);if(b)this.intersectionData=await b.json();else{await y.add(p);const g=await y.match(p);this.intersectionData=await(g==null?void 0:g.json())}}const a=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],l=!this.thumbnailScales.has("unittest");if(l){this.challengeSet.type!=="topic"?this.thumbnailLabels[t].text("Topics"):this.thumbnailLabels[t].text(Ze.get(rt.UnitTest));const p=new Map;for(const N of Object.keys(a))p.set(N,a[N].length);let y=[];for(const[N,I]of p.entries()){const P=N.replace("challenge-test_","");y.push({displayName:P,count:I,sampleIndexes:a[N]})}y.sort((N,I)=>I.count-N.count),y=y.slice(0,15);const b=L.extent([...p.entries()],N=>N[1]),g=L.scaleLinear().domain(b).range([r,this.thumbnailSize.width-n.left-n.right]),_=L.scaleBand().domain(y.map(N=>String(N.displayName))).range([n.top,this.thumbnailSize.height-i]).padding(.2);e.append("g").attr("class","bar-group");const M=e.append("g").attr("class","axis-group").style("opacity",.6);M.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-i})`).call(L.axisBottom(g).tickValues([])),M.append("g").attr("class","y-axis").attr("transform",`translate(${r}, 0)`).call(L.axisLeft(_).tickValues([])),this.thumbnailScales.set("unittest",[g,_])}const c=e.select("g.bar-group"),o=this.thumbnailScales.get("unittest"),u=o[0],f=o[1],h=new Map,d=new Set(this.filteredIndexes);for(const p of Object.keys(a))h.set(p,a[p].filter(y=>d.has(y)).length);let m=[];for(const[p,y]of h.entries()){const b=p.replace("challenge-test_","");m.push({displayName:b,count:y,sampleIndexes:a[p]})}m.sort((p,y)=>y.count-p.count);const w=new Set(f.domain());m=m.filter(p=>w.has(p.displayName));const v=L.transition("update-test-thumbnail").duration(200);c.selectAll("g.count-bar").data(m,p=>p.displayName).join(p=>{const y=p.append("g").attr("class","count-bar").attr("transform",b=>`translate(${r}, ${f(String(b.displayName))})`);return y.append("rect").attr("class","bar-rect").attr("width",b=>u(b.count)-u(0)).attr("height",f.bandwidth()),y},p=>(p.transition(v).attr("transform",y=>`translate(${r}, ${f(String(y.displayName))})`),p.select("rect").transition(v).attr("width",y=>u(y.count)-u(0)),p),p=>p.remove()),l&&c.clone(!0).lower().attr("class","bar-group-clone")}function n5(){Lu===null||Zs===null||(this.filters.otherSet=[],Zs.selectAll(".tick").select("text").classed("selected",!0),this.syncFilters())}let Hi=null;const se=new Map;se.set(rt.Keyword,"Keywords");se.set(rt.Chrf,"ChrF");se.set(rt.SourceID,"Input Source");se.set(rt.Embedding,"Embeddings");se.set(rt.Familiarity,"Familiarities");se.set(rt.UnitTest,"Unit Tests");const Ke=new Map;Ke.set(rt.Keyword,Fe.colors["pink-200"]);Ke.set(rt.Chrf,Fe.colors["blue-200"]);Ke.set(rt.SourceID,Fe.colors["green-200"]);Ke.set(rt.Embedding,Fe.colors["orange-200"]);Ke.set(rt.Familiarity,Fe.colors["purple-200"]);Ke.set(rt.UnitTest,Fe.colors["yellow-200"]);class i5{constructor({component:e,challengeSet:n,challengeData:i,mySetViewUpdated:r,tooltipStore:s,challengeStore:a,timelineStore:l,embeddingSettingStore:c}){C(this,"component");C(this,"challengeSet");C(this,"challengeData");C(this,"curKeywords");C(this,"mySetViewUpdated");C(this,"trainingCount",0);C(this,"logCount",0);C(this,"countLabel");C(this,"tooltipStore");C(this,"tooltipStoreValue");C(this,"challengeStore");C(this,"challengeStoreValue");C(this,"timelineStore");C(this,"timelineStoreValue");C(this,"embeddingSettingStore");C(this,"embeddingSettingStoreValue");C(this,"selectedSetName","");C(this,"selectedSetSentences",[]);C(this,"selectedSetKeywords",[]);C(this,"editMode",!1);C(this,"timeline");C(this,"curSentences",[]);C(this,"filteredIndexes",[]);C(this,"filters",{date:[],keyword:[],embedding:[],chrf:[],familiarity:[],sourceID:[],otherSet:[],search:[]});C(this,"filterSearchMatchIndexes",new Map);C(this,"filterKeywordMatchIndexes",new Map);C(this,"filterTags",[]);C(this,"focusScales",new Map);C(this,"thumbnailScales",new Map);C(this,"sourceIDMap",null);C(this,"intersectionData",null);C(this,"focusSVGs");C(this,"thumbnailSVGs");C(this,"focusLabel");C(this,"thumbnailLabels");C(this,"focusPadding");C(this,"thumbnailPadding");C(this,"focusSize");C(this,"thumbnailSize");C(this,"curPlotTypes");C(this,"curSelectedThumbnailID",0);C(this,"curSelectedKeywords",new Set);C(this,"drawFamiliarityFocus",Y2);C(this,"drawFamiliarityThumbnail",K2);C(this,"resetFamiliarityPlots",G2);C(this,"drawChrfFocus",X2);C(this,"drawChrfThumbnail",Z2);C(this,"resetChrfPlots",W2);C(this,"drawSourceIDFocus",j2);C(this,"drawSourceIDThumbnail",J2);C(this,"resetSourceIDPlots",Q2);C(this,"drawUnitTestFocus",t5);C(this,"drawUnitTestThumbnail",e5);C(this,"resetUnitTestPlots",n5);C(this,"initDateCountData",()=>{const e=new Map,n=/(\d{4})(\d{2})(\d{2})/;for(const r of this.challengeData.date)r!==null&&(e.has(r)?e.set(r,e.get(r)+1):e.set(r,1));return[...e.entries()].map(([r,s])=>({date:new Date(String(r).replace(n,"$1-$2-$3")),count:s})).sort((r,s)=>r.date<s.date?-1:1)});C(this,"getCurDateCountData",()=>{const e=new Map;for(const r of this.timeline.dateCount){const s=parseInt(`${r.date.getUTCFullYear()}${(r.date.getUTCMonth()+1).toString().padStart(2,"0")}${r.date.getUTCDate().toString().padStart(2,"0")}`);e.set(s,0)}const n=/(\d{4})(\d{2})(\d{2})/;for(const r of this.filteredIndexes){const s=this.challengeData.date[r];s!==null&&e.set(s,e.get(s)+1)}return[...e.entries()].map(([r,s])=>({date:new Date(String(r).replace(n,"$1-$2-$3")),count:s})).sort((r,s)=>r.date<s.date?-1:1)});C(this,"initializeKeywords",()=>{const e=[];let n=[];for(const[l,c]of this.challengeData.keywords)e.push({word:l,value:c});n=e.slice(0,50);const r=L.extent(n,l=>l.value),s=L.scaleLinear().domain(r).range([0,1]),a=L.interpolateHcl(Fe.colors["gray-50"],L.hsl(204,.13,.76));for(const l of n)l.color=a(s(l.value));return n.sort((l,c)=>c.value-l.value),n});C(this,"syncFilters",()=>{let e=new Set(Array(this.challengeData.source.length).fill(0).map((r,s)=>s)),n;for(n in this.filters){const r=new Set(this.filters[n]);if(r.size===0){const s=this.filterTags.map(a=>a.type.toString()).indexOf(n);s!==-1&&this.filterTags.splice(s,1);continue}if(!(this.filterTags.filter(s=>s.type===n).length>0)){let s;switch(n){case"date":{s={type:Ft.Date,message:"Dates"},this.filterTags.push(s);break}case"sourceID":{s={type:Ft.SourceID,message:"Input Source"},this.filterTags.push(s);break}case"chrf":{s={type:Ft.Chrf,message:"ChrF"},this.filterTags.push(s);break}case"familiarity":{s={type:Ft.Familiarity,message:"Familiarity"},this.filterTags.push(s);break}case"keyword":{s={type:Ft.Keyword,message:"Keyword"},this.filterTags.push(s);break}case"otherSet":{s={type:Ft.OtherSet,message:"Overlapping Sets"},this.filterTags.push(s);break}case"search":{s={type:Ft.Search,message:"Search Result"},this.filterTags.push(s);break}}}e=new Set([...e].filter(s=>r.has(s)))}this.filteredIndexes=[...e].sort((r,s)=>r-s),this.curSentences=[],this.trainingCount=0,this.logCount=0;for(const r of this.filteredIndexes){if(this.filterSearchMatchIndexes.has(r)||this.filterKeywordMatchIndexes.has(r)){const s=[];if(this.filterSearchMatchIndexes.has(r))for(const a of this.filterSearchMatchIndexes.get(r))s.push([a[0],a[1],1]);if(this.filterKeywordMatchIndexes.has(r))for(const a of this.filterKeywordMatchIndexes.get(r))s.push([a[0],a[1],0]);s.sort((a,l)=>a[0]-l[0]),this.curSentences.push({source:this.challengeData.source[r],hyp:this.challengeData.hyp[r],showHyp:!1,highlightRange:s,type:this.challengeData.train[r]===1?"train":"log"})}else this.curSentences.push({source:this.challengeData.source[r],hyp:this.challengeData.hyp[r],showHyp:!1,type:this.challengeData.train[r]===1?"train":"log"});this.challengeData.train[r]===1?this.trainingCount+=1:this.logCount+=1}this.focusScales.has("chrf")&&(this.drawChrfFocus(2),this.drawChrfThumbnail(2)),this.focusScales.has("familiarity")&&(this.drawFamiliarityFocus(3),this.drawFamiliarityThumbnail(3)),this.focusScales.has("sourceid")&&(this.drawSourceIDFocus(4),this.drawSourceIDThumbnail(4)),this.focusScales.has("unittest")&&(this.drawUnitTestFocus(5),this.drawUnitTestThumbnail(5));const i=this.getCurDateCountData();this.timeline.updateDateCount(i),this.mySetViewUpdated(),this.countLabel.classed("shown")||this.countLabel.style("opacity",0).classed("shown",!0).transition("show").duration(300).ease(L.easeCubicInOut).style("opacity",1),Hi!==null&&(clearTimeout(Hi),Hi=null),Hi=setTimeout(()=>{this.countLabel.transition("hide").duration(300).ease(L.easeCubicInOut).style("opacity",0).on("end",()=>{this.countLabel.classed("shown",!1)})},3e3),this.embeddingSettingStoreValue.filteredIndexes=this.filteredIndexes,this.embeddingSettingStore.set(this.embeddingSettingStoreValue)});C(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.challengeStore.subscribe(e=>{this.challengeStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e;const n=[];if(e.selectedDates.length!==0){const i=new Set(this.timelineStoreValue.selectedDates);for(let r=0;r<this.challengeData.source.length;r++)i.has(String(this.challengeData.date[r]))&&n.push(r)}this.filters.date=n,this.syncFilters()}),this.embeddingSettingStore.subscribe(e=>{this.embeddingSettingStoreValue=e})});C(this,"initTranslateSentences",()=>{this.curSentences=[],this.filteredIndexes=[];for(let e=0;e<this.challengeData.source.length;e++)this.curSentences.push({source:this.challengeData.source[e],hyp:this.challengeData.hyp[e],showHyp:!1,type:this.challengeData.train[e]===1?"train":"log"}),this.filteredIndexes.push(e)});C(this,"initSVGs",async()=>{await Ko(),this.focusLabel.text(se.get(rt.Embedding));for(let i=0;i<this.curPlotTypes.thumbnails.length;i++){const r=L.select(this.component).select(`#focus-${i}`).select(".focus-svg").attr("viewbox","0 0 530 360").attr("preserveAspectRatio","none");r.append("g").attr("class","content").attr("transform",`translate(${this.focusPadding.left}, ${this.focusPadding.top})`),this.focusSVGs.push(r)}const e=this.focusSVGs[2].node().getBoundingClientRect();this.focusSize.width=e.width-this.focusPadding.left-this.focusPadding.right,this.focusSize.height=e.height-this.focusPadding.top-this.focusPadding.bottom;for(let i=0;i<this.curPlotTypes.thumbnails.length;i++){const r=L.select(this.component).select(`#thumbnail-${i}`).select(".thumbnail-svg").attr("viewbox","0 0 100 100").attr("preserveAspectRatio","none");r.append("g").attr("class","content").attr("transform",`translate(${this.thumbnailPadding.left}, ${this.thumbnailPadding.top})`),this.thumbnailSVGs.push(r);const s=L.select(this.component).select(`#thumbnail-${i}`).select(".vis-label");this.thumbnailLabels.push(s)}const n=this.thumbnailSVGs[1].node().getBoundingClientRect();this.thumbnailSize.width=n.width-this.thumbnailPadding.left-this.thumbnailPadding.right,this.thumbnailSize.height=n.height-this.thumbnailPadding.top-this.thumbnailPadding.bottom});C(this,"updateFocusPlot",e=>{switch(this.curPlotTypes.thumbnails[e]){case rt.Keyword:{this.drawKeywordFocus(e);break}case rt.Chrf:{this.drawChrfFocus(e);break}case rt.SourceID:{this.drawSourceIDFocus(e);break}case rt.Embedding:{this.drawEmbeddingFocus(e);break}case rt.Familiarity:{this.drawFamiliarityFocus(e);break}case rt.UnitTest:{this.drawUnitTestFocus(e);break}}});C(this,"updateThumbnailPlot",e=>{switch(this.thumbnailSVGs[e].select("g.content").selectAll("*").remove(),this.curPlotTypes.thumbnails[e]){case rt.Keyword:{this.drawKeywordThumbnail(e);break}case rt.Chrf:{this.drawChrfThumbnail(e);break}case rt.SourceID:{this.drawSourceIDThumbnail(e);break}case rt.Embedding:{this.drawEmbeddingThumbnail(e);break}case rt.Familiarity:{this.drawFamiliarityThumbnail(e);break}case rt.UnitTest:{this.drawUnitTestThumbnail(e);break}}});C(this,"initVis",()=>{for(const[e,n]of this.curPlotTypes.thumbnails.entries())this.updateFocusPlot(e);for(const[e,n]of this.curPlotTypes.thumbnails.entries())this.updateThumbnailPlot(e)});C(this,"drawFocusBox",e=>{const n=this.focusSVGs[e].select(".content"),i=this.curPlotTypes.thumbnails[e];n.append("rect").attr("x",0).attr("y",0).attr("width",this.focusSize.width).attr("height",this.focusSize.height).style("fill",Ke.get(i))});C(this,"drawThumbnailBox",e=>{this.thumbnailSVGs[e].select(".content").append("rect").attr("x",0).attr("y",0).attr("width",this.thumbnailSize.width).attr("height",this.thumbnailSize.height).style("fill",Ke.get(this.curPlotTypes.thumbnails[e])).style("stroke","white")});C(this,"drawEmbeddingFocus",e=>{this.focusLabel.text(se.get(rt.Embedding))});C(this,"drawKeywordFocus",e=>{this.drawFocusBox(e)});C(this,"drawEmbeddingThumbnail",e=>{this.thumbnailLabels[e].text(se.get(rt.Embedding))});C(this,"drawKeywordThumbnail",e=>{this.thumbnailLabels[e].text(se.get(rt.Keyword))});C(this,"thumbnailClicked",(e,n,i=!1)=>{if(this.curSelectedThumbnailID===n)return;const r=this.curPlotTypes.thumbnails[n];this.curPlotTypes.focus=r;const s=()=>{this.curSelectedThumbnailID=this.curPlotTypes.thumbnails.indexOf(this.curPlotTypes.focus),this.focusLabel.text(se.get(r)),this.mySetViewUpdated()};if(i){const a=this.thumbnailSVGs[n].node(),l=a.cloneNode(!0),c=L.select(l);document.querySelector("body").appendChild(l);const o=a.getBoundingClientRect(),u=this.focusSVGs[this.curSelectedThumbnailID].node().getBoundingClientRect(),f=u.width/o.width,h=u.height/o.height,d=u.x-o.x,m=u.y-o.y;c.style("position","absolute").attr("preserveAspectRatio","none").style("top",`${o.y}px`).style("left",`${o.x}px`).style("width",`${o.width}px`).style("height",`${o.height}px`).style("transform-origin","top left").style("z-index",3).style("opacity",1),c.transition("move").duration(500).ease(L.easeCubicInOut).style("transform",`translate(${d}px, ${m}px) scale(${f}, ${h})`).style("opacity",0).on("end",()=>{c.remove(),s()})}i||s()});C(this,"editClicked",()=>{this.editMode=!this.editMode,this.mySetViewUpdated()});C(this,"backClicked",()=>{this.challengeStoreValue.selectedFileName="",this.challengeStore.set(this.challengeStoreValue)});C(this,"searchKeyChanged",e=>{let n;if(e!==null?n=L.select(e.target).property("value"):n="",this.filters.search=[],this.filterSearchMatchIndexes=new Map,n!==""){const i=n.toLowerCase();let r=!0;for(const[s,a]of this.challengeData.source.entries()){const l=[...a.matchAll(new RegExp(i,"gi"))].map(c=>[c.index,i.length]);l.length!==0&&(this.filters.search.push(s),this.filterSearchMatchIndexes.set(s,l),r=!1)}r&&(this.filters.search=[-1])}this.syncFilters(),this.mySetViewUpdated()});C(this,"resetSearchKey",()=>{const e=this.component.querySelector(".search-bar-input");e.value="",this.searchKeyChanged(null)});C(this,"displaySource",e=>{const n=e.source.replaceAll("iframe","REDACTED");if(e.highlightRange===void 0)return n;{const i=[];i.push(`${n.substring(0,e.highlightRange[0][0])}`);let r=0;for(const[s,[a,l,c]]of e.highlightRange.entries()){r=a+l;const o=c===1?"highlight-search":"highlight-keyword";i.push(`<span class="${o}">${n.substring(a,a+l)}</span>`),s===e.highlightRange.length-1?i.push(`${n.substring(r)}`):i.push(`${n.substring(r,e.highlightRange[s+1][0])}`)}return i.join("")}});C(this,"keywordClicked",e=>{if(this.curSelectedKeywords.has(e.word)?this.curSelectedKeywords.delete(e.word):this.curSelectedKeywords.add(e.word),this.filters.keyword=[],this.filterKeywordMatchIndexes=new Map,this.curSelectedKeywords.size!==0)for(const[n,i]of this.challengeData.source.entries())for(const r of this.curSelectedKeywords){const s=r.toLowerCase(),a=[...i.matchAll(new RegExp(s,"gi"))].map(l=>[l.index,s.length]);a.length!==0&&(this.filters.keyword.push(n),this.filterKeywordMatchIndexes.set(n,a))}this.syncFilters(),this.mySetViewUpdated()});C(this,"resetKeyword",()=>{this.curSelectedKeywords.clear(),this.filters.keyword=[],this.filterKeywordMatchIndexes=new Map,this.syncFilters(),this.mySetViewUpdated()});C(this,"filterHelperMouseenter",(e,n="filter")=>{switch(n){case"filter":{this.tooltipStoreValue.html="Interact the tool to apply filters. For example, you can brush the       timeline to filter sentences by dates. Or you can click keywords to       choose sentences that include certain keywords.";break}case"keyword":{this.tooltipStoreValue.html="List of most representative keywords in this set. Keywords are          sorted by representativeness: darker background means the word is          more representative.";break}case"embedding":{this.tooltipStoreValue.html="Position of each sample in the semantic embedding space.";break}case"chrf":{this.tooltipStoreValue.html="Distribution of ChrF scores from training samples. Higher score          suggests better translation quality.";break}case"familiarity":{this.tooltipStoreValue.html="Distribution of the familiarity scores from log samples. Higher          value indicates closer distance to the training distribution.";break}case"sourceid":{this.tooltipStoreValue.html="Distribution of the source apps of translation requests.";break}case"test":{this.tooltipStoreValue.html="Distribution of sentences that are also in other challenge sets.";break}}const r=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=r.y,this.tooltipStoreValue.left=r.x+r.width/2,this.tooltipStoreValue.maxWidth=260,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"filterHelperMouseleave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"tagCloseClicked",e=>{switch(e.type){case Ft.SourceID:{this.resetSourceIDPlots();break}case Ft.Chrf:{this.resetChrfPlots();break}case Ft.Date:{this.timeline.brushClear();break}case Ft.Familiarity:{this.resetFamiliarityPlots();break}case Ft.Keyword:{this.resetKeyword();break}case Ft.OtherSet:{this.resetUnitTestPlots();break}case Ft.Search:{this.resetSearchKey();break}}});C(this,"headerMouseenter",(e,n)=>{let i="";switch(n.key){case ut.chrf:{i="Average of sentence-level ChrF scores on the training data.";break}case ut.trainCount:{i="Number of training samples in this challenge set";break}case ut.logCount:{i="Number of log samples in this challenge set";break}case ut.familiarity:{i="Likelyhood of seeing a usage log sample under the training data's distributition";break}case ut.trainLogRatio:i="Percentage of all samples that are from the training data."}this.tooltipStoreValue.html=i;const s=e.currentTarget.querySelector("span").getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=s.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=s.x+s.width/2,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"headerMouseleave",(e,n)=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"exportClicked",()=>{const e={source:[],translation:[]};for(const n of this.curSentences)e.source.push(n.source),e.translation.push(n.hyp);r5(e,null,`challenge-set-${this.challengeSet.displayName}.json`)});C(this,"exportMouseEnter",e=>{this.tooltipStoreValue.html="Download filtered (or all if no filters) source-translation pairs.";const i=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=i.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=i.x+i.width/2,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"exportMouseLeave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});C(this,"deleteClicked",(e,n)=>{e.preventDefault(),e.stopPropagation();const i=this.curSentences.indexOf(n);this.curSentences.splice(i,1);const r=this.challengeData.source.indexOf(n.source);this.challengeData.source_id.splice(r,1),this.challengeData.chrf.splice(r,1),this.challengeData.date.splice(r,1),this.challengeData.familiarity.splice(r,1),this.challengeData.hyp.splice(r,1),this.challengeData.source.splice(r,1),this.challengeData.train.splice(r,1),this.challengeData.x.splice(r,1),this.challengeData.y.splice(r,1);const s=l=>{for(let c=l.length-1;c>=0;c--)l[c]>r?l[c]-=1:l[c]===r&&l.splice(c,1)};let a;for(a in this.filters)s(this.filters[a]);this.mySetViewUpdated()});this.component=e,this.challengeSet=n,this.challengeData=i,this.mySetViewUpdated=r,this.countLabel=L.select(this.component).select("#sentence-list-count-label"),this.tooltipStore=s,this.tooltipStoreValue=Xn(),this.challengeStore=a,this.challengeStoreValue=Kn(),this.timelineStore=l,this.timelineStoreValue=Br(),this.embeddingSettingStore=c,this.embeddingSettingStoreValue=Or(),this.initTranslateSentences(),this.focusSVGs=[],this.thumbnailSVGs=[],this.focusLabel=L.select(this.component).select(".vis-focus").select(".vis-label"),this.thumbnailLabels=[],this.focusPadding={top:5,bottom:5,left:5,right:5},this.thumbnailPadding={top:5,bottom:5,left:5,right:5},this.focusSize={width:0,height:0},this.thumbnailSize={width:0,height:0};const o=rt.Keyword;this.curPlotTypes={focus:o,thumbnails:[rt.Keyword,rt.Embedding,rt.Chrf,rt.Familiarity,rt.SourceID,rt.UnitTest]},this.curSelectedThumbnailID=this.curPlotTypes.thumbnails.indexOf(o),this.initSVGs().then(h=>{this.initVis()}),this.curKeywords=this.initializeKeywords();const u={top:5,bottom:7,left:3,right:3},f=this.initDateCountData();this.timeline=new q2({component:e,tooltipStore:s,timelineStore:l,padding:u,dateCount:f}),this.subscribeStores()}}const r5=(t,e=null,n="download.json")=>{const i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t));let r=e,s=!1;e===null&&(r=document.createElement("a"),r.style.display="none",s=!0),r==null||r.setAttribute("href",i),r==null||r.setAttribute("download",`${n}`),r==null||r.click(),s&&(r==null||r.remove())},s5=`<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16">
    <path fill-rule="evenodd" d="M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z"></path>
</svg>`;function a5(t){let e,n,i,r,s,a,l,c,o,u,f,h,d,m,w,v,p,y,b,g,_,M,N,I,P,$,D;return{c(){e=T("div"),n=T("div"),i=T("div"),r=T("div"),s=T("div"),a=H(),l=T("div"),l.textContent="Settings",c=H(),o=T("div"),u=T("input"),h=H(),d=T("label"),d.textContent="Usage log density",m=H(),w=T("div"),v=T("input"),y=H(),b=T("label"),b.textContent="Usage log sample",g=H(),_=T("div"),M=T("input"),I=H(),P=T("label"),P.textContent="Training sample",k(s,"class","svg-icon svelte-tyw4s1"),k(r,"class","icon-wrapper svelte-tyw4s1"),k(l,"class","header-name svelte-tyw4s1"),k(i,"class","header svelte-tyw4s1"),k(u,"type","checkbox"),k(u,"class","log-contour-checkbox svelte-tyw4s1"),k(u,"id","log-contour"),u.checked=f=t[2].showLogContour,k(d,"class","log-contour-label svelte-tyw4s1"),k(d,"for","log-contour"),k(o,"class","config-row svelte-tyw4s1"),k(v,"type","checkbox"),k(v,"class","log-sample-checkbox svelte-tyw4s1"),k(v,"id","log-sample"),v.checked=p=t[2].showLogSample,k(b,"class","log-contour-label svelte-tyw4s1"),k(b,"for","log-sample"),k(w,"class","config-row svelte-tyw4s1"),k(M,"type","checkbox"),k(M,"class","train-sample-checkbox svelte-tyw4s1"),k(M,"id","train-sample"),M.checked=N=t[2].showTrainSample,k(P,"class","log-contour-label svelte-tyw4s1"),k(P,"for","train-sample"),k(_,"class","config-row svelte-tyw4s1"),k(n,"class","filter svelte-tyw4s1"),k(e,"class","filter-wrapper svelte-tyw4s1"),at(e,"unpinned",t[1])},m(B,A){it(B,e,A),S(e,n),S(n,i),S(i,r),S(r,s),s.innerHTML=s5,S(i,a),S(i,l),S(n,c),S(n,o),S(o,u),S(o,h),S(o,d),S(n,m),S(n,w),S(w,v),S(w,y),S(w,b),S(n,g),S(n,_),S(_,M),S(_,I),S(_,P),t[13](e),$||(D=[ct(r,"click",t[9]),ct(u,"input",t[10]),ct(v,"input",t[11]),ct(M,"input",t[12])],$=!0)},p(B,[A]){A&4&&f!==(f=B[2].showLogContour)&&(u.checked=f),A&4&&p!==(p=B[2].showLogSample)&&(v.checked=p),A&4&&N!==(N=B[2].showTrainSample)&&(M.checked=N),A&2&&at(e,"unpinned",B[1])},i:St,o:St,d(B){B&&et(e),t[13](null),$=!1,Et(D)}}}function l5(t,e,n){let{embeddingSettingStore:i=null}=e,r=!1,s=null,a=!0,l=Or();Cr(()=>{n(8,r=!0)});const c=()=>{r&&s&&i&&i.subscribe(y=>{n(2,l=y)})},o=()=>{n(1,a=!a)},u=y=>{const b=y.target;n(2,l.showLogContour=b.checked,l),i==null||i.set(l)},f=y=>{const b=y.target;n(2,l.showLogSample=b.checked,l),i==null||i.set(l)},h=y=>{const b=y.target;n(2,l.showTrainSample=b.checked,l),i==null||i.set(l)},d=y=>o(),m=y=>u(y),w=y=>f(y),v=y=>h(y);function p(y){He[y?"unshift":"push"](()=>{s=y,n(0,s)})}return t.$$set=y=>{"embeddingSettingStore"in y&&n(7,i=y.embeddingSettingStore)},t.$$.update=()=>{t.$$.dirty&256&&r&&c()},[s,a,l,o,u,f,h,i,r,d,m,w,v,p]}class o5 extends On{constructor(e){super(),Bn(this,e,l5,a5,cn,{embeddingSettingStore:7})}}const Be=2,mo=.4;let tn=null,Yi=null;class c5{constructor({component:e,challengeSet:n,challengeData:i,focusPosition:r,embeddingUpdated:s,tooltipStore:a,timelineStore:l,embeddingSettingStore:c}){C(this,"component");C(this,"challengeSet");C(this,"challengeData");C(this,"focusPosition");C(this,"embeddingUpdated");C(this,"svg");C(this,"padding");C(this,"width");C(this,"height");C(this,"xScale",null);C(this,"yScale",null);C(this,"initXScale",null);C(this,"initYScale",null);C(this,"transformK",1);C(this,"contourMeta",null);C(this,"backgroundContourPromise");C(this,"tooltipStore");C(this,"tooltipStoreValue");C(this,"timelineStore");C(this,"timelineStoreValue");C(this,"embeddingSettingStore");C(this,"embeddingSettingStoreValue");C(this,"backgroundDensityColorScale");C(this,"initBackgroundDensity",async()=>{const e=await L.json("./data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=n.length,r=document.createElement("canvas"),s=r.getContext("2d");r.width=i,r.height=i;const a=s.getImageData(0,0,i,i),l=a.data;for(let d=0;d<l.length;d+=4){const m=Math.floor(d/4),w=Math.floor(m/i),v=m%i,p=n[w][v].pdf,y=L.rgb(this.backgroundDensityColorScale(p));l[d]=y.r,l[d+1]=y.g,l[d+2]=y.b,l[d+3]=255}const c=document.createElement("canvas"),o=this.width+this.padding.left+this.padding.right;c.width=o,c.height=o;const u=c.getContext("2d");s.putImageData(a,0,0),u.drawImage(r,0,0,i,i,this.padding.left,this.padding.top,this.width,this.width);const f=c.toDataURL();this.svg.select("g.content").select(".content-bottom").append("image").attr("transform","scale(1, -1)").attr("transform-origin","center").attr("class","background-density").attr("xlink:href",f).style("opacity",.3)});C(this,"initBackgroundContour",async()=>{const e=await L.json("./data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=e.meta;this.contourMeta=i;const r=[];for(let o=0;o<n.length;o++)for(let u=0;u<n.length;u++)r.push(n[o][u].pdf);this.initXScale=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+this.width]),this.xScale=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+this.width]),this.initYScale=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+this.height,this.padding.top]),this.yScale=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+this.height,this.padding.top]);const s=[.01,.05,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],a=L.contours().size([n.length,n.length]).thresholds(s)(r).map(o=>({type:o.type,value:o.value,coordinates:o.coordinates.map(f=>f.map(h=>h.map(([d,m])=>[this.xScale(e.meta.vmin+e.meta.step*d),this.yScale(e.meta.vmin+e.meta.step*m)])))})),l=this.svg.select("g.content").select(".content-bottom").append("g").attr("class","contour-train"),c=L.scaleSequential(L.extent(s),L.interpolateGreys);l.selectAll("path").data(a).join("path").attr("class","contour").attr("d",L.geoPath()).style("fill",o=>c(o.value)),l.append("rect").attr("class","contour-mask").attr("width",this.width).attr("height",this.height).style("fill","white").style("opacity",.4)});C(this,"initThumbnailBackgroundContour",async()=>{const e=await L.json("./data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=e.meta;this.contourMeta=i;const r=[];for(let w=0;w<n.length;w++)for(let v=0;v<n.length;v++)r.push(n[w][v].pdf);const s=L.select(`div#thumbnail-${this.focusPosition}`).select("svg"),a=s.node().getBoundingClientRect(),l=a.width,c=a.height,o=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+l]),u=L.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+c,this.padding.top]),f=[.01,.05,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],h=L.contours().size([n.length,n.length]).thresholds(f)(r).map(w=>({type:w.type,value:w.value,coordinates:w.coordinates.map(p=>p.map(y=>y.map(([b,g])=>[o(e.meta.vmin+e.meta.step*b),u(e.meta.vmin+e.meta.step*g)])))})),d=s.append("g").attr("class","contour-train").style("transform-origin","center").style("transform","scale(1.3)"),m=L.scaleSequential(L.extent(f),L.interpolateGreys);d.selectAll("path").data(h).join("path").attr("class","contour").attr("d",L.geoPath()).style("fill",w=>m(w.value)),d.append("rect").attr("class","contour-mask").attr("width",l).attr("height",c).style("fill","white").style("opacity",.4)});C(this,"drawLogContour",async e=>{const n=[],i=1/e.length;let r=0,s=!1;if(!this.contourMeta){console.error("contourMeta is not initialized, quit drawing.");return}if(e.length===0){this.svg.selectAll("g.contour-log").remove();return}for(const u of e){const f=await L.json("./data/density-grid-logs.json");if(f===void 0){console.error(`Cannot load density data on ${u}.`);return}const h=f.data;if(s||(r=h.length,s=!0),n.length===0)for(let d=0;d<h.length;d++)for(let m=0;m<h.length;m++)n.push(h[d][m]*i);else for(let d=0;d<h.length;d++)for(let m=0;m<h.length;m++)n[d*h.length+m]+=h[d][m]*i}const a=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],l=L.contours().size([r,r]).thresholds(a)(n).map(u=>({type:u.type,value:u.value,coordinates:u.coordinates.map(h=>h.map(d=>d.map(([m,w])=>[this.initXScale(this.contourMeta.vmin+this.contourMeta.step*m),this.initYScale(this.contourMeta.vmin+this.contourMeta.step*w)])))})),c=this.svg.select("g.content-bottom").selectAll("g.contour-log").data([0]).join("g").attr("class","contour-log").style("visibility","hidden"),o=L.scaleSequential(L.extent(a),["hsl(174, 100%, 95%)","hsl(174, 100%, 23%)"]);c.selectAll("path").data(l,u=>u.value).join("path").attr("class","contour-log").style("fill",u=>o(u.value)).style("opacity",.15).attr("d",L.geoPath())});C(this,"drawRareDailyPoints",async(e,n=3e3)=>{const i=[];Yi=await caches.open("cache");for(const l of e){let c;const o=`./data/log-daily/daily-${l}.json`,u=await Yi.match(o);if(u)c=await u.json();else{await Yi.add(o);const f=await Yi.match(o);c=await(f==null?void 0:f.json())}if(c===void 0){console.error("Cannot load density data.");continue}i.push(c)}const r=i.reduce((l,c)=>l+c.umap.length,0),s=[],a=new Set;for(let l=0;l<r;l++){const c=i[l%i.length],o=Math.floor(l/i.length);s.length<n&&!a.has(c.source[o])&&(s.push({x:c.umap[o][0],y:c.umap[o][1],source:c.source[o],name:`${e[l]}-${o}`}),a.add(c.source[o]))}this.drawDailyScatter(s)});C(this,"drawDailyScatter",e=>{this.svg.select("g.content-top").selectAll("g.daily-point-group").data([0]).join("g").attr("class","daily-point-group").selectAll("g.daily-point").data(e,r=>r.name).join(r=>{const s=r.append("g").attr("class","daily-point").attr("transform",a=>`translate(${this.initXScale(a.x)}, ${this.initYScale(a.y)})`).on("mouseenter",this.pointMouseenterHandler).on("mouseleave",this.pointMouseleaveHandler);return s.append("circle").attr("cx",-Be).attr("cy",-Be).attr("r",Math.max(1/this.transformK*Be,.5)),s},r=>r.attr("transform",s=>`translate(${this.initXScale(s.x)}, ${this.initYScale(s.y)})`),r=>r.remove())});C(this,"drawChallengeSetScatter",()=>{const e=[];for(let s=0;s<this.challengeData.x.length;s++)e.push({source:this.challengeData.source[s],hyp:this.challengeData.hyp[s],x:this.challengeData.x[s],y:this.challengeData.y[s],name:`${this.challengeSet.fileName}-${s}`,isTrain:this.challengeData.train[s]===1,index:s});this.svg.select("g.content-top").append("g").attr("class","challenge-point-group").selectAll("g.challenge-point").data(e).join("g").attr("class","challenge-point").classed("train-sample",s=>!!s.isTrain).attr("transform",s=>`translate(${this.initXScale(s.x)}, ${this.initYScale(s.y)})`).style("stroke-width",mo).on("mouseenter",this.pointMouseenterHandler).on("mouseleave",this.pointMouseleaveHandler).append("circle").attr("cx",-Be).attr("cy",-Be).attr("r",Math.max(1/this.transformK*Be,.5))});C(this,"pointMouseenterHandler",(e,n)=>{if(e.target===null)return;tn!==null&&(window.clearTimeout(tn),tn=null);const i=()=>{const s=L.select(e.target).node().getBoundingClientRect(),a=s.y,l=s.x+s.width/2;n.hyp?this.tooltipStoreValue.html=`<div class='translate'>        <span>${n.source}</span>        <span class='arrow'></span>        <span>${n.hyp}</span></div>`:this.tooltipStoreValue.html=n.source,this.tooltipStoreValue.show=!0,this.tooltipStoreValue.maxWidth=400,this.tooltipStoreValue.top=a,this.tooltipStoreValue.left=l,this.tooltipStore.set(this.tooltipStoreValue)};tn=window.setTimeout(i,200)});C(this,"pointMouseleaveHandler",e=>{e.target!==null&&(this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),tn!==null&&(window.clearTimeout(tn),tn=null))});C(this,"initZoom",()=>{const e=L.zoom().scaleExtent([1,40]).translateExtent([[0,0],[this.width+this.padding.left+this.padding.right,this.height+this.padding.top+this.padding.bottom]]).on("zoom",this.zoomed);this.svg.call(e);const n=this.svg.select("g.content"),i=this.svg.node().getBoundingClientRect(),r=(i.width-i.height)/2,s=L.zoomIdentity.translate(0,-r);this.svg.on("dblclick.zoom",null),n.on("dblclick.zoom",null),n.on("dblclick",()=>{this.svg.transition("reset").duration(750).ease(L.easeCubicInOut).call(a=>e.transform(a,s))}),this.backgroundContourPromise.then(()=>{this.svg.call(a=>e.transform(a,s))})});C(this,"zoomed",e=>{const n=e.transform;this.transformK=n.k;const i=this.svg.select("g.content");i.selectAll("g.daily-point").selectAll("circle").attr("r",Math.max(1/n.k*Be,.5)),i.selectAll("g.challenge-point").selectAll("circle").attr("r",Math.max(1/n.k*Be,.5)).style("stroke-width",Math.max(1/n.k*mo,.1)),i.attr("transform",n.toString()),this.xScale=n.rescaleX(this.xScale),this.yScale=n.rescaleY(this.yScale)});C(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e;const n=()=>{this.drawLogContour(this.timelineStoreValue.selectedDates)};this.contourMeta?n():this.backgroundContourPromise.then(()=>{n()})}),this.embeddingSettingStore.subscribe(e=>{this.embeddingSettingStoreValue=e;const n=new Set(this.embeddingSettingStoreValue.filteredIndexes);this.svg.select("g.content-top g.challenge-point-group").selectAll("g.challenge-point").classed("hide",i=>!n.has(i.index)),this.svg.select("g.contour-log").style("visibility",e.showLogContour?"unset":"hidden"),this.svg.select("g.content").selectAll(".challenge-point:not(.train-sample)").style("visibility",e.showLogSample?"unset":"hidden"),this.svg.select("g.content").selectAll("g.challenge-point.train-sample").style("visibility",e.showTrainSample?"unset":"hidden"),this.embeddingUpdated()})});this.component=e,this.challengeSet=n,this.challengeData=i,this.focusPosition=r,this.embeddingUpdated=s,this.svg=L.select(this.component).select("svg.embedding-svg"),this.svg.attr("width","100%").attr("height","100%").attr("viewbox","0 0 600 600").attr("preserveAspectRatio","none"),this.padding={top:1,bottom:1,left:1,right:1};const o=this.svg.node().getBoundingClientRect();this.width=o.width-this.padding.left-this.padding.right,this.height=o.height-this.padding.top-this.padding.bottom,this.width!==this.height&&(this.height=this.width);const u=this.svg.append("g").attr("class","content");u.append("g").attr("class","content-bottom"),u.append("g").attr("class","content-top"),this.backgroundDensityColorScale=L.interpolateHcl(Fe.colors["gray-50"],Fe.colors["blue-900"]),this.backgroundContourPromise=this.initBackgroundContour(),this.tooltipStore=a,this.tooltipStoreValue=Xn(),this.timelineStore=l,this.timelineStoreValue=Br(),this.embeddingSettingStore=c,this.embeddingSettingStoreValue=Or(),this.subscribeStores(),this.backgroundContourPromise.then(()=>{this.drawChallengeSetScatter(),this.drawLogContour(["20220301"])}),this.initZoom(),this.initThumbnailBackgroundContour()}}const Au=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 91 110" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-140,-394)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-contour">
                <g id="path-3" transform="matrix(0.0124177,0,0,0.0235171,-913.348,568.533)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
                <g id="path-2" transform="matrix(0.00841095,0,0,0.0159291,-912.324,570.293)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
                <g id="path-1" transform="matrix(0.00346681,0,0,0.0065656,-911.116,572.526)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;function yo(t){let e,n,i;return{c(){e=T("div"),e.innerHTML='<div class="circle log svelte-1d4bf2q"></div>',n=H(),i=T("div"),i.innerHTML='<span class="label svelte-1d4bf2q">Usage log sample</span>',k(e,"class","grid-item center svelte-1d4bf2q"),k(i,"class","grid-item-")},m(r,s){it(r,e,s),it(r,n,s),it(r,i,s)},d(r){r&&et(e),r&&et(n),r&&et(i)}}}function bo(t){let e,n,i;return{c(){e=T("div"),e.innerHTML='<div class="circle train svelte-1d4bf2q"></div>',n=H(),i=T("div"),i.innerHTML='<span class="label svelte-1d4bf2q">Training sample</span>',k(e,"class","grid-item center svelte-1d4bf2q"),k(i,"class","grid-item svelte-1d4bf2q")},m(r,s){it(r,e,s),it(r,n,s),it(r,i,s)},d(r){r&&et(e),r&&et(n),r&&et(i)}}}function vo(t){let e,n,i,r;return{c(){e=T("div"),n=T("span"),i=H(),r=T("span"),r.textContent="Usage log density",k(n,"class","svg-icon log svelte-1d4bf2q"),k(e,"class","grid-item center svelte-1d4bf2q"),k(r,"class","label svelte-1d4bf2q")},m(s,a){it(s,e,a),S(e,n),n.innerHTML=Au,it(s,i,a),it(s,r,a)},p:St,d(s){s&&et(e),s&&et(i),s&&et(r)}}}function u5(t){var N,I,P;let e,n,i,r,s,a,l,c,o,u,f,h,d,m,w,v,p,y,b,g=((N=t[2])==null?void 0:N.embeddingSettingStoreValue.showLogSample)&&yo(),_=((I=t[2])==null?void 0:I.embeddingSettingStoreValue.showTrainSample)&&bo(),M=((P=t[2])==null?void 0:P.embeddingSettingStoreValue.showLogContour)&&vo();return v=new o5({props:{embeddingSettingStore:t[0]}}),{c(){e=T("div"),n=T("div"),i=T("div"),i.textContent="Sentence Embedding",r=H(),s=T("div"),a=T("div"),g&&g.c(),l=H(),_&&_.c(),c=H(),o=T("div"),u=T("span"),f=H(),h=T("div"),h.innerHTML='<span class="label svelte-1d4bf2q">Training density</span>',d=H(),M&&M.c(),m=H(),w=T("div"),yi(v.$$.fragment),p=H(),y=Xt("svg"),k(i,"class","embedding-title svelte-1d4bf2q"),k(i,"data-content","Sentence Embedding"),k(u,"class","svg-icon train svelte-1d4bf2q"),k(o,"class","grid-item center svelte-1d4bf2q"),k(h,"class","grid-item svelte-1d4bf2q"),k(a,"class","legend-grid svelte-1d4bf2q"),k(s,"class","legend-panel svelte-1d4bf2q"),k(w,"class","control-panel"),k(y,"class","embedding-svg svelte-1d4bf2q"),k(n,"class","embedding svelte-1d4bf2q"),k(e,"class","embedding-wrapper svelte-1d4bf2q")},m($,D){it($,e,D),S(e,n),S(n,i),S(n,r),S(n,s),S(s,a),g&&g.m(a,null),S(a,l),_&&_.m(a,null),S(a,c),S(a,o),S(o,u),u.innerHTML=Au,S(a,f),S(a,h),S(a,d),M&&M.m(a,null),S(n,m),S(n,w),Nn(v,w,null),S(n,p),S(n,y),t[8](e),b=!0},p($,[D]){var A,x,E;(A=$[2])!=null&&A.embeddingSettingStoreValue.showLogSample?g||(g=yo(),g.c(),g.m(a,l)):g&&(g.d(1),g=null),(x=$[2])!=null&&x.embeddingSettingStoreValue.showTrainSample?_||(_=bo(),_.c(),_.m(a,c)):_&&(_.d(1),_=null),(E=$[2])!=null&&E.embeddingSettingStoreValue.showLogContour?M?M.p($,D):(M=vo(),M.c(),M.m(a,null)):M&&(M.d(1),M=null);const B={};D&1&&(B.embeddingSettingStore=$[0]),v.$set(B)},i($){b||(Ht(v.$$.fragment,$),b=!0)},o($){pe(v.$$.fragment,$),b=!1},d($){$&&et(e),g&&g.d(),_&&_.d(),M&&M.d(),zn(v),t[8](null)}}}function h5(t,e,n){let{tooltipStore:i=null}=e,{challengeSet:r=null}=e,{challengeData:s=null}=e,{focusPosition:a=null}=e,{embeddingSettingStore:l=null}=e;const c=Tu();let o=!1,u=null,f=null;Cr(()=>{n(7,o=!0)});const h=()=>{n(2,f)},d=()=>{o&&u&&i&&r&&s&&a&&l&&n(2,f=new c5({component:u,challengeSet:r,challengeData:s,focusPosition:a,embeddingUpdated:h,tooltipStore:i,timelineStore:c,embeddingSettingStore:l}))};function m(w){He[w?"unshift":"push"](()=>{u=w,n(1,u)})}return t.$$set=w=>{"tooltipStore"in w&&n(3,i=w.tooltipStore),"challengeSet"in w&&n(4,r=w.challengeSet),"challengeData"in w&&n(5,s=w.challengeData),"focusPosition"in w&&n(6,a=w.focusPosition),"embeddingSettingStore"in w&&n(0,l=w.embeddingSettingStore)},t.$$.update=()=>{t.$$.dirty&186&&o&&u&&i&&r&&s&&d()},[l,u,f,i,r,s,a,o,m]}class f5 extends On{constructor(e){super(),Bn(this,e,h5,u5,cn,{tooltipStore:3,challengeSet:4,challengeData:5,focusPosition:6,embeddingSettingStore:0})}}const d5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 62 62" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-318,-282)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-edit" transform="matrix(0.0292011,0,0,0.0553024,-906.466,567.442)">
                <path d="M19.775,-7.861L60.547,-48.584L53.223,-55.908L12.451,-15.185L8.887,-6.348C8.496,-5.371 9.521,-4.199 10.596,-4.541L19.775,-7.861ZM64.111,-52.051L68.213,-56.152C70.313,-58.203 70.41,-60.449 68.555,-62.305L67.041,-63.867C65.186,-65.723 62.94,-65.527 60.84,-63.525L56.69,-59.424L64.111,-52.051Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,g5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 69 84" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-471,-118)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-download" transform="matrix(0.0292011,0,0,0.0553024,-902.027,559.05)">
                <path d="M22.217,5.469L66.016,5.469C74.365,5.469 78.467,1.367 78.467,-6.836L78.467,-44.385C78.467,-52.588 74.365,-56.69 66.016,-56.69L55.518,-56.69L55.518,-49.609L65.918,-49.609C69.385,-49.609 71.436,-47.705 71.436,-44.043L71.436,-7.178C71.436,-3.467 69.385,-1.611 65.918,-1.611L22.315,-1.611C18.799,-1.611 16.797,-3.467 16.797,-7.178L16.797,-44.043C16.797,-47.705 18.799,-49.609 22.315,-49.609L32.715,-49.609L32.715,-56.69L22.217,-56.69C13.916,-56.69 9.766,-52.588 9.766,-44.385L9.766,-6.836C9.766,1.367 13.916,5.469 22.217,5.469Z" style="fill-rule:nonzero;"/>
                <path d="M44.092,-20.02C45.02,-20.02 45.752,-20.313 46.631,-21.191L59.228,-33.252C59.912,-33.887 60.303,-34.619 60.303,-35.547C60.303,-37.353 58.935,-38.623 57.08,-38.623C56.25,-38.623 55.371,-38.281 54.736,-37.549L49.365,-31.738L47.315,-29.541L47.607,-35.352L47.607,-74.414C47.607,-76.269 45.996,-77.832 44.092,-77.832C42.236,-77.832 40.625,-76.269 40.625,-74.414L40.625,-35.352L40.918,-29.541L38.867,-31.738L33.496,-37.549C32.861,-38.281 31.934,-38.623 31.104,-38.623C29.248,-38.623 27.93,-37.353 27.93,-35.547C27.93,-34.619 28.32,-33.887 28.955,-33.252L41.553,-21.191C42.481,-20.313 43.213,-20.02 44.092,-20.02Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,p5='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path></svg>',m5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 87 79" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-713,-118)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-checklist" transform="matrix(0.0292011,0,0,0.0553024,-894.956,558.862)">
                <path d="M54.883,-53.857L92.969,-53.857C94.775,-53.857 96.289,-55.273 96.289,-57.129C96.289,-58.984 94.775,-60.4 92.969,-60.4L54.883,-60.4C53.027,-60.4 51.563,-58.984 51.563,-57.129C51.563,-55.273 53.027,-53.857 54.883,-53.857ZM54.883,-9.912L92.969,-9.912C94.775,-9.912 96.289,-11.328 96.289,-13.184C96.289,-15.039 94.775,-16.455 92.969,-16.455L54.883,-16.455C53.027,-16.455 51.563,-15.039 51.563,-13.184C51.563,-11.328 53.027,-9.912 54.883,-9.912Z" style="fill-rule:nonzero;"/>
                <path d="M26.514,3.564C35.596,3.564 43.164,-4.102 43.164,-13.184C43.164,-22.315 35.596,-29.932 26.514,-29.932C17.334,-29.932 9.766,-22.315 9.766,-13.184C9.766,-4.102 17.383,3.564 26.514,3.564ZM26.514,-40.43C35.596,-40.43 43.164,-48.047 43.164,-57.129C43.164,-66.26 35.596,-73.877 26.514,-73.877C17.334,-73.877 9.766,-66.26 9.766,-57.129C9.766,-48.047 17.383,-40.43 26.514,-40.43ZM26.514,-2.783C20.85,-2.783 16.113,-7.568 16.113,-13.184C16.113,-18.799 20.898,-23.584 26.514,-23.584C32.08,-23.584 36.816,-18.799 36.816,-13.184C36.816,-7.568 32.08,-2.783 26.514,-2.783ZM24.512,-48.291C23.633,-48.291 23.047,-48.779 22.412,-49.463L18.311,-54.443C17.969,-54.932 17.822,-55.42 17.822,-56.103C17.822,-57.275 18.701,-58.203 19.824,-58.203C20.606,-58.203 21.143,-57.91 21.729,-57.129L24.414,-53.613L30.957,-64.16C31.397,-64.941 32.031,-65.332 32.813,-65.332C33.936,-65.332 34.912,-64.453 34.912,-63.379C34.912,-62.842 34.766,-62.353 34.375,-61.719L26.66,-49.463C26.172,-48.731 25.391,-48.291 24.512,-48.291Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,y5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-469,-404)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-delete" transform="matrix(0.0292011,0,0,0.0553024,-901.949,575.088)">
                <path d="M24.756,2.393L61.67,2.393C66.553,2.393 69.336,-0.098 69.531,-5.078L71.826,-60.156L77.246,-60.156C79.053,-60.156 80.469,-61.621 80.469,-63.428C80.469,-65.234 79.053,-66.699 77.246,-66.699L9.082,-66.699C7.373,-66.699 5.859,-65.234 5.859,-63.428C5.859,-61.621 7.373,-60.156 9.082,-60.156L14.6,-60.156L16.895,-5.078C17.09,-0.098 19.824,2.393 24.756,2.393ZM25.635,-65.478L33.594,-65.478L33.594,-71.826C33.594,-73.535 34.766,-74.707 36.572,-74.707L49.756,-74.707C51.563,-74.707 52.734,-73.535 52.734,-71.826L52.734,-65.478L60.596,-65.478L60.596,-72.315C60.596,-78.369 56.592,-82.129 50.244,-82.129L35.986,-82.129C29.639,-82.129 25.635,-78.369 25.635,-72.315L25.635,-65.478ZM43.164,-8.545C41.553,-8.545 40.381,-9.57 40.381,-11.084L40.381,-52.051C40.381,-53.516 41.553,-54.59 43.164,-54.59C44.824,-54.59 45.947,-53.516 45.947,-52.051L45.947,-11.084C45.947,-9.57 44.824,-8.545 43.164,-8.545ZM30.957,-8.545C29.395,-8.545 28.32,-9.521 28.272,-11.084L27.197,-52.051C27.148,-53.565 28.223,-54.59 29.883,-54.59C31.397,-54.59 32.52,-53.565 32.568,-52.051L33.643,-11.084C33.691,-9.57 32.617,-8.545 30.957,-8.545ZM55.42,-8.545C53.76,-8.545 52.686,-9.57 52.734,-11.084L53.809,-52.051C53.857,-53.565 54.932,-54.59 56.494,-54.59C58.154,-54.59 59.228,-53.516 59.18,-52.051L58.106,-11.084C58.057,-9.521 56.934,-8.545 55.42,-8.545Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;function wo(t,e,n){const i=t.slice();return i[41]=e[n],i[42]=e,i[43]=n,i}function _o(t,e,n){const i=t.slice();return i[44]=e[n],i}function So(t,e,n){const i=t.slice();return i[47]=e[n],i}function xo(t,e,n){const i=t.slice();return i[44]=e[n],i}function ko(t,e,n){const i=t.slice();return i[47]=e[n],i}function Mo(t,e,n){const i=t.slice();return i[54]=e[n],i}function Co(t,e,n){const i=t.slice();return i[57]=e[n],i}function To(t){let e,n,i=t[57].displayName+"",r,s,a,l=t[10](t[1],t[57].key)+"",c,o,u,f;function h(...m){return t[15](t[57],...m)}function d(...m){return t[16](t[57],...m)}return{c(){e=T("div"),n=T("span"),r=_t(i),s=H(),a=T("span"),c=_t(l),o=H(),k(n,"class","svelte-5q8zl2"),k(a,"class","svelte-5q8zl2"),k(e,"class","stat-item svelte-5q8zl2")},m(m,w){it(m,e,w),S(e,n),S(n,r),S(e,s),S(e,a),S(a,c),S(e,o),u||(f=[ct(e,"mouseenter",h),ct(e,"mouseleave",d)],u=!0)},p(m,w){t=m,w[0]&2&&l!==(l=t[10](t[1],t[57].key)+"")&&Nt(c,l)},d(m){m&&et(e),u=!1,Et(f)}}}function b5(t){let e,n,i;return{c(){e=T("span"),k(e,"class","svg-icon icon-info svelte-5q8zl2")},m(r,s){it(r,e,s),e.innerHTML=Aa,n||(i=[ct(e,"mouseenter",t[18]),ct(e,"mouseleave",t[19])],n=!0)},p:St,d(r){r&&et(e),n=!1,Et(i)}}}function v5(t){let e,n=t[5].filterTags,i=[];for(let r=0;r<n.length;r+=1)i[r]=Do(Mo(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ni()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);it(r,e,s)},p(r,s){if(s[0]&32){n=r[5].filterTags;let a;for(a=0;a<n.length;a+=1){const l=Mo(r,n,a);i[a]?i[a].p(l,s):(i[a]=Do(l),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ye(i,r),r&&et(e)}}}function Do(t){let e,n,i=t[54].message+"",r,s,a,l,c,o;function u(){return t[17](t[54])}return{c(){e=T("div"),n=T("span"),r=_t(i),s=H(),a=T("span"),l=H(),k(a,"class","svg-icon svelte-5q8zl2"),k(e,"class","filter-item svelte-5q8zl2")},m(f,h){it(f,e,h),S(e,n),S(n,r),S(e,s),S(e,a),a.innerHTML=p5,S(e,l),c||(o=ct(a,"click",u),c=!0)},p(f,h){t=f,h[0]&32&&i!==(i=t[54].message+"")&&Nt(r,i)},d(f){f&&et(e),c=!1,o()}}}function w5(t){let e;return{c(){e=Xt("svg"),k(e,"class","focus-svg svelte-5q8zl2")},m(n,i){it(n,e,i)},p:St,i:St,o:St,d(n){n&&et(e)}}}function _5(t){let e,n,i,r,s,a,l=t[5]&&No(t);return{c(){e=Xt("svg"),n=H(),i=T("div"),r=T("div"),r.textContent="Most Representative Keywords",s=H(),a=T("div"),l&&l.c(),k(e,"class","focus-svg svelte-5q8zl2"),Js(e,"display","none"),k(r,"class","name svelte-5q8zl2"),k(a,"class","keyword-wrapper svelte-5q8zl2"),k(i,"class","keyword-grid svelte-5q8zl2")},m(c,o){it(c,e,o),it(c,n,o),it(c,i,o),S(i,r),S(i,s),S(i,a),l&&l.m(a,null)},p(c,o){c[5]?l?l.p(c,o):(l=No(c),l.c(),l.m(a,null)):l&&(l.d(1),l=null)},i:St,o:St,d(c){c&&et(e),c&&et(n),c&&et(i),l&&l.d()}}}function S5(t){let e,n,i,r;return i=new f5({props:{tooltipStore:t[0],challengeSet:t[1],challengeData:t[2],embeddingSettingStore:t[8],focusPosition:t[44]}}),{c(){e=Xt("svg"),n=H(),yi(i.$$.fragment),k(e,"class","focus-svg svelte-5q8zl2"),Js(e,"display","none")},m(s,a){it(s,e,a),it(s,n,a),Nn(i,s,a),r=!0},p(s,a){const l={};a[0]&1&&(l.tooltipStore=s[0]),a[0]&2&&(l.challengeSet=s[1]),a[0]&4&&(l.challengeData=s[2]),i.$set(l)},i(s){r||(Ht(i.$$.fragment,s),r=!0)},o(s){pe(i.$$.fragment,s),r=!1},d(s){s&&et(e),s&&et(n),zn(i,s)}}}function No(t){let e,n=t[5].curKeywords,i=[];for(let r=0;r<n.length;r+=1)i[r]=zo(ko(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ni()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);it(r,e,s)},p(r,s){if(s[0]&544){n=r[5].curKeywords;let a;for(a=0;a<n.length;a+=1){const l=ko(r,n,a);i[a]?i[a].p(l,s):(i[a]=zo(l),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ye(i,r),r&&et(e)}}}function zo(t){let e,n=t[47].word+"",i,r,s,a,l,c;function o(...u){return t[25](t[47],...u)}return{c(){var u;e=T("div"),i=_t(n),r=H(),k(e,"class","keyword svelte-5q8zl2"),k(e,"style",s=`background-color: ${t[47].color};`),k(e,"title",a=`${t[47].word}, c-TF-IDF: ${t[9](t[47].value)}`),at(e,"selected",(u=t[5])==null?void 0:u.curSelectedKeywords.has(t[47].word))},m(u,f){it(u,e,f),S(e,i),S(e,r),l||(c=ct(e,"click",o),l=!0)},p(u,f){var h;t=u,f[0]&32&&n!==(n=t[47].word+"")&&Nt(i,n),f[0]&32&&s!==(s=`background-color: ${t[47].color};`)&&k(e,"style",s),f[0]&32&&a!==(a=`${t[47].word}, c-TF-IDF: ${t[9](t[47].value)}`)&&k(e,"title",a),f[0]&32&&at(e,"selected",(h=t[5])==null?void 0:h.curSelectedKeywords.has(t[47].word))},d(u){u&&et(e),l=!1,c()}}}function $o(t){let e,n,i,r,s,a,l,c,o;function u(...m){return t[23](t[44],...m)}const f=[S5,_5,w5],h=[];function d(m,w){return m[44]===1?0:m[44]===0?1:2}return r=d(t),s=h[r]=f[r](t),{c(){var m;e=T("div"),n=T("span"),i=H(),s.c(),a=H(),k(n,"class","svg-icon icon-info svelte-5q8zl2"),at(n,"embedding-info",t[44]===1),k(e,"class","vis-focus-plot svelte-5q8zl2"),k(e,"id",`focus-${t[44]}`),at(e,"shown",((m=t[5])==null?void 0:m.curSelectedThumbnailID)===t[44])},m(m,w){it(m,e,w),S(e,n),n.innerHTML=Aa,S(e,i),h[r].m(e,null),S(e,a),l=!0,c||(o=[ct(n,"mouseenter",u),ct(n,"mouseleave",t[24])],c=!0)},p(m,w){var v;t=m,s.p(t,w),(!l||w[0]&32)&&at(e,"shown",((v=t[5])==null?void 0:v.curSelectedThumbnailID)===t[44])},i(m){l||(Ht(s),l=!0)},o(m){pe(s),l=!1},d(m){m&&et(e),h[r].d(),c=!1,Et(o)}}}function x5(t){let e;return{c(){e=Xt("svg"),k(e,"class","thumbnail-svg svelte-5q8zl2")},m(n,i){it(n,e,i)},p:St,d(n){n&&et(e)}}}function k5(t){let e,n,i,r=t[5]&&Lo(t);return{c(){e=Xt("svg"),n=H(),i=T("div"),r&&r.c(),k(e,"class","thumbnail-svg svelte-5q8zl2"),Js(e,"visibility","hidden"),k(i,"class","keyword-thumbnail svelte-5q8zl2")},m(s,a){it(s,e,a),it(s,n,a),it(s,i,a),r&&r.m(i,null)},p(s,a){s[5]?r?r.p(s,a):(r=Lo(s),r.c(),r.m(i,null)):r&&(r.d(1),r=null)},d(s){s&&et(e),s&&et(n),s&&et(i),r&&r.d()}}}function Lo(t){let e,n=t[5].curKeywords,i=[];for(let r=0;r<n.length;r+=1)i[r]=Ao(So(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ni()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);it(r,e,s)},p(r,s){if(s[0]&32){n=r[5].curKeywords;let a;for(a=0;a<n.length;a+=1){const l=So(r,n,a);i[a]?i[a].p(l,s):(i[a]=Ao(l),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ye(i,r),r&&et(e)}}}function Ao(t){let e,n=t[47].word+"",i,r;return{c(){e=T("div"),i=_t(n),r=H(),k(e,"class","keyword svelte-5q8zl2")},m(s,a){it(s,e,a),S(e,i),S(e,r)},p(s,a){a[0]&32&&n!==(n=s[47].word+"")&&Nt(i,n)},d(s){s&&et(e)}}}function Io(t){let e,n,i,r,s,a,l;function c(h,d){return h[44]===0?k5:x5}let u=c(t)(t);function f(...h){return t[26](t[44],...h)}return{c(){var h;e=T("div"),n=T("div"),u.c(),i=H(),r=T("div"),r.textContent=" ",s=H(),k(n,"class","thumbnail-vis svelte-5q8zl2"),at(n,"selected",((h=t[5])==null?void 0:h.curSelectedThumbnailID)===t[44]),k(r,"class","vis-label svelte-5q8zl2"),k(e,"class","thumbnail svelte-5q8zl2"),k(e,"id",`thumbnail-${t[44]}`)},m(h,d){it(h,e,d),S(e,n),u.m(n,null),S(e,i),S(e,r),S(e,s),a||(l=ct(e,"click",f),a=!0)},p(h,d){var m;t=h,u.p(t,d),d[0]&32&&at(n,"selected",((m=t[5])==null?void 0:m.curSelectedThumbnailID)===t[44])},d(h){h&&et(e),u.d(),a=!1,l()}}}function Eo(t){let e,n=t[5].curSentences,i=[];for(let r=0;r<n.length;r+=1)i[r]=Po(wo(t,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ni()},m(r,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,s);it(r,e,s)},p(r,s){if(s[0]&48){n=r[5].curSentences;let a;for(a=0;a<n.length;a+=1){const l=wo(r,n,a);i[a]?i[a].p(l,s):(i[a]=Po(l),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){ye(i,r),r&&et(e)}}}function Po(t){var p;let e,n,i,r=((p=t[5])==null?void 0:p.displaySource(t[41]))+"",s,a,l,c,o,u=(t[41].hyp===null?"[translation not available]":t[41].hyp)+"",f,h,d,m;function w(...y){return t[28](t[41],...y)}function v(){return t[29](t[41],t[42],t[43])}return{c(){var y,b;e=T("div"),n=T("div"),i=T("div"),s=H(),a=T("div"),l=T("span"),c=H(),o=T("div"),f=_t(u),h=H(),k(i,"class","sentence-wrapper"),k(l,"class","svg-icon svelte-5q8zl2"),k(a,"class","delete-button svelte-5q8zl2"),at(a,"shown",(y=t[5])==null?void 0:y.editMode),k(n,"class","sentence-source svelte-5q8zl2"),k(o,"class","sentence-hyp svelte-5q8zl2"),at(o,"shown",t[41].showHyp),k(e,"class","sentence-row show-source svelte-5q8zl2"),at(e,"log",t[41].type==="log"),at(e,"edit-mode",(b=t[5])==null?void 0:b.editMode)},m(y,b){it(y,e,b),S(e,n),S(n,i),i.innerHTML=r,S(n,s),S(n,a),S(a,l),l.innerHTML=y5,S(e,c),S(e,o),S(o,f),S(e,h),d||(m=[ct(a,"click",w),ct(e,"click",v)],d=!0)},p(y,b){var g,_,M;t=y,b[0]&32&&r!==(r=((g=t[5])==null?void 0:g.displaySource(t[41]))+"")&&(i.innerHTML=r),b[0]&32&&at(a,"shown",(_=t[5])==null?void 0:_.editMode),b[0]&32&&u!==(u=(t[41].hyp===null?"[translation not available]":t[41].hyp)+"")&&Nt(f,u),b[0]&32&&at(o,"shown",t[41].showHyp),b[0]&32&&at(e,"log",t[41].type==="log"),b[0]&32&&at(e,"edit-mode",(M=t[5])==null?void 0:M.editMode)},d(y){y&&et(e),d=!1,Et(m)}}}function M5(t){var Zn,je;let e,n,i,r,s,a,l=(t[1]===null?"Challenge Set":t[1].displayName)+"",c,o,u,f,h,d,m,w,v,p,y,b,g,_,M,N,I,P,$,D,B,A,x,E,z,F,G,O,K,W,Z,pt,R,X,V,q,Q,Y,j,st,U=((Zn=t[5])==null?void 0:Zn.logCount)+"",ft,nt,ht,yt,J=((je=t[5])==null?void 0:je.trainingCount)+"",gt,jt,zt,Ve,Rt,xe,dn,ke,Pt,Gt,Jt,Qt,Yt,gn,Ue,Me=t[6],kt=[];for(let lt=0;lt<Me.length;lt+=1)kt[lt]=To(Co(t,Me,lt));function Wn(lt,ot){return lt[5]&&lt[5].filterTags.length>0?v5:b5}let te=Wn(t),Dt=te(t),oe=[0,1,2,3,4,5],wt=[];for(let lt=0;lt<6;lt+=1)wt[lt]=$o(xo(t,oe,lt));const Ii=lt=>pe(wt[lt],1,1,()=>{wt[lt]=null});let ce=[0,1,2,3,4,5],Bt=[];for(let lt=0;lt<6;lt+=1)Bt[lt]=Io(_o(t,ce,lt));let xt=t[5]!==null&&Eo(t);return{c(){var lt;e=T("div"),n=T("div"),i=T("div"),r=T("div"),s=H(),a=T("div"),c=_t(l),o=H(),u=T("div"),f=H(),h=T("div");for(let ot=0;ot<kt.length;ot+=1)kt[ot].c();d=H(),m=T("div"),w=T("div"),v=T("div"),p=T("span"),p.textContent="Filters",y=H(),Dt.c(),b=H(),g=T("div"),_=T("span"),M=H(),N=T("span"),N.textContent="Export",I=H(),P=T("div"),P.innerHTML='<svg class="timeline-svg svelte-5q8zl2"></svg>',$=H(),D=T("div"),B=T("div"),A=T("div");for(let ot=0;ot<6;ot+=1)wt[ot].c();x=H(),E=T("div");for(let ot=0;ot<6;ot+=1)Bt[ot].c();z=H(),F=T("div"),G=T("div"),O=T("div"),K=T("span"),W=H(),Z=T("input"),pt=H(),R=T("div"),X=T("span"),V=H(),q=T("span"),q.textContent="Edit",Q=H(),Y=T("div"),j=T("div"),st=T("span"),ft=_t(U),nt=_t(" usage log samples"),ht=H(),yt=T("span"),gt=_t(J),jt=_t(" training samples"),zt=H(),xt&&xt.c(),Ve=H(),Rt=T("dialog"),xe=T("div"),xe.innerHTML=`<div class="primary svelte-5q8zl2">Are you sure you want to delete this sentence?</div> 
    <div class="secondary svelte-5q8zl2">This action is irreversible!</div>`,dn=H(),ke=T("div"),Pt=T("input"),Gt=T("label"),Gt.textContent="Don't warn me again",Jt=H(),Qt=T("form"),Qt.innerHTML=`<menu class="menu svelte-5q8zl2"><button value="cancel" class="svelte-5q8zl2">Cancel</button> 
      <button value="delete" class="action svelte-5q8zl2">Delete</button></menu>`,k(r,"class","svg-icon back-icon svelte-5q8zl2"),k(a,"class","name svelte-5q8zl2"),k(a,"contenteditable","true"),k(u,"class","svg-icon edit-icon svelte-5q8zl2"),k(i,"class","left-content svelte-5q8zl2"),k(h,"class","right-content svelte-5q8zl2"),k(n,"class","header svelte-5q8zl2"),k(p,"class","filter-name svelte-5q8zl2"),k(v,"class","filter-left svelte-5q8zl2"),k(_,"class","svg-icon svelte-5q8zl2"),k(g,"class","filter-right svelte-5q8zl2"),k(w,"class","filter svelte-5q8zl2"),k(P,"class","timeline svelte-5q8zl2"),k(A,"class","vis-focus svelte-5q8zl2"),k(E,"class","vis-others svelte-5q8zl2"),k(B,"class","vis-block svelte-5q8zl2"),k(K,"class","svg-icon svelte-5q8zl2"),k(Z,"class","search-bar-input svelte-5q8zl2"),k(Z,"type","text"),k(Z,"id","input-search"),k(Z,"placeholder","Type to search..."),k(O,"class","search-bar svelte-5q8zl2"),k(X,"class","svg-icon svelte-5q8zl2"),k(R,"class","edit-button svelte-5q8zl2"),at(R,"edit-mode",(lt=t[5])==null?void 0:lt.editMode),k(G,"class","top-bar svelte-5q8zl2"),k(st,"class","log svelte-5q8zl2"),k(yt,"class","train svelte-5q8zl2"),k(j,"id","sentence-list-count-label"),k(j,"class","svelte-5q8zl2"),k(Y,"class","sentence-list svelte-5q8zl2"),k(F,"class","sentence-block svelte-5q8zl2"),k(D,"class","detail svelte-5q8zl2"),k(m,"class","content svelte-5q8zl2"),k(e,"class","set-view-wrapper svelte-5q8zl2"),k(xe,"class","content svelte-5q8zl2"),k(Pt,"id","warn-checkbox"),k(Pt,"type","checkbox"),k(Pt,"class","svelte-5q8zl2"),k(Gt,"for","warn-checkbox"),k(ke,"class","checkbox-menu svelte-5q8zl2"),k(Qt,"method","dialog"),k(Rt,"class","delete-alert svelte-5q8zl2")},m(lt,ot){it(lt,e,ot),S(e,n),S(n,i),S(i,r),r.innerHTML=Gs,S(i,s),S(i,a),S(a,c),S(i,o),S(i,u),u.innerHTML=d5,S(n,f),S(n,h);for(let vt=0;vt<kt.length;vt+=1)kt[vt]&&kt[vt].m(h,null);S(e,d),S(e,m),S(m,w),S(w,v),S(v,p),S(v,y),Dt.m(v,null),S(w,b),S(w,g),S(g,_),_.innerHTML=g5,S(g,M),S(g,N),S(m,I),S(m,P),S(m,$),S(m,D),S(D,B),S(B,A);for(let vt=0;vt<6;vt+=1)wt[vt]&&wt[vt].m(A,null);S(B,x),S(B,E);for(let vt=0;vt<6;vt+=1)Bt[vt]&&Bt[vt].m(E,null);S(D,z),S(D,F),S(F,G),S(G,O),S(O,K),K.innerHTML=Du,S(O,W),S(O,Z),S(G,pt),S(G,R),S(R,X),X.innerHTML=m5,S(R,V),S(R,q),S(F,Q),S(F,Y),S(Y,j),S(j,st),S(st,ft),S(st,nt),S(j,ht),S(j,yt),S(yt,gt),S(yt,jt),S(Y,zt),xt&&xt.m(Y,null),t[30](e),it(lt,Ve,ot),it(lt,Rt,ot),S(Rt,xe),S(Rt,dn),S(Rt,ke),S(ke,Pt),S(ke,Gt),S(Rt,Jt),S(Rt,Qt),t[32](Rt),Yt=!0,gn||(Ue=[ct(r,"click",t[14]),ct(g,"mouseenter",t[20]),ct(g,"mouseleave",t[21]),ct(g,"click",t[22]),ct(Z,"input",t[27]),ct(R,"click",function(){var vt,Re;Mr((vt=t[5])==null?void 0:vt.editClicked())&&((Re=t[5])==null||Re.editClicked().apply(this,arguments))}),ct(Pt,"input",t[31])],gn=!0)},p(lt,ot){var vt,Re,Ei;if(t=lt,(!Yt||ot[0]&2)&&l!==(l=(t[1]===null?"Challenge Set":t[1].displayName)+"")&&qu(c,l),ot[0]&1122){Me=t[6];let tt;for(tt=0;tt<Me.length;tt+=1){const ue=Co(t,Me,tt);kt[tt]?kt[tt].p(ue,ot):(kt[tt]=To(ue),kt[tt].c(),kt[tt].m(h,null))}for(;tt<kt.length;tt+=1)kt[tt].d(1);kt.length=Me.length}if(te===(te=Wn(t))&&Dt?Dt.p(t,ot):(Dt.d(1),Dt=te(t),Dt&&(Dt.c(),Dt.m(v,null))),ot[0]&935){oe=[0,1,2,3,4,5];let tt;for(tt=0;tt<6;tt+=1){const ue=xo(t,oe,tt);wt[tt]?(wt[tt].p(ue,ot),Ht(wt[tt],1)):(wt[tt]=$o(ue),wt[tt].c(),Ht(wt[tt],1),wt[tt].m(A,null))}for(Wo(),tt=6;tt<6;tt+=1)Ii(tt);Zo()}if(ot[0]&32){ce=[0,1,2,3,4,5];let tt;for(tt=0;tt<6;tt+=1){const ue=_o(t,ce,tt);Bt[tt]?Bt[tt].p(ue,ot):(Bt[tt]=Io(ue),Bt[tt].c(),Bt[tt].m(E,null))}for(;tt<6;tt+=1)Bt[tt].d(1)}(!Yt||ot[0]&32)&&at(R,"edit-mode",(vt=t[5])==null?void 0:vt.editMode),(!Yt||ot[0]&32)&&U!==(U=((Re=t[5])==null?void 0:Re.logCount)+"")&&Nt(ft,U),(!Yt||ot[0]&32)&&J!==(J=((Ei=t[5])==null?void 0:Ei.trainingCount)+"")&&Nt(gt,J),t[5]!==null?xt?xt.p(t,ot):(xt=Eo(t),xt.c(),xt.m(Y,null)):xt&&(xt.d(1),xt=null)},i(lt){if(!Yt){for(let ot=0;ot<6;ot+=1)Ht(wt[ot]);Yt=!0}},o(lt){wt=wt.filter(Boolean);for(let ot=0;ot<6;ot+=1)pe(wt[ot]);Yt=!1},d(lt){lt&&et(e),ye(kt,lt),Dt.d(),ye(wt,lt),ye(Bt,lt),xt&&xt.d(),t[30](null),lt&&et(Ve),lt&&et(Rt),t[32](null),gn=!1,Et(Ue)}}}function C5(t,e,n){let{tooltipStore:i=null}=e,{challengeStore:r}=e;const s=[{displayName:"Log Count",key:ut.logCount},{displayName:"Familiarity",key:ut.familiarity},{displayName:"Train Count",key:ut.trainCount},{displayName:"ChrF",key:ut.chrf},{displayName:"Train Ratio",key:ut.trainLogRatio}],a=["keyword","embedding","chrf","familiarity","sourceid","test"];let l=!1,c=null,o=null,u=null,f=null,h=null,d=Kn();const m=P2();r.subscribe(V=>{d=V});const w=Tu(),v=L.format(".2f"),p=L.format(".4f"),y=()=>{n(5,u)},b=()=>{if(d.challengeData===void 0||d.challengeSet===void 0){console.error("challengeStoreValue is not updated before constructing the set view");return}n(1,f=d.challengeSet),n(2,h=d.challengeData)},g=(V,q)=>{if(V===null)return"";switch(q){case ut.chrf:return v(V.chrf);case ut.trainCount:return V.trainCount;case ut.logCount:return V.logCount;case ut.familiarity:return v(V.familiarity);case ut.trainLogRatio:return`${Math.floor(V.trainLogRatio*100)}%`}},_=V=>{const q=V.target;localStorage.setItem("skipSentenceDeleteWarning",q.checked?"true":"false")};Cr(async()=>{n(13,l=!0),b()});const M=()=>{l&&c&&i&&r&&f&&h&&w&&n(5,u=new i5({component:c,challengeSet:f,challengeData:h,mySetViewUpdated:y,tooltipStore:i,challengeStore:r,timelineStore:w,embeddingSettingStore:m}))},N=()=>u==null?void 0:u.backClicked(),I=(V,q)=>u==null?void 0:u.headerMouseenter(q,V),P=(V,q)=>u==null?void 0:u.headerMouseleave(q,V),$=V=>u==null?void 0:u.tagCloseClicked(V),D=V=>u==null?void 0:u.filterHelperMouseenter(V),B=V=>u==null?void 0:u.filterHelperMouseleave(V),A=V=>u==null?void 0:u.exportMouseEnter(V),x=V=>u==null?void 0:u.exportMouseLeave(V),E=()=>u==null?void 0:u.exportClicked(),z=(V,q)=>u==null?void 0:u.filterHelperMouseenter(q,a[V]),F=V=>u==null?void 0:u.filterHelperMouseleave(V),G=(V,q)=>u==null?void 0:u.keywordClicked(V),O=(V,q)=>u==null?void 0:u.thumbnailClicked(q,V),K=V=>u==null?void 0:u.searchKeyChanged(V),W=(V,q)=>{localStorage.getItem("skipSentenceDeleteWarning")==="true"?u==null||u.deleteClicked(q,V):(o==null||o.addEventListener("close",()=>{(o==null?void 0:o.returnValue)==="delete"&&(u==null||u.deleteClicked(q,V))},{once:!0}),o==null||o.showModal())},Z=(V,q,Q)=>{n(5,q[Q].showHyp=!V.showHyp,u)};function pt(V){He[V?"unshift":"push"](()=>{c=V,n(3,c)})}const R=V=>_(V);function X(V){He[V?"unshift":"push"](()=>{o=V,n(4,o)})}return t.$$set=V=>{"tooltipStore"in V&&n(0,i=V.tooltipStore),"challengeStore"in V&&n(12,r=V.challengeStore)},t.$$.update=()=>{t.$$.dirty[0]&12295&&l&&i&&r&&f&&h&&w&&M()},[i,f,h,c,o,u,s,a,m,p,g,_,r,l,N,I,P,$,D,B,A,x,E,z,F,G,O,K,W,Z,pt,R,X]}class T5 extends On{constructor(e){super(),Bn(this,e,C5,M5,cn,{tooltipStore:0,challengeStore:12},null,[-1,-1])}}function Fo(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function D5(t){const e=t-1;return e*e*e+1}function Vo(t,{delay:e=0,duration:n=400,easing:i=D5,x:r=0,y:s=0,opacity:a=0}={}){const l=getComputedStyle(t),c=+l.opacity,o=l.transform==="none"?"":l.transform,u=c*(1-a),[f,h]=Fa(r),[d,m]=Fa(s);return{delay:e,duration:n,easing:i,css:(w,v)=>`
			transform: ${o} translate(${(1-w)*f}${h}, ${(1-w)*d}${m});
			opacity: ${c-u*v}`}}function N5(t){let e,n,i,r,s=t[1].html+"";return{c(){e=T("div"),n=T("div"),i=H(),r=new Yu(!1),k(n,"class","svelte-8ld2t9"),at(n,"arrow-up",t[1].orientation==="n"),at(n,"arrow-down",t[1].orientation==="s"),r.a=null,k(e,"class","tooltip svelte-8ld2t9"),k(e,"style",t[2]),at(e,"hidden",!t[1].show)},m(a,l){it(a,e,l),S(e,n),S(e,i),r.m(s,e),t[5](e)},p(a,[l]){l&2&&at(n,"arrow-up",a[1].orientation==="n"),l&2&&at(n,"arrow-down",a[1].orientation==="s"),l&2&&s!==(s=a[1].html+"")&&r.p(s),l&4&&k(e,"style",a[2]),l&2&&at(e,"hidden",!a[1].show)},i:St,o:St,d(a){a&&et(e),t[5](null)}}}const Uo=10;function z5(t,e,n){let{tooltipStore:i=null}=e,r=Xn(),s="",a=null,l=!1,c=0;const o=()=>{r.width===0?n(2,s=`left: ${r.left}px; top: ${r.top}px;
        max-width: ${r.maxWidth}px;
        font-size: ${r.fontSize}; opacity: ${c}`):n(2,s=`left: ${r.left}px; top: ${r.top}px;
        width: ${r.width}px; max-width: ${r.maxWidth}px;
        font-size: ${r.fontSize}; opacity: ${c}`)},u=()=>{i!==null&&a!==null&&(n(4,l=!0),i.subscribe(h=>{h!==null&&(h.show?(c=0,h.html===""&&(h.html=" "),n(1,r=h),Ko().then(()=>{const d=a==null?void 0:a.getBoundingClientRect();d&&(n(1,r.left-=d.width/2,r),r.orientation==="n"?(n(1,r.top+=d.height,r),n(1,r.top+=Uo,r)):(n(1,r.top-=d.height,r),n(1,r.top-=Uo,r)),c=1,o())})):(c=0,n(1,r=h)),o())}))};function f(h){He[h?"unshift":"push"](()=>{a=h,n(0,a)})}return t.$$set=h=>{"tooltipStore"in h&&n(3,i=h.tooltipStore)},t.$$.update=()=>{t.$$.dirty&25&&i&&!l&&a&&u()},[a,r,s,i,l,f]}class $5 extends On{constructor(e){super(),Bn(this,e,z5,N5,cn,{tooltipStore:3})}}function Ro(t){let e,n,i,r;return n=new T5({props:{tooltipStore:t[1],challengeStore:t[2]}}),{c(){e=T("div"),yi(n.$$.fragment),k(e,"class","detail-view-container svelte-1svgda2")},m(s,a){it(s,e,a),Nn(n,e,null),r=!0},p(s,a){t=s},i(s){r||(Ht(n.$$.fragment,s),mi(()=>{r&&(i||(i=Ra(e,Vo,{x:1e3,duration:700,opacity:1,ease:Fo},!0)),i.run(1))}),r=!0)},o(s){pe(n.$$.fragment,s),i||(i=Ra(e,Vo,{x:1e3,duration:700,opacity:1,ease:Fo},!1)),i.run(0),r=!1},d(s){s&&et(e),zn(n),s&&i&&i.end()}}}function L5(t){let e,n,i,r,s,a,l,c,o,u,f,h,d,m,w,v,p,y,b;d=new O2({props:{tooltipStore:t[1],challengeStore:t[2]}});let g=t[0].selectedFileName!==""&&Ro(t);return v=new $5({props:{tooltipStore:t[1]}}),{c(){e=T("div"),n=T("div"),n.innerHTML=`<div class="title svelte-1svgda2">Angler</div> 
    <div class="tagline svelte-1svgda2">Exploring and curating machine translation challenge sets!</div>`,i=H(),r=T("div"),s=T("div"),s.textContent="Set Source",a=H(),l=T("div"),l.textContent="Unfamiliar Topics",c=H(),o=T("div"),o.textContent="Unit Test Failures",u=H(),f=T("div"),h=T("div"),yi(d.$$.fragment),m=H(),g&&g.c(),w=H(),yi(v.$$.fragment),k(n,"class","main-top svelte-1svgda2"),k(s,"class","title svelte-1svgda2"),k(l,"class","option topic svelte-1svgda2"),at(l,"selected",t[0].selectedTypes.has("topic")),k(o,"class","option test svelte-1svgda2"),at(o,"selected",t[0].selectedTypes.has("test")),k(r,"class","main-left svelte-1svgda2"),k(h,"class","table-view-container svelte-1svgda2"),at(h,"dehighlight",t[0].selectedFileName!==""),k(f,"class","main-view svelte-1svgda2"),k(e,"class","main-app svelte-1svgda2")},m(_,M){it(_,e,M),S(e,n),S(e,i),S(e,r),S(r,s),S(r,a),S(r,l),S(r,c),S(r,o),S(e,u),S(e,f),S(f,h),Nn(d,h,null),S(f,m),g&&g.m(f,null),S(e,w),Nn(v,e,null),p=!0,y||(b=[ct(l,"click",t[4]),ct(o,"click",t[5])],y=!0)},p(_,[M]){(!p||M&1)&&at(l,"selected",_[0].selectedTypes.has("topic")),(!p||M&1)&&at(o,"selected",_[0].selectedTypes.has("test")),(!p||M&1)&&at(h,"dehighlight",_[0].selectedFileName!==""),_[0].selectedFileName!==""?g?(g.p(_,M),M&1&&Ht(g,1)):(g=Ro(_),g.c(),Ht(g,1),g.m(f,null)):g&&(Wo(),pe(g,1,1,()=>{g=null}),Zo())},i(_){p||(Ht(d.$$.fragment,_),Ht(g),Ht(v.$$.fragment,_),p=!0)},o(_){pe(d.$$.fragment,_),pe(g),pe(v.$$.fragment,_),p=!1},d(_){_&&et(e),zn(d),g&&g.d(),zn(v),y=!1,Et(b)}}}function A5(t,e,n){const i=I2(),r=E2();let s=Kn();const a=o=>{s.selectedTypes.has(o)?s.selectedTypes.delete(o):s.selectedTypes.add(o),r.set(s)};return r.subscribe(o=>{n(0,s=o)}),[s,i,r,a,()=>a("topic"),()=>a("test")]}class I5 extends On{constructor(e){super(),Bn(this,e,A5,L5,cn,{})}}new I5({target:document.getElementById("app")});
