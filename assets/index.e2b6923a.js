var Eh=Object.defineProperty;var Lh=(t,e,n)=>e in t?Eh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>(Lh(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Tt(){}const Ah=t=>t;function T(t,e,n,i,r){t.__svelte_meta={loc:{file:e,line:n,column:i,char:r}}}function wc(t){return t()}function Pa(){return Object.create(null)}function Ht(t){t.forEach(wc)}function Gr(t){return typeof t=="function"}function Cn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ph(t){return Object.keys(t).length===0}function za(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const vc=typeof window<"u";let zh=vc?()=>window.performance.now():()=>Date.now(),Xo=vc?t=>requestAnimationFrame(t):Tt;const Bn=new Set;function _c(t){Bn.forEach(e=>{e.c(t)||(Bn.delete(e),e.f())}),Bn.size!==0&&Xo(_c)}function Oh(t){let e;return Bn.size===0&&Xo(_c),{promise:new Promise(n=>{Bn.add(e={c:t,f:n})}),abort(){Bn.delete(e)}}}function Sc(t,e){t.appendChild(e)}function kc(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ih(t){const e=D("style");return Uh(kc(t),e),e.sheet}function Uh(t,e){return Sc(t.head||t,e),e.sheet}function xc(t,e,n){t.insertBefore(e,n||null)}function Wr(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ct(t){return document.createTextNode(t)}function H(){return Ct(" ")}function Gi(){return Ct("")}function Bh(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Vh(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Rh(t){return Array.from(t.childNodes)}function Qo(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function lt(t,e,n){t.classList[n?"add":"remove"](e)}function Mc(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}class Fh{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=re(n.nodeName):this.e=D(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)xc(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Wr)}}const wr=new Map;let vr=0;function qh(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Yh(t,e){const n={stylesheet:Ih(e),rules:{}};return wr.set(t,n),n}function Oa(t,e,n,i,r,s,o,a=0){const l=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=l){const y=e+(n-e)*s(v);c+=v*100+`%{${o(y,1-y)}}
`}const u=c+`100% {${o(n,1-n)}}
}`,f=`__svelte_${qh(u)}_${a}`,h=kc(t),{stylesheet:d,rules:g}=wr.get(h)||Yh(h,t);g[f]||(g[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${i}ms linear ${r}ms 1 both`,vr+=1,f}function Kh(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),vr-=r,vr||Hh())}function Hh(){Xo(()=>{vr||(wr.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&Wr(e)}),wr.clear())})}let Li;function Ni(t){Li=t}function $h(){if(!Li)throw new Error("Function called outside component initialization");return Li}function ln(t){$h().$$.on_mount.push(t)}const On=[],cn=[];let Vn=[];const Ia=[],Cc=Promise.resolve();let Ks=!1;function Tc(){Ks||(Ks=!0,Cc.then(Dc))}function Hs(){return Tc(),Cc}function Ai(t){Vn.push(t)}const hs=new Set;let En=0;function Dc(){if(En!==0)return;const t=Li;do{try{for(;En<On.length;){const e=On[En];En++,Ni(e),Gh(e.$$)}}catch(e){throw On.length=0,En=0,e}for(Ni(null),On.length=0,En=0;cn.length;)cn.pop()();for(let e=0;e<Vn.length;e+=1){const n=Vn[e];hs.has(n)||(hs.add(n),n())}Vn.length=0}while(On.length);for(;Ia.length;)Ia.pop()();Ks=!1,hs.clear(),Ni(t)}function Gh(t){if(t.fragment!==null){t.update(),Ht(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ai)}}function Wh(t){const e=[],n=[];Vn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Vn=e}let di;function jh(){return di||(di=Promise.resolve(),di.then(()=>{di=null})),di}function fs(t,e,n){t.dispatchEvent(Mc(`${e?"intro":"outro"}${n}`))}const fr=new Set;let Ye;function Nc(){Ye={r:0,c:[],p:Ye}}function Ec(){Ye.r||Ht(Ye.c),Ye=Ye.p}function ee(t,e){t&&t.i&&(fr.delete(t),t.i(e))}function Ee(t,e,n,i){if(t&&t.o){if(fr.has(t))return;fr.add(t),Ye.c.push(()=>{fr.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Xh={duration:0};function Ua(t,e,n,i){const r={direction:"both"};let s=e(t,n,r),o=i?0:1,a=null,l=null,c=null;function u(){c&&Kh(t,c)}function f(d,g){const b=d.b-o;return g*=Math.abs(b),{a:o,b:d.b,d:b,duration:g,start:d.start,end:d.start+g,group:d.group}}function h(d){const{delay:g=0,duration:b=300,easing:v=Ah,tick:y=Tt,css:w}=s||Xh,m={start:zh()+g,b:d};d||(m.group=Ye,Ye.r+=1),a||l?l=m:(w&&(u(),c=Oa(t,o,d,b,g,v,w)),d&&y(0,1),a=f(m,b),Ai(()=>fs(t,d,"start")),Oh(p=>{if(l&&p>l.start&&(a=f(l,b),l=null,fs(t,a.b,"start"),w&&(u(),c=Oa(t,o,a.b,a.duration,0,v,s.css))),a){if(p>=a.end)y(o=a.b,1-o),fs(t,a.b,"end"),l||(a.b?u():--a.group.r||Ht(a.group.c)),a=null;else if(p>=a.start){const _=p-a.start;o=a.a+a.d*v(_/a.duration),y(o,1-o)}}return!!(a||l)}))}return{run(d){Gr(s)?jh().then(()=>{s=s(r),h(d)}):h(d)},end(){u(),a=l=null}}}const Lc=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Qh(t,e){t.d(1),e.delete(t.key)}function Zh(t,e,n,i,r,s,o,a,l,c,u,f){let h=t.length,d=s.length,g=h;const b={};for(;g--;)b[t[g].key]=g;const v=[],y=new Map,w=new Map,m=[];for(g=d;g--;){const C=f(r,s,g),N=n(C);let B=o.get(N);B?i&&m.push(()=>B.p(C,e)):(B=c(N,C),B.c()),y.set(N,v[g]=B),N in b&&w.set(N,Math.abs(g-b[N]))}const p=new Set,_=new Set;function M(C){ee(C,1),C.m(a,u),o.set(C.key,C),u=C.first,d--}for(;h&&d;){const C=v[d-1],N=t[h-1],B=C.key,z=N.key;C===N?(u=C.first,h--,d--):y.has(z)?!o.has(B)||p.has(B)?M(C):_.has(z)?h--:w.get(B)>w.get(z)?(_.add(B),M(C)):(p.add(z),h--):(l(N,o),h--)}for(;h--;){const C=t[h];y.has(C.key)||l(C,o)}for(;d;)M(v[d-1]);return Ht(m),v}function Ba(t,e,n,i){const r=new Set;for(let s=0;s<e.length;s++){const o=i(n(t,e,s));if(r.has(o))throw new Error("Cannot have duplicate keys in a keyed each");r.add(o)}}function Pi(t){t&&t.c()}function Kn(t,e,n,i){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),i||Ai(()=>{const o=t.$$.on_mount.map(wc).filter(Gr);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ht(o),t.$$.on_mount=[]}),s.forEach(Ai)}function Hn(t,e){const n=t.$$;n.fragment!==null&&(Wh(n.after_update),Ht(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Jh(t,e){t.$$.dirty[0]===-1&&(On.push(t),Tc(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ni(t,e,n,i,r,s,o,a=[-1]){const l=Li;Ni(t);const c=t.$$={fragment:null,ctx:[],props:s,update:Tt,not_equal:r,bound:Pa(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Pa(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...d)=>{const g=d.length?d[0]:h;return c.ctx&&r(c.ctx[f],c.ctx[f]=g)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](g),u&&Jh(t,f)),h}):[],c.update(),u=!0,Ht(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=Rh(e.target);c.fragment&&c.fragment.l(f),f.forEach(Wr)}else c.fragment&&c.fragment.c();e.intro&&ee(t.$$.fragment),Kn(t,e.target,e.anchor,e.customElement),Dc()}Ni(l)}class tf{$destroy(){Hn(this,1),this.$destroy=Tt}$on(e,n){if(!Gr(n))return Tt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ph(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function it(t,e){document.dispatchEvent(Mc(t,Object.assign({version:"3.58.0"},e),{bubbles:!0}))}function S(t,e){it("SvelteDOMInsert",{target:t,node:e}),Sc(t,e)}function et(t,e,n){it("SvelteDOMInsert",{target:t,node:e,anchor:n}),xc(t,e,n)}function nt(t){it("SvelteDOMRemove",{node:t}),Wr(t)}function yt(t,e,n,i,r,s,o){const a=i===!0?["capture"]:i?Array.from(Object.keys(i)):[];r&&a.push("preventDefault"),s&&a.push("stopPropagation"),o&&a.push("stopImmediatePropagation"),it("SvelteDOMAddEventListener",{node:t,event:e,handler:n,modifiers:a});const l=Bh(t,e,n,i);return()=>{it("SvelteDOMRemoveEventListener",{node:t,event:e,handler:n,modifiers:a}),l()}}function x(t,e,n){Vh(t,e,n),n==null?it("SvelteDOMRemoveAttribute",{node:t,attribute:e}):it("SvelteDOMSetAttribute",{node:t,attribute:e,value:n})}function ds(t,e,n){t[e]=n,it("SvelteDOMSetProperty",{node:t,property:e,value:n})}function Ut(t,e){e=""+e,t.data!==e&&(it("SvelteDOMSetData",{node:t,data:e}),t.data=e)}function ef(t,e){e=""+e,t.wholeText!==e&&(it("SvelteDOMSetData",{node:t,data:e}),t.data=e)}function Et(t){if(typeof t!="string"&&!(t&&typeof t=="object"&&"length"in t)){let e="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&t&&Symbol.iterator in t&&(e+=" You can use a spread to convert this iterable into an array."),new Error(e)}}function ii(t,e,n){for(const i of Object.keys(e))~n.indexOf(i)||console.warn(`<${t}> received an unexpected slot "${i}".`)}class ri extends tf{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}var $s="http://www.w3.org/1999/xhtml";const Va={svg:"http://www.w3.org/2000/svg",xhtml:$s,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Va.hasOwnProperty(e)?{space:Va[e],local:t}:t}function nf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$s&&e.documentElement.namespaceURI===$s?e.createElement(t):e.createElementNS(n,t)}}function rf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ac(t){var e=jr(t);return(e.local?rf:nf)(e)}function sf(){}function Zo(t){return t==null?sf:function(){return this.querySelector(t)}}function of(t){typeof t!="function"&&(t=Zo(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new jt(i,this._parents)}function Pc(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function af(){return[]}function zc(t){return t==null?af:function(){return this.querySelectorAll(t)}}function lf(t){return function(){return Pc(t.apply(this,arguments))}}function cf(t){typeof t=="function"?t=lf(t):t=zc(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),r.push(l));return new jt(i,r)}function Oc(t){return function(){return this.matches(t)}}function Ic(t){return function(e){return e.matches(t)}}var uf=Array.prototype.find;function hf(t){return function(){return uf.call(this.children,t)}}function ff(){return this.firstElementChild}function df(t){return this.select(t==null?ff:hf(typeof t=="function"?t:Ic(t)))}var gf=Array.prototype.filter;function pf(){return Array.from(this.children)}function mf(t){return function(){return gf.call(this.children,t)}}function yf(t){return this.selectAll(t==null?pf:mf(typeof t=="function"?t:Ic(t)))}function bf(t){typeof t!="function"&&(t=Oc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new jt(i,this._parents)}function Uc(t){return new Array(t.length)}function wf(){return new jt(this._enter||this._groups.map(Uc),this._parents)}function _r(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_r.prototype={constructor:_r,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vf(t){return function(){return t}}function _f(t,e,n,i,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new _r(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function Sf(t,e,n,i,r,s,o){var a,l,c=new Map,u=e.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(h[a]=d=o.call(l,l.__data__,a,e)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(t,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new _r(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(r[a]=l)}function kf(t){return t.__data__}function xf(t,e){if(!arguments.length)return Array.from(this,kf);var n=e?Sf:_f,i=this._parents,r=this._groups;typeof t!="function"&&(t=vf(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=Mf(t.call(u,u&&u.__data__,c,i)),g=d.length,b=a[c]=new Array(g),v=o[c]=new Array(g),y=l[c]=new Array(h);n(u,f,b,v,y,d,e);for(var w=0,m=0,p,_;w<g;++w)if(p=b[w]){for(w>=m&&(m=w+1);!(_=v[m])&&++m<g;);p._next=_||null}}return o=new jt(o,i),o._enter=a,o._exit=l,o}function Mf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Cf(){return new jt(this._exit||this._groups.map(Uc),this._parents)}function Tf(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Df(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new jt(a,this._parents)}function Nf(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ef(t){t||(t=Lf);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new jt(r,this._parents).order()}function Lf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Af(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Pf(){return Array.from(this)}function zf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function Of(){let t=0;for(const e of this)++t;return t}function If(){return!this.node()}function Uf(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function Bf(t){return function(){this.removeAttribute(t)}}function Vf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rf(t,e){return function(){this.setAttribute(t,e)}}function Ff(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Yf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kf(t,e){var n=jr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Vf:Bf:typeof e=="function"?n.local?Yf:qf:n.local?Ff:Rf)(n,e))}function Bc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hf(t){return function(){this.style.removeProperty(t)}}function $f(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Gf(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Wf(t,e,n){return arguments.length>1?this.each((e==null?Hf:typeof e=="function"?Gf:$f)(t,e,n==null?"":n)):$n(this.node(),t)}function $n(t,e){return t.style.getPropertyValue(e)||Bc(t).getComputedStyle(t,null).getPropertyValue(e)}function jf(t){return function(){delete this[t]}}function Xf(t,e){return function(){this[t]=e}}function Qf(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Zf(t,e){return arguments.length>1?this.each((e==null?jf:typeof e=="function"?Qf:Xf)(t,e)):this.node()[t]}function Vc(t){return t.trim().split(/^|\s+/)}function Jo(t){return t.classList||new Rc(t)}function Rc(t){this._node=t,this._names=Vc(t.getAttribute("class")||"")}Rc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fc(t,e){for(var n=Jo(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function qc(t,e){for(var n=Jo(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Jf(t){return function(){Fc(this,t)}}function t0(t){return function(){qc(this,t)}}function e0(t,e){return function(){(e.apply(this,arguments)?Fc:qc)(this,t)}}function n0(t,e){var n=Vc(t+"");if(arguments.length<2){for(var i=Jo(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?e0:e?Jf:t0)(n,e))}function i0(){this.textContent=""}function r0(t){return function(){this.textContent=t}}function s0(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function o0(t){return arguments.length?this.each(t==null?i0:(typeof t=="function"?s0:r0)(t)):this.node().textContent}function a0(){this.innerHTML=""}function l0(t){return function(){this.innerHTML=t}}function c0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function u0(t){return arguments.length?this.each(t==null?a0:(typeof t=="function"?c0:l0)(t)):this.node().innerHTML}function h0(){this.nextSibling&&this.parentNode.appendChild(this)}function f0(){return this.each(h0)}function d0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function g0(){return this.each(d0)}function p0(t){var e=typeof t=="function"?t:Ac(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function m0(){return null}function y0(t,e){var n=typeof t=="function"?t:Ac(t),i=e==null?m0:typeof e=="function"?e:Zo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function b0(){var t=this.parentNode;t&&t.removeChild(this)}function w0(){return this.each(b0)}function v0(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _0(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function S0(t){return this.select(t?_0:v0)}function k0(t){return arguments.length?this.property("__data__",t):this.node().__data__}function x0(t){return function(e){t.call(this,e,this.__data__)}}function M0(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function C0(t){return function(){var e=this.__on;if(!!e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function T0(t,e,n){return function(){var i=this.__on,r,s=x0(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function D0(t,e,n){var i=M0(t+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?T0:C0,r=0;r<s;++r)this.each(a(i[r],e,n));return this}function Yc(t,e,n){var i=Bc(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function N0(t,e){return function(){return Yc(this,t,e)}}function E0(t,e){return function(){return Yc(this,t,e.apply(this,arguments))}}function L0(t,e){return this.each((typeof e=="function"?E0:N0)(t,e))}function*A0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var ta=[null];function jt(t,e){this._groups=t,this._parents=e}function si(){return new jt([[document.documentElement]],ta)}function P0(){return this}jt.prototype=si.prototype={constructor:jt,select:of,selectAll:cf,selectChild:df,selectChildren:yf,filter:bf,data:xf,enter:wf,exit:Cf,join:Tf,merge:Df,selection:P0,order:Nf,sort:Ef,call:Af,nodes:Pf,node:zf,size:Of,empty:If,each:Uf,attr:Kf,style:Wf,property:Zf,classed:n0,text:o0,html:u0,raise:f0,lower:g0,append:p0,insert:y0,remove:w0,clone:S0,datum:k0,on:D0,dispatch:L0,[Symbol.iterator]:A0};function Wt(t){return typeof t=="string"?new jt([[document.querySelector(t)]],[document.documentElement]):new jt([[t]],ta)}function z0(t){let e;for(;e=t.sourceEvent;)t=e;return t}function be(t,e){if(t=z0(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function O0(t){return typeof t=="string"?new jt([document.querySelectorAll(t)],[document.documentElement]):new jt([Pc(t)],ta)}function I0(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function U0(t,e){return fetch(t,e).then(I0)}function dr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function B0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ea(t){let e,n,i;t.length!==2?(e=dr,n=(a,l)=>dr(t(a),l),i=(a,l)=>t(a)-l):(e=t===dr||t===B0?t:V0,n=t,i=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function V0(){return 0}function R0(t){return t===null?NaN:+t}const F0=ea(dr),q0=F0.right;ea(R0).center;const Kc=q0;function Y0(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Ei(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Gn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[i++]=a),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class Ra extends Map{constructor(e,n=$0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Fa(this,e))}has(e){return super.has(Fa(this,e))}set(e,n){return super.set(K0(this,e),n)}delete(e){return super.delete(H0(this,e))}}function Fa({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function K0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function H0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function $0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function G0(t){return t}var W0=Array.prototype,j0=W0.slice;function gs(t){return()=>t}const X0=Math.sqrt(50),Q0=Math.sqrt(10),Z0=Math.sqrt(2);function Sr(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=X0?10:s>=Q0?5:s>=Z0?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Sr(t,e,n*2):[a,l,c]}function zi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,o]=i?Sr(e,t,n):Sr(t,e,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Wn(t,e,n){return e=+e,t=+t,n=+n,Sr(t,e,n)[2]}function kr(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Wn(e,t,n):Wn(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function J0(t,e,n){let i;for(;;){const r=Wn(t,e,n);if(r===i||r===0||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function Hc(t){return Math.max(1,Math.ceil(Math.log(Y0(t))/Math.LN2)+1)}function td(){var t=G0,e=Ei,n=Hc;function i(r){Array.isArray(r)||(r=Array.from(r));var s,o=r.length,a,l,c=new Array(o);for(s=0;s<o;++s)c[s]=t(r[s],s,r);var u=e(c),f=u[0],h=u[1],d=n(c,f,h);if(!Array.isArray(d)){const m=h,p=+d;if(e===Ei&&([f,h]=J0(f,h,p)),d=zi(f,h,p),d[0]<=f&&(l=Wn(f,h,p)),d[d.length-1]>=h)if(m>=h&&e===Ei){const _=Wn(f,h,p);isFinite(_)&&(_>0?h=(Math.floor(h/_)+1)*_:_<0&&(h=(Math.ceil(h*-_)+1)/-_))}else d.pop()}for(var g=d.length,b=0,v=g;d[b]<=f;)++b;for(;d[v-1]>h;)--v;(b||v<g)&&(d=d.slice(b,v),g=v-b);var y=new Array(g+1),w;for(s=0;s<=g;++s)w=y[s]=[],w.x0=s>0?d[s-1]:f,w.x1=s<g?d[s]:h;if(isFinite(l)){if(l>0)for(s=0;s<o;++s)(a=c[s])!=null&&f<=a&&a<=h&&y[Math.min(g,Math.floor((a-f)/l))].push(r[s]);else if(l<0){for(s=0;s<o;++s)if((a=c[s])!=null&&f<=a&&a<=h){const m=Math.floor((f-a)*l);y[Math.min(g,m+(d[m]<=a))].push(r[s])}}}else for(s=0;s<o;++s)(a=c[s])!=null&&f<=a&&a<=h&&y[Kc(d,a,0,g)].push(r[s]);return y}return i.value=function(r){return arguments.length?(t=typeof r=="function"?r:gs(r),i):t},i.domain=function(r){return arguments.length?(e=typeof r=="function"?r:gs([r[0],r[1]]),i):e},i.thresholds=function(r){return arguments.length?(n=typeof r=="function"?r:gs(Array.isArray(r)?j0.call(r):r),i):n},i}function ed(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function nd(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function id(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function rd(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function sd(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}const od=ad(Math.random);function ad(t){return function(n,i=0,r=n.length){let s=r-(i=+i);for(;s;){const o=t()*s--|0,a=n[s+i];n[s+i]=n[o+i],n[o+i]=a}return n}}function ld(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function Tn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function cd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qa=Symbol("implicit");function na(){var t=new Ra,e=[],n=[],i=qa;function r(s){let o=t.get(s);if(o===void 0){if(i!==qa)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Ra;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return na(e,n).unknown(i)},Tn.apply(r,arguments),r}function ia(){var t=na().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,d=r<i,g=d?r:i,b=d?i:r;s=(b-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(b-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var v=sd(h).map(function(y){return g+s*y});return n(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,f()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return ia(e(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},Tn.apply(f(),arguments)}function $c(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return $c(e())},t}function ud(){return $c(ia.apply(null,arguments).paddingInner(1))}function oi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Wi(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function dn(){}var Sn=.7,jn=1/Sn,Rn="\\s*([+-]?\\d+)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hd=/^#([0-9a-f]{3,8})$/,fd=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),dd=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),gd=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Oi}\\)$`),pd=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${Oi}\\)$`),md=new RegExp(`^hsl\\(${Oi},${Pe},${Pe}\\)$`),yd=new RegExp(`^hsla\\(${Oi},${Pe},${Pe},${Oi}\\)$`),Ya={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oi(dn,un,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ka,formatHex:Ka,formatHex8:bd,formatHsl:wd,formatRgb:Ha,toString:Ha});function Ka(){return this.rgb().formatHex()}function bd(){return this.rgb().formatHex8()}function wd(){return Gc(this).formatHsl()}function Ha(){return this.rgb().formatRgb()}function un(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hd.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$a(e):n===3?new At(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?er(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?er(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fd.exec(t))?new At(e[1],e[2],e[3],1):(e=dd.exec(t))?new At(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gd.exec(t))?er(e[1],e[2],e[3],e[4]):(e=pd.exec(t))?er(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=md.exec(t))?ja(e[1],e[2]/100,e[3]/100,1):(e=yd.exec(t))?ja(e[1],e[2]/100,e[3]/100,e[4]):Ya.hasOwnProperty(t)?$a(Ya[t]):t==="transparent"?new At(NaN,NaN,NaN,0):null}function $a(t){return new At(t>>16&255,t>>8&255,t&255,1)}function er(t,e,n,i){return i<=0&&(t=e=n=NaN),new At(t,e,n,i)}function ra(t){return t instanceof dn||(t=un(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function Ii(t,e,n,i){return arguments.length===1?ra(t):new At(t,e,n,i==null?1:i)}function At(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}oi(At,Ii,Wi(dn,{brighter(t){return t=t==null?jn:Math.pow(jn,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Sn:Math.pow(Sn,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new At(vn(this.r),vn(this.g),vn(this.b),xr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ga,formatHex:Ga,formatHex8:vd,formatRgb:Wa,toString:Wa}));function Ga(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}`}function vd(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}${wn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wa(){const t=xr(this.opacity);return`${t===1?"rgb(":"rgba("}${vn(this.r)}, ${vn(this.g)}, ${vn(this.b)}${t===1?")":`, ${t})`}`}function xr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wn(t){return t=vn(t),(t<16?"0":"")+t.toString(16)}function ja(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ve(t,e,n,i)}function Gc(t){if(t instanceof ve)return new ve(t.h,t.s,t.l,t.opacity);if(t instanceof dn||(t=un(t)),!t)return new ve;if(t instanceof ve)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new ve(o,a,l,t.opacity)}function Wc(t,e,n,i){return arguments.length===1?Gc(t):new ve(t,e,n,i==null?1:i)}function ve(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}oi(ve,Wc,Wi(dn,{brighter(t){return t=t==null?jn:Math.pow(jn,t),new ve(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Sn:Math.pow(Sn,t),new ve(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new At(ps(t>=240?t-240:t+120,r,i),ps(t,r,i),ps(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ve(Xa(this.h),nr(this.s),nr(this.l),xr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xr(this.opacity);return`${t===1?"hsl(":"hsla("}${Xa(this.h)}, ${nr(this.s)*100}%, ${nr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xa(t){return t=(t||0)%360,t<0?t+360:t}function nr(t){return Math.max(0,Math.min(1,t||0))}function ps(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const jc=Math.PI/180,Xc=180/Math.PI,Mr=18,Qc=.96422,Zc=1,Jc=.82521,tu=4/29,Fn=6/29,eu=3*Fn*Fn,_d=Fn*Fn*Fn;function nu(t){if(t instanceof ze)return new ze(t.l,t.a,t.b,t.opacity);if(t instanceof Le)return ru(t);t instanceof At||(t=ra(t));var e=ws(t.r),n=ws(t.g),i=ws(t.b),r=ms((.2225045*e+.7168786*n+.0606169*i)/Zc),s,o;return e===n&&n===i?s=o=r:(s=ms((.4360747*e+.3850649*n+.1430804*i)/Qc),o=ms((.0139322*e+.0971045*n+.7141733*i)/Jc)),new ze(116*r-16,500*(s-r),200*(r-o),t.opacity)}function Sd(t,e,n,i){return arguments.length===1?nu(t):new ze(t,e,n,i==null?1:i)}function ze(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}oi(ze,Sd,Wi(dn,{brighter(t){return new ze(this.l+Mr*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new ze(this.l-Mr*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Qc*ys(e),t=Zc*ys(t),n=Jc*ys(n),new At(bs(3.1338561*e-1.6168667*t-.4906146*n),bs(-.9787684*e+1.9161415*t+.033454*n),bs(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function ms(t){return t>_d?Math.pow(t,1/3):t/eu+tu}function ys(t){return t>Fn?t*t*t:eu*(t-tu)}function bs(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ws(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function iu(t){if(t instanceof Le)return new Le(t.h,t.c,t.l,t.opacity);if(t instanceof ze||(t=nu(t)),t.a===0&&t.b===0)return new Le(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Xc;return new Le(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function kd(t,e,n,i){return arguments.length===1?iu(t):new Le(n,e,t,i==null?1:i)}function Gs(t,e,n,i){return arguments.length===1?iu(t):new Le(t,e,n,i==null?1:i)}function Le(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function ru(t){if(isNaN(t.h))return new ze(t.l,0,0,t.opacity);var e=t.h*jc;return new ze(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}oi(Le,Gs,Wi(dn,{brighter(t){return new Le(this.h,this.c,this.l+Mr*(t==null?1:t),this.opacity)},darker(t){return new Le(this.h,this.c,this.l-Mr*(t==null?1:t),this.opacity)},rgb(){return ru(this).rgb()}}));var su=-.14861,sa=1.78277,oa=-.29227,Xr=-.90649,Ui=1.97294,Qa=Ui*Xr,Za=Ui*sa,Ja=sa*oa-Xr*su;function xd(t){if(t instanceof _n)return new _n(t.h,t.s,t.l,t.opacity);t instanceof At||(t=ra(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Ja*i+Qa*e-Za*n)/(Ja+Qa-Za),s=i-r,o=(Ui*(n-r)-oa*s)/Xr,a=Math.sqrt(o*o+s*s)/(Ui*r*(1-r)),l=a?Math.atan2(o,s)*Xc-120:NaN;return new _n(l<0?l+360:l,a,r,t.opacity)}function hn(t,e,n,i){return arguments.length===1?xd(t):new _n(t,e,n,i==null?1:i)}function _n(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}oi(_n,hn,Wi(dn,{brighter(t){return t=t==null?jn:Math.pow(jn,t),new _n(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Sn:Math.pow(Sn,t),new _n(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*jc,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new At(255*(e+n*(su*i+sa*r)),255*(e+n*(oa*i+Xr*r)),255*(e+n*(Ui*i)),this.opacity)}}));function Md(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function Cd(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return Md((n-i/e)*e,o,r,s,a)}}const Qr=t=>()=>t;function ou(t,e){return function(n){return t+n*e}}function Td(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function au(t,e){var n=e-t;return n?ou(t,n>180||n<-180?n-360*Math.round(n/360):n):Qr(isNaN(t)?e:t)}function Dd(t){return(t=+t)==1?Ge:function(e,n){return n-e?Td(e,n,t):Qr(isNaN(e)?n:e)}}function Ge(t,e){var n=e-t;return n?ou(t,n):Qr(isNaN(t)?e:t)}const Cr=function t(e){var n=Dd(e);function i(r,s){var o=n((r=Ii(r)).r,(s=Ii(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=Ge(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function Nd(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ii(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=t(i),r=t(r),s=t(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var Ed=Nd(Cd);function Ld(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function Ad(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pd(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=ai(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function zd(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function we(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Od(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=ai(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Ws=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vs=new RegExp(Ws.source,"g");function Id(t){return function(){return t}}function Ud(t){return function(e){return t(e)+""}}function lu(t,e){var n=Ws.lastIndex=vs.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=Ws.exec(t))&&(r=vs.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:we(i,r)})),n=vs.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Ud(l[0].x):Id(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function ai(t,e){var n=typeof e,i;return e==null||n==="boolean"?Qr(e):(n==="number"?we:n==="string"?(i=un(e))?(e=i,Cr):lu:e instanceof un?Cr:e instanceof Date?zd:Ad(e)?Ld:Array.isArray(e)?Pd:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Od:we)(t,e)}function cu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var tl=180/Math.PI,js={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uu(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*tl,skewX:Math.atan(l)*tl,scaleX:o,scaleY:a}}var ir;function Bd(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?js:uu(e.a,e.b,e.c,e.d,e.e,e.f)}function Vd(t){return t==null||(ir||(ir=document.createElementNS("http://www.w3.org/2000/svg","g")),ir.setAttribute("transform",t),!(t=ir.transform.baseVal.consolidate()))?js:(t=t.matrix,uu(t.a,t.b,t.c,t.d,t.e,t.f))}function hu(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var b=d.push("translate(",null,e,null,n);g.push({i:b-4,x:we(c,f)},{i:b-2,x:we(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:we(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:we(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var b=d.push(r(d)+"scale(",null,",",null,")");g.push({i:b-4,x:we(c,f)},{i:b-2,x:we(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,b=h.length,v;++g<b;)f[(v=h[g]).i]=v.x(d);return f.join("")}}}var Rd=hu(Bd,"px, ","px)","deg)"),Fd=hu(Vd,", ",")",")"),qd=1e-12;function el(t){return((t=Math.exp(t))+1/t)/2}function Yd(t){return((t=Math.exp(t))-1/t)/2}function Kd(t){return((t=Math.exp(2*t))-1)/(t+1)}const Hd=function t(e,n,i){function r(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],f=o[1],h=o[2],d=u-a,g=f-l,b=d*d+g*g,v,y;if(b<qd)y=Math.log(h/c)/e,v=function(C){return[a+C*d,l+C*g,c*Math.exp(e*C*y)]};else{var w=Math.sqrt(b),m=(h*h-c*c+i*b)/(2*c*n*w),p=(h*h-c*c-i*b)/(2*h*n*w),_=Math.log(Math.sqrt(m*m+1)-m),M=Math.log(Math.sqrt(p*p+1)-p);y=(M-_)/e,v=function(C){var N=C*y,B=el(_),z=c/(n*w)*(B*Kd(e*N+_)-Yd(_));return[a+z*d,l+z*g,c*B/el(e*N+_)]}}return v.duration=y*1e3*e/Math.SQRT2,v}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r}(Math.SQRT2,2,4);function $d(t){return function(e,n){var i=t((e=Gs(e)).h,(n=Gs(n)).h),r=Ge(e.c,n.c),s=Ge(e.l,n.l),o=Ge(e.opacity,n.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const Gd=$d(au);function fu(t){return function e(n){n=+n;function i(r,s){var o=t((r=hn(r)).h,(s=hn(s)).h),a=Ge(r.s,s.s),l=Ge(r.l,s.l),c=Ge(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=e,i}(1)}fu(au);var du=fu(Ge);function Wd(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function jd(t){return function(){return t}}function Xd(t){return+t}var nl=[0,1];function le(t){return t}function Xs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jd(isNaN(e)?NaN:.5)}function Qd(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Zd(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=Xs(r,i),s=n(o,s)):(i=Xs(i,r),s=n(s,o)),function(a){return s(i(a))}}function Jd(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Xs(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Kc(t,a,1,i)-1;return s[l](r[l](a))}}function Zr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aa(){var t=nl,e=nl,n=ai,i,r,s,o=le,a,l,c;function u(){var h=Math.min(t.length,e.length);return o!==le&&(o=Qd(t[0],t[h-1])),a=h>2?Jd:Zd,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(e,t.map(i),we)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Xd),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=cu,u()},f.clamp=function(h){return arguments.length?(o=h?!0:le,u()):o!==le},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function gu(){return aa()(le,le)}function t1(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Tr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Xn(t){return t=Tr(Math.abs(t)),t?t[1]:NaN}function e1(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function n1(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var i1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bi(t){if(!(e=i1.exec(t)))throw new Error("invalid format: "+t);var e;return new la({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bi.prototype=la.prototype;function la(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}la.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r1(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var pu;function s1(t,e){var n=Tr(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(pu=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Tr(t,Math.max(0,e+s-1))[0]}function il(t,e){var n=Tr(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const rl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:t1,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>il(t*100,e),r:il,s:s1,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function sl(t){return t}var ol=Array.prototype.map,al=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function o1(t){var e=t.grouping===void 0||t.thousands===void 0?sl:e1(ol.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?sl:n1(ol.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Bi(f);var h=f.fill,d=f.align,g=f.sign,b=f.symbol,v=f.zero,y=f.width,w=f.comma,m=f.precision,p=f.trim,_=f.type;_==="n"?(w=!0,_="g"):rl[_]||(m===void 0&&(m=12),p=!0,_="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var M=b==="$"?n:b==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=b==="$"?i:/[%p]/.test(_)?o:"",N=rl[_],B=/[defgprs%]/.test(_);m=m===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function z(A){var Y=M,I=C,k,V,O;if(_==="c")I=N(A)+I,A="";else{A=+A;var q=A<0||1/A<0;if(A=isNaN(A)?l:N(Math.abs(A),m),p&&(A=r1(A)),q&&+A==0&&g!=="+"&&(q=!1),Y=(q?g==="("?g:a:g==="-"||g==="("?"":g)+Y,I=(_==="s"?al[8+pu/3]:"")+I+(q&&g==="("?")":""),B){for(k=-1,V=A.length;++k<V;)if(O=A.charCodeAt(k),48>O||O>57){I=(O===46?r+A.slice(k+1):A.slice(k))+I,A=A.slice(0,k);break}}}w&&!v&&(A=e(A,1/0));var G=Y.length+A.length+I.length,K=G<y?new Array(y-G+1).join(h):"";switch(w&&v&&(A=e(K+A,K.length?y-I.length:1/0),K=""),d){case"<":A=Y+A+I+K;break;case"=":A=Y+K+A+I;break;case"^":A=K.slice(0,G=K.length>>1)+Y+A+I+K.slice(G);break;default:A=K+Y+A+I;break}return s(A)}return z.toString=function(){return f+""},z}function u(f,h){var d=c((f=Bi(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Xn(h)/3)))*3,b=Math.pow(10,-g),v=al[8+g/3];return function(y){return d(b*y)+v}}return{format:c,formatPrefix:u}}var rr,Jr,mu;a1({thousands:",",grouping:[3],currency:["$",""]});function a1(t){return rr=o1(t),Jr=rr.format,mu=rr.formatPrefix,rr}function l1(t){return Math.max(0,-Xn(Math.abs(t)))}function c1(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xn(e)/3)))*3-Xn(Math.abs(t)))}function u1(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xn(e)-Xn(t))+1}function h1(t,e,n,i){var r=kr(t,e,n),s;switch(i=Bi(i==null?",f":i),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=c1(r,o))&&(i.precision=s),mu(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=u1(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=l1(r))&&(i.precision=s-(i.type==="%")*2);break}}return Jr(i)}function ca(t){var e=t.domain;return t.ticks=function(n){var i=e();return zi(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var r=e();return h1(r[0],r[r.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Wn(o,a,n),c===l)return i[r]=o,i[s]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function yu(){var t=gu();return t.copy=function(){return Zr(t,yu())},Tn.apply(t,arguments),ca(t)}function bu(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function ll(t){return Math.log(t)}function cl(t){return Math.exp(t)}function f1(t){return-Math.log(-t)}function d1(t){return-Math.exp(-t)}function g1(t){return isFinite(t)?+("1e"+t):t<0?0:t}function p1(t){return t===10?g1:t===Math.E?Math.exp:e=>Math.pow(t,e)}function m1(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ul(t){return(e,n)=>-t(-e,n)}function y1(t){const e=t(ll,cl),n=e.domain;let i=10,r,s;function o(){return r=m1(i),s=p1(i),n()[0]<0?(r=ul(r),s=ul(s),t(f1,d1)):t(ll,cl),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,b;const v=a==null?10:+a;let y=[];if(!(i%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(b=h<0?g/s(-h):g*s(h),!(b<c)){if(b>u)break;y.push(b)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(b=h>0?g/s(-h):g*s(h),!(b<c)){if(b>u)break;y.push(b)}y.length*2<v&&(y=zi(c,u,v))}else y=zi(h,d,Math.min(d-h,v)).map(s);return f?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Bi(l)).precision==null&&(l.trim=!0),l=Jr(l)),a===1/0)return l;const c=Math.max(1,i*a/e.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},e.nice=()=>n(bu(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function wu(){const t=y1(aa()).domain([1,10]);return t.copy=()=>Zr(t,wu()).base(t.base()),Tn.apply(t,arguments),t}function hl(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function b1(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function w1(t){return t<0?-t*t:t*t}function v1(t){var e=t(le,le),n=1;function i(){return n===1?t(le,le):n===.5?t(b1,w1):t(hl(n),hl(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ca(e)}function ua(){var t=v1(aa());return t.copy=function(){return Zr(t,ua()).exponent(t.exponent())},Tn.apply(t,arguments),t}function _1(){return ua.apply(null,arguments).exponent(.5)}const _s=new Date,Ss=new Date;function Lt(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},r.filter=s=>Lt(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(_s.setTime(+s),Ss.setTime(+o),t(_s),t(Ss),Math.floor(n(_s,Ss))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const Dr=Lt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Dr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Dr);Dr.range;const Ke=1e3,ce=Ke*60,He=ce*60,We=He*24,ha=We*7,fl=We*30,ks=We*365,an=Lt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ke)},(t,e)=>(e-t)/Ke,t=>t.getUTCSeconds());an.range;const ts=Lt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ke)},(t,e)=>{t.setTime(+t+e*ce)},(t,e)=>(e-t)/ce,t=>t.getMinutes());ts.range;const fa=Lt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ce)},(t,e)=>(e-t)/ce,t=>t.getUTCMinutes());fa.range;const es=Lt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ke-t.getMinutes()*ce)},(t,e)=>{t.setTime(+t+e*He)},(t,e)=>(e-t)/He,t=>t.getHours());es.range;const da=Lt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*He)},(t,e)=>(e-t)/He,t=>t.getUTCHours());da.range;const li=Lt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ce)/We,t=>t.getDate()-1);li.range;const ns=Lt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/We,t=>t.getUTCDate()-1);ns.range;const vu=Lt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/We,t=>Math.floor(t/We));vu.range;function Dn(t){return Lt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ce)/ha)}const ji=Dn(0),Nr=Dn(1),S1=Dn(2),k1=Dn(3),Qn=Dn(4),x1=Dn(5),M1=Dn(6);ji.range;Nr.range;S1.range;k1.range;Qn.range;x1.range;M1.range;function Nn(t){return Lt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ha)}const is=Nn(0),Er=Nn(1),C1=Nn(2),T1=Nn(3),Zn=Nn(4),D1=Nn(5),N1=Nn(6);is.range;Er.range;C1.range;T1.range;Zn.range;D1.range;N1.range;const rs=Lt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rs.range;const ga=Lt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ga.range;const Oe=Lt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Oe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Oe.range;const je=Lt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});je.range;function _u(t,e,n,i,r,s){const o=[[an,1,Ke],[an,5,5*Ke],[an,15,15*Ke],[an,30,30*Ke],[s,1,ce],[s,5,5*ce],[s,15,15*ce],[s,30,30*ce],[r,1,He],[r,3,3*He],[r,6,6*He],[r,12,12*He],[i,1,We],[i,2,2*We],[n,1,ha],[e,1,fl],[e,3,3*fl],[t,1,ks]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=ea(([,,v])=>v).right(o,h);if(d===o.length)return t.every(kr(c/ks,u/ks,f));if(d===0)return Dr.every(Math.max(kr(c,u,f),1));const[g,b]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(b)}return[a,l]}const[E1,L1]=_u(je,ga,is,vu,da,fa),[A1,P1]=_u(Oe,rs,ji,li,es,ts);function xs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ms(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function z1(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=pi(r),u=mi(r),f=pi(s),h=mi(s),d=pi(o),g=mi(o),b=pi(a),v=mi(a),y=pi(l),w=mi(l),m={a:q,A:G,b:K,B:W,c:null,d:bl,e:bl,f:ig,g:dg,G:pg,H:tg,I:eg,j:ng,L:Su,m:rg,M:sg,p:Q,q:J,Q:_l,s:Sl,S:og,u:ag,U:lg,V:cg,w:ug,W:hg,x:null,X:null,y:fg,Y:gg,Z:mg,"%":vl},p={a:gt,A:ut,b:st,B:dt,c:null,d:wl,e:wl,f:vg,g:Eg,G:Ag,H:yg,I:bg,j:wg,L:xu,m:_g,M:Sg,p:ct,q:R,Q:_l,s:Sl,S:kg,u:xg,U:Mg,V:Cg,w:Tg,W:Dg,x:null,X:null,y:Ng,Y:Lg,Z:Pg,"%":vl},_={a:z,A,b:Y,B:I,c:k,d:ml,e:ml,f:X1,g:pl,G:gl,H:yl,I:yl,j:$1,L:j1,m:H1,M:G1,p:B,q:K1,Q:Z1,s:J1,S:W1,u:V1,U:R1,V:F1,w:B1,W:q1,x:V,X:O,y:pl,Y:gl,Z:Y1,"%":Q1};m.x=M(n,m),m.X=M(i,m),m.c=M(e,m),p.x=M(n,p),p.X=M(i,p),p.c=M(e,p);function M(F,$){return function(L){var P=[],pt=-1,ft=0,_t=F.length,St,Z,rt;for(L instanceof Date||(L=new Date(+L));++pt<_t;)F.charCodeAt(pt)===37&&(P.push(F.slice(ft,pt)),(Z=dl[St=F.charAt(++pt)])!=null?St=F.charAt(++pt):Z=St==="e"?" ":"0",(rt=$[St])&&(St=rt(L,Z)),P.push(St),ft=pt+1);return P.push(F.slice(ft,pt)),P.join("")}}function C(F,$){return function(L){var P=gi(1900,void 0,1),pt=N(P,F,L+="",0),ft,_t;if(pt!=L.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if($&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(ft=Ms(gi(P.y,0,1)),_t=ft.getUTCDay(),ft=_t>4||_t===0?Er.ceil(ft):Er(ft),ft=ns.offset(ft,(P.V-1)*7),P.y=ft.getUTCFullYear(),P.m=ft.getUTCMonth(),P.d=ft.getUTCDate()+(P.w+6)%7):(ft=xs(gi(P.y,0,1)),_t=ft.getDay(),ft=_t>4||_t===0?Nr.ceil(ft):Nr(ft),ft=li.offset(ft,(P.V-1)*7),P.y=ft.getFullYear(),P.m=ft.getMonth(),P.d=ft.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),_t="Z"in P?Ms(gi(P.y,0,1)).getUTCDay():xs(gi(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(_t+5)%7:P.w+P.U*7-(_t+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,Ms(P)):xs(P)}}function N(F,$,L,P){for(var pt=0,ft=$.length,_t=L.length,St,Z;pt<ft;){if(P>=_t)return-1;if(St=$.charCodeAt(pt++),St===37){if(St=$.charAt(pt++),Z=_[St in dl?$.charAt(pt++):St],!Z||(P=Z(F,L,P))<0)return-1}else if(St!=L.charCodeAt(P++))return-1}return P}function B(F,$,L){var P=c.exec($.slice(L));return P?(F.p=u.get(P[0].toLowerCase()),L+P[0].length):-1}function z(F,$,L){var P=d.exec($.slice(L));return P?(F.w=g.get(P[0].toLowerCase()),L+P[0].length):-1}function A(F,$,L){var P=f.exec($.slice(L));return P?(F.w=h.get(P[0].toLowerCase()),L+P[0].length):-1}function Y(F,$,L){var P=y.exec($.slice(L));return P?(F.m=w.get(P[0].toLowerCase()),L+P[0].length):-1}function I(F,$,L){var P=b.exec($.slice(L));return P?(F.m=v.get(P[0].toLowerCase()),L+P[0].length):-1}function k(F,$,L){return N(F,e,$,L)}function V(F,$,L){return N(F,n,$,L)}function O(F,$,L){return N(F,i,$,L)}function q(F){return o[F.getDay()]}function G(F){return s[F.getDay()]}function K(F){return l[F.getMonth()]}function W(F){return a[F.getMonth()]}function Q(F){return r[+(F.getHours()>=12)]}function J(F){return 1+~~(F.getMonth()/3)}function gt(F){return o[F.getUTCDay()]}function ut(F){return s[F.getUTCDay()]}function st(F){return l[F.getUTCMonth()]}function dt(F){return a[F.getUTCMonth()]}function ct(F){return r[+(F.getUTCHours()>=12)]}function R(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var $=M(F+="",m);return $.toString=function(){return F},$},parse:function(F){var $=C(F+="",!1);return $.toString=function(){return F},$},utcFormat:function(F){var $=M(F+="",p);return $.toString=function(){return F},$},utcParse:function(F){var $=C(F+="",!0);return $.toString=function(){return F},$}}}var dl={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,O1=/^%/,I1=/[\\^$*+?|[\]().{}]/g;function bt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function U1(t){return t.replace(I1,"\\$&")}function pi(t){return new RegExp("^(?:"+t.map(U1).join("|")+")","i")}function mi(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function B1(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function V1(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function R1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function F1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function q1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function gl(t,e,n){var i=Pt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function pl(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Y1(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function K1(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function H1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ml(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function $1(t,e,n){var i=Pt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function yl(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function G1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function W1(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function j1(t,e,n){var i=Pt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function X1(t,e,n){var i=Pt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Q1(t,e,n){var i=O1.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Z1(t,e,n){var i=Pt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function J1(t,e,n){var i=Pt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function bl(t,e){return bt(t.getDate(),e,2)}function tg(t,e){return bt(t.getHours(),e,2)}function eg(t,e){return bt(t.getHours()%12||12,e,2)}function ng(t,e){return bt(1+li.count(Oe(t),t),e,3)}function Su(t,e){return bt(t.getMilliseconds(),e,3)}function ig(t,e){return Su(t,e)+"000"}function rg(t,e){return bt(t.getMonth()+1,e,2)}function sg(t,e){return bt(t.getMinutes(),e,2)}function og(t,e){return bt(t.getSeconds(),e,2)}function ag(t){var e=t.getDay();return e===0?7:e}function lg(t,e){return bt(ji.count(Oe(t)-1,t),e,2)}function ku(t){var e=t.getDay();return e>=4||e===0?Qn(t):Qn.ceil(t)}function cg(t,e){return t=ku(t),bt(Qn.count(Oe(t),t)+(Oe(t).getDay()===4),e,2)}function ug(t){return t.getDay()}function hg(t,e){return bt(Nr.count(Oe(t)-1,t),e,2)}function fg(t,e){return bt(t.getFullYear()%100,e,2)}function dg(t,e){return t=ku(t),bt(t.getFullYear()%100,e,2)}function gg(t,e){return bt(t.getFullYear()%1e4,e,4)}function pg(t,e){var n=t.getDay();return t=n>=4||n===0?Qn(t):Qn.ceil(t),bt(t.getFullYear()%1e4,e,4)}function mg(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+bt(e/60|0,"0",2)+bt(e%60,"0",2)}function wl(t,e){return bt(t.getUTCDate(),e,2)}function yg(t,e){return bt(t.getUTCHours(),e,2)}function bg(t,e){return bt(t.getUTCHours()%12||12,e,2)}function wg(t,e){return bt(1+ns.count(je(t),t),e,3)}function xu(t,e){return bt(t.getUTCMilliseconds(),e,3)}function vg(t,e){return xu(t,e)+"000"}function _g(t,e){return bt(t.getUTCMonth()+1,e,2)}function Sg(t,e){return bt(t.getUTCMinutes(),e,2)}function kg(t,e){return bt(t.getUTCSeconds(),e,2)}function xg(t){var e=t.getUTCDay();return e===0?7:e}function Mg(t,e){return bt(is.count(je(t)-1,t),e,2)}function Mu(t){var e=t.getUTCDay();return e>=4||e===0?Zn(t):Zn.ceil(t)}function Cg(t,e){return t=Mu(t),bt(Zn.count(je(t),t)+(je(t).getUTCDay()===4),e,2)}function Tg(t){return t.getUTCDay()}function Dg(t,e){return bt(Er.count(je(t)-1,t),e,2)}function Ng(t,e){return bt(t.getUTCFullYear()%100,e,2)}function Eg(t,e){return t=Mu(t),bt(t.getUTCFullYear()%100,e,2)}function Lg(t,e){return bt(t.getUTCFullYear()%1e4,e,4)}function Ag(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Zn(t):Zn.ceil(t),bt(t.getUTCFullYear()%1e4,e,4)}function Pg(){return"+0000"}function vl(){return"%"}function _l(t){return+t}function Sl(t){return Math.floor(+t/1e3)}var Ln,pa,ma,Cu;zg({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zg(t){return Ln=z1(t),pa=Ln.format,Ln.parse,ma=Ln.utcFormat,Cu=Ln.utcParse,Ln}function Og(t){return new Date(t)}function Ig(t){return t instanceof Date?+t:+new Date(+t)}function ya(t,e,n,i,r,s,o,a,l,c){var u=gu(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),b=c("%I:%M"),v=c("%I %p"),y=c("%a %d"),w=c("%b %d"),m=c("%B"),p=c("%Y");function _(M){return(l(M)<M?d:a(M)<M?g:o(M)<M?b:s(M)<M?v:i(M)<M?r(M)<M?y:w:n(M)<M?m:p)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,Ig)):h().map(Og)},u.ticks=function(M){var C=h();return t(C[0],C[C.length-1],M==null?10:M)},u.tickFormat=function(M,C){return C==null?_:c(C)},u.nice=function(M){var C=h();return(!M||typeof M.range!="function")&&(M=e(C[0],C[C.length-1],M==null?10:M)),M?h(bu(C,M)):u},u.copy=function(){return Zr(u,ya(t,e,n,i,r,s,o,a,l,c))},u}function Ug(){return Tn.apply(ya(A1,P1,Oe,rs,ji,li,es,ts,an,pa).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Bg(){return Tn.apply(ya(E1,L1,je,ga,is,ns,da,fa,an,ma).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vg(){var t=0,e=1,n,i,r,s,o=le,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var d,g;return arguments.length?([d,g]=h,o=f(d,g),c):[o(0),o(1)]}}return c.range=u(ai),c.rangeRound=u(cu),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(t),i=f(e),r=n===i?0:1/(i-n),c}}function Rg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Tu(){var t=ca(Vg()(le));return t.copy=function(){return Rg(t,Tu())},cd.apply(t,arguments)}function Ie(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const Fg=Ie("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Xi=t=>Ed(t[t.length-1]);var qg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ie);const Yg=Xi(qg);var Kg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ie);const Hg=Xi(Kg);var $g=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ie);const Gg=Xi($g);var Wg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ie);const jg=Xi(Wg);var Xg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ie);const Qg=Xi(Xg);du(hn(-100,.75,.35),hn(80,1.5,.8));du(hn(260,.75,.35),hn(80,1.5,.8));var sr=hn();function Zg(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return sr.h=360*t-100,sr.s=1.5-1.5*e,sr.l=.8-.9*e,sr+""}function ss(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Jg=ss(Ie("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));ss(Ie("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));ss(Ie("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));ss(Ie("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Jn=0,Si=0,yi=0,Du=1e3,Lr,ki,Ar=0,kn=0,os=0,Vi=typeof performance=="object"&&performance.now?performance:Date,Nu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ba(){return kn||(Nu(tp),kn=Vi.now()+os)}function tp(){kn=0}function Pr(){this._call=this._time=this._next=null}Pr.prototype=Eu.prototype={constructor:Pr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ba():+n)+(e==null?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Lr=this,ki=this),this._call=t,this._time=n,Qs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qs())}};function Eu(t,e,n){var i=new Pr;return i.restart(t,e,n),i}function ep(){ba(),++Jn;for(var t=Lr,e;t;)(e=kn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Jn}function kl(){kn=(Ar=Vi.now())+os,Jn=Si=0;try{ep()}finally{Jn=0,ip(),kn=0}}function np(){var t=Vi.now(),e=t-Ar;e>Du&&(os-=e,Ar=t)}function ip(){for(var t,e=Lr,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Lr=n);ki=t,Qs(i)}function Qs(t){if(!Jn){Si&&(Si=clearTimeout(Si));var e=t-kn;e>24?(t<1/0&&(Si=setTimeout(kl,t-Vi.now()-os)),yi&&(yi=clearInterval(yi))):(yi||(Ar=Vi.now(),yi=setInterval(np,Du)),Jn=1,Nu(kl))}}function Zs(t,e,n){var i=new Pr;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var rp={value:()=>{}};function Qi(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new gr(n)}function gr(t){this._=t}function sp(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}gr.prototype=Qi.prototype={constructor:gr,on:function(t,e){var n=this._,i=sp(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=op(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=xl(n[r],t.name,e);else if(e==null)for(r in n)n[r]=xl(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new gr(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function op(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function xl(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=rp,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var ap=Qi("start","end","cancel","interrupt"),lp=[],Lu=0,Ml=1,Js=2,pr=3,Cl=4,to=5,mr=6;function as(t,e,n,i,r,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;cp(t,n,{name:e,index:i,group:r,on:ap,tween:lp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Lu})}function wa(t,e){var n=xe(t,e);if(n.state>Lu)throw new Error("too late; already scheduled");return n}function Ue(t,e){var n=xe(t,e);if(n.state>pr)throw new Error("too late; already running");return n}function xe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function cp(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Eu(s,0,n.time);function s(c){n.state=Ml,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==Ml)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===pr)return Zs(o);d.state===Cl?(d.state=mr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=mr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Zs(function(){n.state===pr&&(n.state=Cl,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Js,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Js){for(n.state=pr,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=to,1),f=-1,h=r.length;++f<h;)r[f].call(t,u);n.state===to&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=mr,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function qn(t,e){var n=t.__transition,i,r,s=!0,o;if(!!n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){s=!1;continue}r=i.state>Js&&i.state<to,i.state=mr,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}s&&delete t.__transition}}function up(t){return this.each(function(){qn(this,t)})}function hp(t,e){var n,i;return function(){var r=Ue(this,t),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function fp(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Ue(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function dp(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=xe(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?hp:fp)(n,t,e))}function va(t,e,n){var i=t._id;return t.each(function(){var r=Ue(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return xe(r,i).value[e]}}function Au(t,e){var n;return(typeof e=="number"?we:e instanceof un?Cr:(n=un(e))?(e=n,Cr):lu)(t,e)}function gp(t){return function(){this.removeAttribute(t)}}function pp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mp(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttribute(t);return o===r?null:o===i?s:s=e(i=o,n)}}function yp(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?s:s=e(i=o,n)}}function bp(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function wp(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function vp(t,e){var n=jr(t),i=n==="transform"?Fd:Au;return this.attrTween(t,typeof e=="function"?(n.local?wp:bp)(n,i,va(this,"attr."+t,e)):e==null?(n.local?pp:gp)(n):(n.local?yp:mp)(n,i,e))}function _p(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Sp(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function kp(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Sp(t,s)),n}return r._value=e,r}function xp(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&_p(t,s)),n}return r._value=e,r}function Mp(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=jr(t);return this.tween(n,(i.local?kp:xp)(i,e))}function Cp(t,e){return function(){wa(this,t).delay=+e.apply(this,arguments)}}function Tp(t,e){return e=+e,function(){wa(this,t).delay=e}}function Dp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Cp:Tp)(e,t)):xe(this.node(),e).delay}function Np(t,e){return function(){Ue(this,t).duration=+e.apply(this,arguments)}}function Ep(t,e){return e=+e,function(){Ue(this,t).duration=e}}function Lp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Np:Ep)(e,t)):xe(this.node(),e).duration}function Ap(t,e){if(typeof e!="function")throw new Error;return function(){Ue(this,t).ease=e}}function Pp(t){var e=this._id;return arguments.length?this.each(Ap(e,t)):xe(this.node(),e).ease}function zp(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ue(this,t).ease=n}}function Op(t){if(typeof t!="function")throw new Error;return this.each(zp(this._id,t))}function Ip(t){typeof t!="function"&&(t=Oc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Xe(i,this._parents,this._name,this._id)}function Up(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=e[a];return new Xe(o,this._parents,this._name,this._id)}function Bp(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Vp(t,e,n){var i,r,s=Bp(e)?wa:Ue;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}function Rp(t,e){var n=this._id;return arguments.length<2?xe(this.node(),n).on.on(t):this.each(Vp(n,t,e))}function Fp(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function qp(){return this.on("end.remove",Fp(this._id))}function Yp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Zo(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,as(c[h],e,n,h,c,xe(u,n)));return new Xe(s,this._parents,e,n)}function Kp(t){var e=this._name,n=this._id;typeof t!="function"&&(t=zc(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,g=xe(u,n),b=0,v=h.length;b<v;++b)(d=h[b])&&as(d,e,n,b,h,g);s.push(h),o.push(u)}return new Xe(s,o,e,n)}var Hp=si.prototype.constructor;function $p(){return new Hp(this._groups,this._parents)}function Gp(t,e){var n,i,r;return function(){var s=$n(this,t),o=(this.style.removeProperty(t),$n(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}function Pu(t){return function(){this.style.removeProperty(t)}}function Wp(t,e,n){var i,r=n+"",s;return function(){var o=$n(this,t);return o===r?null:o===i?s:s=e(i=o,n)}}function jp(t,e,n){var i,r,s;return function(){var o=$n(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),$n(this,t))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function Xp(t,e){var n,i,r,s="style."+e,o="end."+s,a;return function(){var l=Ue(this,t),c=l.on,u=l.value[s]==null?a||(a=Pu(e)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function Qp(t,e,n){var i=(t+="")=="transform"?Rd:Au;return e==null?this.styleTween(t,Gp(t,i)).on("end.style."+t,Pu(t)):typeof e=="function"?this.styleTween(t,jp(t,i,va(this,"style."+t,e))).each(Xp(this._id,t)):this.styleTween(t,Wp(t,i,e),n).on("end.style."+t,null)}function Zp(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Jp(t,e,n){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Zp(t,o,n)),i}return s._value=e,s}function tm(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Jp(t,e,n==null?"":n))}function em(t){return function(){this.textContent=t}}function nm(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function im(t){return this.tween("text",typeof t=="function"?nm(va(this,"text",t)):em(t==null?"":t+""))}function rm(t){return function(e){this.textContent=t.call(this,e)}}function sm(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&rm(r)),e}return i._value=t,i}function om(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,sm(t))}function am(){for(var t=this._name,e=this._id,n=Ou(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=xe(l,e);as(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Xe(i,this._parents,t,n)}function lm(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=Ue(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&s()})}var cm=0;function Xe(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function zu(t){return si().transition(t)}function Ou(){return++cm}var Re=si.prototype;Xe.prototype=zu.prototype={constructor:Xe,select:Yp,selectAll:Kp,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:Ip,merge:Up,selection:$p,transition:am,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:Rp,attr:vp,attrTween:Mp,style:Qp,styleTween:tm,text:im,textTween:om,remove:qp,tween:dp,delay:Dp,duration:Lp,ease:Pp,easeVarying:Op,end:lm,[Symbol.iterator]:Re[Symbol.iterator]};const um=t=>+t;function hm(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Iu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _a=3;(function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n})(_a);(function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n})(_a);var fm=function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n}(_a);function zr(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}var ti=2*Math.PI,Sa=1,ka=.3;(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ti);function r(s){return e*zr(- --s)*Math.sin((i-s)/n)}return r.amplitude=function(s){return t(s,n*ti)},r.period=function(s){return t(e,s)},r})(Sa,ka);var dm=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ti);function r(s){return 1-e*zr(s=+s)*Math.sin((s+i)/n)}return r.amplitude=function(s){return t(s,n*ti)},r.period=function(s){return t(e,s)},r}(Sa,ka);(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ti);function r(s){return((s=s*2-1)<0?e*zr(-s)*Math.sin((i-s)/n):2-e*zr(s)*Math.sin((i+s)/n))/2}return r.amplitude=function(s){return t(s,n*ti)},r.period=function(s){return t(e,s)},r})(Sa,ka);var gm={time:null,delay:0,duration:250,ease:Iu};function pm(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function mm(t){var e,n;t instanceof Xe?(e=t._id,t=t._name):(e=Ou(),(n=gm).time=ba(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&as(l,t,e,c,o,n||pm(l,e));return new Xe(i,this._parents,t,e)}si.prototype.interrupt=up;si.prototype.transition=mm;function ym(t){return t}var Cs=1,Ts=2,eo=3,xi=4,Tl=1e-6;function bm(t){return"translate("+t+",0)"}function wm(t){return"translate(0,"+t+")"}function vm(t){return e=>+t(e)}function _m(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Sm(){return!this.__axis}function Uu(t,e){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Cs||t===xi?-1:1,u=t===xi||t===Ts?"x":"y",f=t===Cs||t===eo?bm:wm;function h(d){var g=i==null?e.ticks?e.ticks.apply(e,n):e.domain():i,b=r==null?e.tickFormat?e.tickFormat.apply(e,n):ym:r,v=Math.max(s,0)+a,y=e.range(),w=+y[0]+l,m=+y[y.length-1]+l,p=(e.bandwidth?_m:vm)(e.copy(),l),_=d.selection?d.selection():d,M=_.selectAll(".domain").data([null]),C=_.selectAll(".tick").data(g,e).order(),N=C.exit(),B=C.enter().append("g").attr("class","tick"),z=C.select("line"),A=C.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(B),z=z.merge(B.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(B.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",t===Cs?"0em":t===eo?"0.71em":"0.32em")),d!==_&&(M=M.transition(d),C=C.transition(d),z=z.transition(d),A=A.transition(d),N=N.transition(d).attr("opacity",Tl).attr("transform",function(Y){return isFinite(Y=p(Y))?f(Y+l):this.getAttribute("transform")}),B.attr("opacity",Tl).attr("transform",function(Y){var I=this.parentNode.__axis;return f((I&&isFinite(I=I(Y))?I:p(Y))+l)})),N.remove(),M.attr("d",t===xi||t===Ts?o?"M"+c*o+","+w+"H"+l+"V"+m+"H"+c*o:"M"+l+","+w+"V"+m:o?"M"+w+","+c*o+"V"+l+"H"+m+"V"+c*o:"M"+w+","+l+"H"+m),C.attr("opacity",1).attr("transform",function(Y){return f(p(Y)+l)}),z.attr(u+"2",c*s),A.attr(u,c*v).text(b),_.filter(Sm).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ts?"start":t===xi?"end":"middle"),_.each(function(){this.__axis=p})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function km(t){return Uu(eo,t)}function xm(t){return Uu(xi,t)}function Kt(t){return function(){return t}}const Dl=Math.abs,Ft=Math.atan2,mn=Math.cos,Mm=Math.max,Ds=Math.min,Ce=Math.sin,In=Math.sqrt,te=1e-12,Ri=Math.PI,Or=Ri/2,Cm=2*Ri;function Tm(t){return t>1?0:t<-1?Ri:Math.acos(t)}function Nl(t){return t>=1?Or:t<=-1?-Or:Math.asin(t)}const no=Math.PI,io=2*no,bn=1e-6,Dm=io-bn;function Bu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Nm(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bu;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class xa{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bu:Nm(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=r-n,u=o-e,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>bn)if(!(Math.abs(f*l-c*u)>bn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-o,g=r-a,b=l*l+c*c,v=d*d+g*g,y=Math.sqrt(b),w=Math.sqrt(h),m=s*Math.tan((no-Math.acos((b+h-v)/(2*y*w)))/2),p=m/w,_=m/y;Math.abs(p-1)>bn&&this._append`L${e+p*u},${n+p*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=e+_*l},${this._y1=n+_*c}`}}arc(e,n,i,r,s,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=e+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>bn||Math.abs(this._y1-u)>bn)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%io+io),h>Dm?this._append`A${i},${i},0,1,${f},${e-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>bn&&this._append`A${i},${i},0,${+(h>=no)},${f},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Vu(){return new xa}Vu.prototype=xa.prototype;function Ma(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new xa(e)}function Em(t){return t.innerRadius}function Lm(t){return t.outerRadius}function Am(t){return t.startAngle}function Pm(t){return t.endAngle}function zm(t){return t&&t.padAngle}function Om(t,e,n,i,r,s,o,a){var l=n-t,c=i-e,u=o-r,f=a-s,h=f*l-u*c;if(!(h*h<te))return h=(u*(e-s)-f*(t-r))/h,[t+h*l,e+h*c]}function or(t,e,n,i,r,s,o){var a=t-n,l=e-i,c=(o?s:-s)/In(a*a+l*l),u=c*l,f=-c*a,h=t+u,d=e+f,g=n+u,b=i+f,v=(h+g)/2,y=(d+b)/2,w=g-h,m=b-d,p=w*w+m*m,_=r-s,M=h*b-g*d,C=(m<0?-1:1)*In(Mm(0,_*_*p-M*M)),N=(M*m-w*C)/p,B=(-M*w-m*C)/p,z=(M*m+w*C)/p,A=(-M*w+m*C)/p,Y=N-v,I=B-y,k=z-v,V=A-y;return Y*Y+I*I>k*k+V*V&&(N=z,B=A),{cx:N,cy:B,x01:-u,y01:-f,x11:N*(r/_-1),y11:B*(r/_-1)}}function Im(){var t=Em,e=Lm,n=Kt(0),i=null,r=Am,s=Pm,o=zm,a=null,l=Ma(c);function c(){var u,f,h=+t.apply(this,arguments),d=+e.apply(this,arguments),g=r.apply(this,arguments)-Or,b=s.apply(this,arguments)-Or,v=Dl(b-g),y=b>g;if(a||(a=u=l()),d<h&&(f=d,d=h,h=f),!(d>te))a.moveTo(0,0);else if(v>Cm-te)a.moveTo(d*mn(g),d*Ce(g)),a.arc(0,0,d,g,b,!y),h>te&&(a.moveTo(h*mn(b),h*Ce(b)),a.arc(0,0,h,b,g,y));else{var w=g,m=b,p=g,_=b,M=v,C=v,N=o.apply(this,arguments)/2,B=N>te&&(i?+i.apply(this,arguments):In(h*h+d*d)),z=Ds(Dl(d-h)/2,+n.apply(this,arguments)),A=z,Y=z,I,k;if(B>te){var V=Nl(B/h*Ce(N)),O=Nl(B/d*Ce(N));(M-=V*2)>te?(V*=y?1:-1,p+=V,_-=V):(M=0,p=_=(g+b)/2),(C-=O*2)>te?(O*=y?1:-1,w+=O,m-=O):(C=0,w=m=(g+b)/2)}var q=d*mn(w),G=d*Ce(w),K=h*mn(_),W=h*Ce(_);if(z>te){var Q=d*mn(m),J=d*Ce(m),gt=h*mn(p),ut=h*Ce(p),st;if(v<Ri)if(st=Om(q,G,gt,ut,Q,J,K,W)){var dt=q-st[0],ct=G-st[1],R=Q-st[0],F=J-st[1],$=1/Ce(Tm((dt*R+ct*F)/(In(dt*dt+ct*ct)*In(R*R+F*F)))/2),L=In(st[0]*st[0]+st[1]*st[1]);A=Ds(z,(h-L)/($-1)),Y=Ds(z,(d-L)/($+1))}else A=Y=0}C>te?Y>te?(I=or(gt,ut,q,G,d,Y,y),k=or(Q,J,K,W,d,Y,y),a.moveTo(I.cx+I.x01,I.cy+I.y01),Y<z?a.arc(I.cx,I.cy,Y,Ft(I.y01,I.x01),Ft(k.y01,k.x01),!y):(a.arc(I.cx,I.cy,Y,Ft(I.y01,I.x01),Ft(I.y11,I.x11),!y),a.arc(0,0,d,Ft(I.cy+I.y11,I.cx+I.x11),Ft(k.cy+k.y11,k.cx+k.x11),!y),a.arc(k.cx,k.cy,Y,Ft(k.y11,k.x11),Ft(k.y01,k.x01),!y))):(a.moveTo(q,G),a.arc(0,0,d,w,m,!y)):a.moveTo(q,G),!(h>te)||!(M>te)?a.lineTo(K,W):A>te?(I=or(K,W,Q,J,h,-A,y),k=or(q,G,gt,ut,h,-A,y),a.lineTo(I.cx+I.x01,I.cy+I.y01),A<z?a.arc(I.cx,I.cy,A,Ft(I.y01,I.x01),Ft(k.y01,k.x01),!y):(a.arc(I.cx,I.cy,A,Ft(I.y01,I.x01),Ft(I.y11,I.x11),!y),a.arc(0,0,h,Ft(I.cy+I.y11,I.cx+I.x11),Ft(k.cy+k.y11,k.cx+k.x11),y),a.arc(k.cx,k.cy,A,Ft(k.y11,k.x11),Ft(k.y01,k.x01),!y))):a.arc(0,0,h,_,p,y)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Ri/2;return[mn(f)*u,Ce(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Kt(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Kt(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Kt(+u),c):n},c.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:Kt(+u),c):i},c.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:Kt(+u),c):r},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Kt(+u),c):s},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Kt(+u),c):o},c.context=function(u){return arguments.length?(a=u==null?null:u,c):a},c}var Um=Array.prototype.slice;function Bm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ru(t){this._context=t}Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Vm(t){return new Ru(t)}function Fu(t){return t[0]}function qu(t){return t[1]}function Rm(t,e){var n=Kt(!0),i=null,r=Vm,s=null,o=Ma(a);t=typeof t=="function"?t:t===void 0?Fu:Kt(t),e=typeof e=="function"?e:e===void 0?qu:Kt(e);function a(l){var c,u=(l=Bm(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,c,l),+e(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}class Yu{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Fm(t){return new Yu(t,!0)}function qm(t){return new Yu(t,!1)}function Ym(t){return t.source}function Km(t){return t.target}function Ku(t){let e=Ym,n=Km,i=Fu,r=qu,s=null,o=null,a=Ma(l);function l(){let c;const u=Um.call(arguments),f=e.apply(this,u),h=n.apply(this,u);if(s==null&&(o=t(c=a())),o.lineStart(),u[0]=f,o.point(+i.apply(this,u),+r.apply(this,u)),u[0]=h,o.point(+i.apply(this,u),+r.apply(this,u)),o.lineEnd(),c)return o=null,c+""||null}return l.source=function(c){return arguments.length?(e=c,l):e},l.target=function(c){return arguments.length?(n=c,l):n},l.x=function(c){return arguments.length?(i=typeof c=="function"?c:Kt(+c),l):i},l.y=function(c){return arguments.length?(r=typeof c=="function"?c:Kt(+c),l):r},l.context=function(c){return arguments.length?(c==null?s=o=null:o=t(s=c),l):s},l}function Hm(){return Ku(Fm)}function $m(){return Ku(qm)}function El(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Hu(t){this._context=t}Hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:El(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:El(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Gm(t){return new Hu(t)}function Ll(t){return t<0?-1:1}function Al(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(Ll(s)+Ll(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Pl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ns(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function Ir(t){this._context=t}Ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ns(this,this._t0,Pl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ns(this,Pl(this,n=Al(this,t,e)),n);break;default:Ns(this,this._t0,n=Al(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $u(t){this._context=new Gu(t)}($u.prototype=Object.create(Ir.prototype)).point=function(t,e){Ir.prototype.point.call(this,e,t)};function Gu(t){this._context=t}Gu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function Wm(t){return new Ir(t)}function jm(t){return new $u(t)}function Wu(t,e){this._context=t,this._t=e}Wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Xm(t){return new Wu(t,1)}function Qm(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function Zm(){return this.eachAfter(Qm)}function Jm(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function t2(t,e){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(t.call(e,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function e2(t,e){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function n2(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function i2(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function r2(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function s2(t){for(var e=this,n=o2(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function o2(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function a2(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function l2(){return Array.from(this)}function c2(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function u2(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*h2(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function Ca(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=g2)):e===void 0&&(e=d2);for(var n=new Fi(t),i,r=[n],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new Fi(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(m2)}function f2(){return Ca(this).eachBefore(p2)}function d2(t){return t.children}function g2(t){return Array.isArray(t)?t[1]:null}function p2(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function m2(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fi(t){this.data=t,this.depth=this.height=0,this.parent=null}Fi.prototype=Ca.prototype={constructor:Fi,count:Zm,each:Jm,eachAfter:e2,eachBefore:t2,find:n2,sum:i2,sort:r2,path:s2,ancestors:a2,descendants:l2,leaves:c2,links:u2,copy:f2,[Symbol.iterator]:h2};function y2(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function b2(t,e,n,i,r){for(var s=t.children,o,a=-1,l=s.length,c=t.value&&(i-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}function w2(){var t=1,e=1,n=0,i=!1;function r(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),i&&o.eachBefore(y2),o}function s(o,a){return function(l){l.children&&b2(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var c=l.x0,u=l.y0,f=l.x1-n,h=l.y1-n;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(t=+o[0],e=+o[1],r):[t,e]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}function v2(t,e){return t.parent===e.parent?1:2}function Es(t){var e=t.children;return e?e[0]:t.t}function Ls(t){var e=t.children;return e?e[e.length-1]:t.t}function _2(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function S2(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function k2(t,e,n){return t.a.parent===e.parent?t.a:n}function yr(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}yr.prototype=Object.create(Fi.prototype);function x2(t){for(var e=new yr(t,0),n,i=[e],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new yr(s[o],o)),r.parent=n;return(e.parent=new yr(null,0)).children=[e],e}function M2(){var t=v2,e=1,n=1,i=null;function r(c){var u=x2(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(w){w.x<f.x&&(f=w),w.x>h.x&&(h=w),w.depth>d.depth&&(d=w)});var g=f===h?1:t(f,h)/2,b=g-f.x,v=e/(h.x+g+b),y=n/(d.depth||1);c.eachBefore(function(w){w.x=(w.x+b)*v,w.y=w.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){S2(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,b=h.parent.children[0],v=h.m,y=d.m,w=g.m,m=b.m,p;g=Ls(g),h=Es(h),g&&h;)b=Es(b),d=Ls(d),d.a=c,p=g.z+w-h.z-v+t(g._,h._),p>0&&(_2(k2(g,c,f),c,p),v+=p,y+=p),w+=g.m,v+=h.m,m+=b.m,y+=d.m;g&&!Ls(d)&&(d.t=g,d.m+=w-y),h&&!Es(b)&&(b.t=h,b.m+=v-m,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(t=c,r):t},r.size=function(c){return arguments.length?(i=!1,e=+c[0],n=+c[1],r):i?null:[e,n]},r.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],n=+c[1],r):i?[e,n]:null},r}const C2={passive:!1},qi={capture:!0,passive:!1};function As(t){t.stopImmediatePropagation()}function Yn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ta(t){var e=t.document.documentElement,n=Wt(t).on("dragstart.drag",Yn,qi);"onselectstart"in e?n.on("selectstart.drag",Yn,qi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Da(t,e){var n=t.document.documentElement,i=Wt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Yn,qi),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ar=t=>()=>t;function ro(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:s,x:o,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}ro.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function T2(t){return!t.ctrlKey&&!t.button}function D2(){return this.parentNode}function N2(t,e){return e==null?{x:t.x,y:t.y}:e}function E2(){return navigator.maxTouchPoints||"ontouchstart"in this}function L2(){var t=T2,e=D2,n=N2,i=E2,r={},s=Qi("start","drag","end"),o=0,a,l,c,u,f=0;function h(p){p.on("mousedown.drag",d).filter(i).on("touchstart.drag",v).on("touchmove.drag",y,C2).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(p,_){if(!(u||!t.call(this,p,_))){var M=m(this,e.call(this,p,_),p,_,"mouse");!M||(Wt(p.view).on("mousemove.drag",g,qi).on("mouseup.drag",b,qi),Ta(p.view),As(p),c=!1,a=p.clientX,l=p.clientY,M("start",p))}}function g(p){if(Yn(p),!c){var _=p.clientX-a,M=p.clientY-l;c=_*_+M*M>f}r.mouse("drag",p)}function b(p){Wt(p.view).on("mousemove.drag mouseup.drag",null),Da(p.view,c),Yn(p),r.mouse("end",p)}function v(p,_){if(!!t.call(this,p,_)){var M=p.changedTouches,C=e.call(this,p,_),N=M.length,B,z;for(B=0;B<N;++B)(z=m(this,C,p,_,M[B].identifier,M[B]))&&(As(p),z("start",p,M[B]))}}function y(p){var _=p.changedTouches,M=_.length,C,N;for(C=0;C<M;++C)(N=r[_[C].identifier])&&(Yn(p),N("drag",p,_[C]))}function w(p){var _=p.changedTouches,M=_.length,C,N;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<M;++C)(N=r[_[C].identifier])&&(As(p),N("end",p,_[C]))}function m(p,_,M,C,N,B){var z=s.copy(),A=be(B||M,_),Y,I,k;if((k=n.call(p,new ro("beforestart",{sourceEvent:M,target:h,identifier:N,active:o,x:A[0],y:A[1],dx:0,dy:0,dispatch:z}),C))!=null)return Y=k.x-A[0]||0,I=k.y-A[1]||0,function V(O,q,G){var K=A,W;switch(O){case"start":r[N]=V,W=o++;break;case"end":delete r[N],--o;case"drag":A=be(G||q,_),W=o;break}z.call(O,p,new ro(O,{sourceEvent:q,subject:k,target:h,identifier:N,active:W,x:A[0]+Y,y:A[1]+I,dx:A[0]-K[0],dy:A[1]-K[1],dispatch:z}),C)}}return h.filter=function(p){return arguments.length?(t=typeof p=="function"?p:ar(!!p),h):t},h.container=function(p){return arguments.length?(e=typeof p=="function"?p:ar(p),h):e},h.subject=function(p){return arguments.length?(n=typeof p=="function"?p:ar(p),h):n},h.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ar(!!p),h):i},h.on=function(){var p=s.on.apply(s,arguments);return p===s?h:p},h.clickDistance=function(p){return arguments.length?(f=(p=+p)*p,h):Math.sqrt(f)},h}const Ps=t=>()=>t;function A2(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function P2(t){t.stopImmediatePropagation()}function zs(t){t.preventDefault(),t.stopImmediatePropagation()}var zl={name:"drag"},Os={name:"space"},An={name:"handle"},Pn={name:"center"};const{abs:Ol,max:qt,min:Yt}=Math;function Il(t){return[+t[0],+t[1]]}function so(t){return[Il(t[0]),Il(t[1])]}var br={name:"x",handles:["w","e"].map(Yi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Is={name:"y",handles:["n","s"].map(Yi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},z2={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Yi),input:function(t){return t==null?null:so(t)},output:function(t){return t}},Fe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Bl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},O2={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},I2={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Yi(t){return{type:t}}function U2(t){return!t.ctrlKey&&!t.button}function B2(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function V2(){return navigator.maxTouchPoints||"ontouchstart"in this}function Us(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function R2(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function F2(){return ju(br)}function q2(){return ju(z2)}function ju(t){var e=B2,n=U2,i=V2,r=!0,s=Qi("start","brush","end"),o=6,a;function l(v){var y=v.property("__brush",b).selectAll(".overlay").data([Yi("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Fe.overlay).merge(y).each(function(){var m=Us(this).extent;Wt(this).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1])}),v.selectAll(".selection").data([Yi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Fe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var w=v.selectAll(".handle").data(t.handles,function(m){return m.type});w.exit().remove(),w.enter().append("rect").attr("class",function(m){return"handle handle--"+m.type}).attr("cursor",function(m){return Fe[m.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,y,w){v.tween?v.on("start.brush",function(m){u(this,arguments).beforestart().start(m)}).on("interrupt.brush end.brush",function(m){u(this,arguments).end(m)}).tween("brush",function(){var m=this,p=m.__brush,_=u(m,arguments),M=p.selection,C=t.input(typeof y=="function"?y.apply(this,arguments):y,p.extent),N=ai(M,C);function B(z){p.selection=z===1&&C===null?null:N(z),c.call(m),_.brush()}return M!==null&&C!==null?B:B(1)}):v.each(function(){var m=this,p=arguments,_=m.__brush,M=t.input(typeof y=="function"?y.apply(m,p):y,_.extent),C=u(m,p).beforestart();qn(m),_.selection=M===null?null:M,c.call(m),C.start(w).brush(w).end(w)})},l.clear=function(v,y){l.move(v,null,y)};function c(){var v=Wt(this),y=Us(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(w){return w.type[w.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(w){return w.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(w){return w.type==="n"||w.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(w){return w.type==="e"||w.type==="w"?y[1][1]-y[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,y,w){var m=v.__brush.emitter;return m&&(!w||!m.clean)?m:new f(v,y,w)}function f(v,y,w){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=w}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,w){var m=Wt(this.that).datum();s.call(v,this.that,new A2(v,{sourceEvent:y,target:l,selection:t.output(this.state.selection),mode:w,dispatch:s}),m)}};function h(v){if(a&&!v.touches||!n.apply(this,arguments))return;var y=this,w=v.target.__data__.type,m=(r&&v.metaKey?w="overlay":w)==="selection"?zl:r&&v.altKey?Pn:An,p=t===Is?null:O2[w],_=t===br?null:I2[w],M=Us(y),C=M.extent,N=M.selection,B=C[0][0],z,A,Y=C[0][1],I,k,V=C[1][0],O,q,G=C[1][1],K,W,Q=0,J=0,gt,ut=p&&_&&r&&v.shiftKey,st,dt,ct=Array.from(v.touches||[v],Z=>{const rt=Z.identifier;return Z=be(Z,y),Z.point0=Z.slice(),Z.identifier=rt,Z});qn(y);var R=u(y,arguments,!0).beforestart();if(w==="overlay"){N&&(gt=!0);const Z=[ct[0],ct[1]||ct[0]];M.selection=N=[[z=t===Is?B:Yt(Z[0][0],Z[1][0]),I=t===br?Y:Yt(Z[0][1],Z[1][1])],[O=t===Is?V:qt(Z[0][0],Z[1][0]),K=t===br?G:qt(Z[0][1],Z[1][1])]],ct.length>1&&pt(v)}else z=N[0][0],I=N[0][1],O=N[1][0],K=N[1][1];A=z,k=I,q=O,W=K;var F=Wt(y).attr("pointer-events","none"),$=F.selectAll(".overlay").attr("cursor",Fe[w]);if(v.touches)R.moved=P,R.ended=ft;else{var L=Wt(v.view).on("mousemove.brush",P,!0).on("mouseup.brush",ft,!0);r&&L.on("keydown.brush",_t,!0).on("keyup.brush",St,!0),Ta(v.view)}c.call(y),R.start(v,m.name);function P(Z){for(const rt of Z.changedTouches||[Z])for(const Dt of ct)Dt.identifier===rt.identifier&&(Dt.cur=be(rt,y));if(ut&&!st&&!dt&&ct.length===1){const rt=ct[0];Ol(rt.cur[0]-rt[0])>Ol(rt.cur[1]-rt[1])?dt=!0:st=!0}for(const rt of ct)rt.cur&&(rt[0]=rt.cur[0],rt[1]=rt.cur[1]);gt=!0,zs(Z),pt(Z)}function pt(Z){const rt=ct[0],Dt=rt.point0;var zt;switch(Q=rt[0]-Dt[0],J=rt[1]-Dt[1],m){case Os:case zl:{p&&(Q=qt(B-z,Yt(V-O,Q)),A=z+Q,q=O+Q),_&&(J=qt(Y-I,Yt(G-K,J)),k=I+J,W=K+J);break}case An:{ct[1]?(p&&(A=qt(B,Yt(V,ct[0][0])),q=qt(B,Yt(V,ct[1][0])),p=1),_&&(k=qt(Y,Yt(G,ct[0][1])),W=qt(Y,Yt(G,ct[1][1])),_=1)):(p<0?(Q=qt(B-z,Yt(V-z,Q)),A=z+Q,q=O):p>0&&(Q=qt(B-O,Yt(V-O,Q)),A=z,q=O+Q),_<0?(J=qt(Y-I,Yt(G-I,J)),k=I+J,W=K):_>0&&(J=qt(Y-K,Yt(G-K,J)),k=I,W=K+J));break}case Pn:{p&&(A=qt(B,Yt(V,z-Q*p)),q=qt(B,Yt(V,O+Q*p))),_&&(k=qt(Y,Yt(G,I-J*_)),W=qt(Y,Yt(G,K+J*_)));break}}q<A&&(p*=-1,zt=z,z=O,O=zt,zt=A,A=q,q=zt,w in Ul&&$.attr("cursor",Fe[w=Ul[w]])),W<k&&(_*=-1,zt=I,I=K,K=zt,zt=k,k=W,W=zt,w in Bl&&$.attr("cursor",Fe[w=Bl[w]])),M.selection&&(N=M.selection),st&&(A=N[0][0],q=N[1][0]),dt&&(k=N[0][1],W=N[1][1]),(N[0][0]!==A||N[0][1]!==k||N[1][0]!==q||N[1][1]!==W)&&(M.selection=[[A,k],[q,W]],c.call(y),R.brush(Z,m.name))}function ft(Z){if(P2(Z),Z.touches){if(Z.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Da(Z.view,gt),L.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),$.attr("cursor",Fe.overlay),M.selection&&(N=M.selection),R2(N)&&(M.selection=null,c.call(y)),R.end(Z,m.name)}function _t(Z){switch(Z.keyCode){case 16:{ut=p&&_;break}case 18:{m===An&&(p&&(O=q-Q*p,z=A+Q*p),_&&(K=W-J*_,I=k+J*_),m=Pn,pt(Z));break}case 32:{(m===An||m===Pn)&&(p<0?O=q-Q:p>0&&(z=A-Q),_<0?K=W-J:_>0&&(I=k-J),m=Os,$.attr("cursor",Fe.selection),pt(Z));break}default:return}zs(Z)}function St(Z){switch(Z.keyCode){case 16:{ut&&(st=dt=ut=!1,pt(Z));break}case 18:{m===Pn&&(p<0?O=q:p>0&&(z=A),_<0?K=W:_>0&&(I=k),m=An,pt(Z));break}case 32:{m===Os&&(Z.altKey?(p&&(O=q-Q*p,z=A+Q*p),_&&(K=W-J*_,I=k+J*_),m=Pn):(p<0?O=q:p>0&&(z=A),_<0?K=W:_>0&&(I=k),m=An),$.attr("cursor",Fe[w]),pt(Z));break}default:return}zs(Z)}}function d(v){u(this,arguments).moved(v)}function g(v){u(this,arguments).ended(v)}function b(){var v=this.__brush||{selection:null};return v.extent=so(e.apply(this,arguments)),v.dim=t,v}return l.extent=function(v){return arguments.length?(e=typeof v=="function"?v:Ps(so(v)),l):e},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Ps(!!v),l):n},l.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Ps(!!v),l):i},l.handleSize=function(v){return arguments.length?(o=+v,l):o},l.keyModifiers=function(v){return arguments.length?(r=!!v,l):r},l.on=function(){var v=s.on.apply(s,arguments);return v===s?l:v},l}const lr=t=>()=>t;function Y2(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function $e(t,e,n){this.k=t,this.x=e,this.y=n}$e.prototype={constructor:$e,scale:function(t){return t===1?this:new $e(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new $e(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Na=new $e(1,0,0);$e.prototype;function Bs(t){t.stopImmediatePropagation()}function bi(t){t.preventDefault(),t.stopImmediatePropagation()}function K2(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function H2(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Vl(){return this.__zoom||Na}function $2(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function G2(){return navigator.maxTouchPoints||"ontouchstart"in this}function W2(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function j2(){var t=K2,e=H2,n=W2,i=$2,r=G2,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Hd,c=Qi("start","zoom","end"),u,f,h,d=500,g=150,b=0,v=10;function y(k){k.property("__zoom",Vl).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",z).filter(r).on("touchstart.zoom",A).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(k,V,O,q){var G=k.selection?k.selection():k;G.property("__zoom",Vl),k!==G?_(k,V,O,q):G.interrupt().each(function(){M(this,arguments).event(q).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},y.scaleBy=function(k,V,O,q){y.scaleTo(k,function(){var G=this.__zoom.k,K=typeof V=="function"?V.apply(this,arguments):V;return G*K},O,q)},y.scaleTo=function(k,V,O,q){y.transform(k,function(){var G=e.apply(this,arguments),K=this.__zoom,W=O==null?p(G):typeof O=="function"?O.apply(this,arguments):O,Q=K.invert(W),J=typeof V=="function"?V.apply(this,arguments):V;return n(m(w(K,J),W,Q),G,o)},O,q)},y.translateBy=function(k,V,O,q){y.transform(k,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),o)},null,q)},y.translateTo=function(k,V,O,q,G){y.transform(k,function(){var K=e.apply(this,arguments),W=this.__zoom,Q=q==null?p(K):typeof q=="function"?q.apply(this,arguments):q;return n(Na.translate(Q[0],Q[1]).scale(W.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof O=="function"?-O.apply(this,arguments):-O),K,o)},q,G)};function w(k,V){return V=Math.max(s[0],Math.min(s[1],V)),V===k.k?k:new $e(V,k.x,k.y)}function m(k,V,O){var q=V[0]-O[0]*k.k,G=V[1]-O[1]*k.k;return q===k.x&&G===k.y?k:new $e(k.k,q,G)}function p(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function _(k,V,O,q){k.on("start.zoom",function(){M(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(q).end()}).tween("zoom",function(){var G=this,K=arguments,W=M(G,K).event(q),Q=e.apply(G,K),J=O==null?p(Q):typeof O=="function"?O.apply(G,K):O,gt=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),ut=G.__zoom,st=typeof V=="function"?V.apply(G,K):V,dt=l(ut.invert(J).concat(gt/ut.k),st.invert(J).concat(gt/st.k));return function(ct){if(ct===1)ct=st;else{var R=dt(ct),F=gt/R[2];ct=new $e(F,J[0]-R[0]*F,J[1]-R[1]*F)}W.zoom(null,ct)}})}function M(k,V,O){return!O&&k.__zooming||new C(k,V)}function C(k,V){this.that=k,this.args=V,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,V),this.taps=0}C.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,V){return this.mouse&&k!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var V=Wt(this.that).datum();c.call(k,this.that,new Y2(k,{sourceEvent:this.sourceEvent,target:y,type:k,transform:this.that.__zoom,dispatch:c}),V)}};function N(k,...V){if(!t.apply(this,arguments))return;var O=M(this,V).event(k),q=this.__zoom,G=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,i.apply(this,arguments)))),K=be(k);if(O.wheel)(O.mouse[0][0]!==K[0]||O.mouse[0][1]!==K[1])&&(O.mouse[1]=q.invert(O.mouse[0]=K)),clearTimeout(O.wheel);else{if(q.k===G)return;O.mouse=[K,q.invert(K)],qn(this),O.start()}bi(k),O.wheel=setTimeout(W,g),O.zoom("mouse",n(m(w(q,G),O.mouse[0],O.mouse[1]),O.extent,o));function W(){O.wheel=null,O.end()}}function B(k,...V){if(h||!t.apply(this,arguments))return;var O=k.currentTarget,q=M(this,V,!0).event(k),G=Wt(k.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",gt,!0),K=be(k,O),W=k.clientX,Q=k.clientY;Ta(k.view),Bs(k),q.mouse=[K,this.__zoom.invert(K)],qn(this),q.start();function J(ut){if(bi(ut),!q.moved){var st=ut.clientX-W,dt=ut.clientY-Q;q.moved=st*st+dt*dt>b}q.event(ut).zoom("mouse",n(m(q.that.__zoom,q.mouse[0]=be(ut,O),q.mouse[1]),q.extent,o))}function gt(ut){G.on("mousemove.zoom mouseup.zoom",null),Da(ut.view,q.moved),bi(ut),q.event(ut).end()}}function z(k,...V){if(!!t.apply(this,arguments)){var O=this.__zoom,q=be(k.changedTouches?k.changedTouches[0]:k,this),G=O.invert(q),K=O.k*(k.shiftKey?.5:2),W=n(m(w(O,K),q,G),e.apply(this,V),o);bi(k),a>0?Wt(this).transition().duration(a).call(_,W,q,k):Wt(this).call(y.transform,W,q,k)}}function A(k,...V){if(!!t.apply(this,arguments)){var O=k.touches,q=O.length,G=M(this,V,k.changedTouches.length===q).event(k),K,W,Q,J;for(Bs(k),W=0;W<q;++W)Q=O[W],J=be(Q,this),J=[J,this.__zoom.invert(J),Q.identifier],G.touch0?!G.touch1&&G.touch0[2]!==J[2]&&(G.touch1=J,G.taps=0):(G.touch0=J,K=!0,G.taps=1+!!u);u&&(u=clearTimeout(u)),K&&(G.taps<2&&(f=J[0],u=setTimeout(function(){u=null},d)),qn(this),G.start())}}function Y(k,...V){if(!!this.__zooming){var O=M(this,V).event(k),q=k.changedTouches,G=q.length,K,W,Q,J;for(bi(k),K=0;K<G;++K)W=q[K],Q=be(W,this),O.touch0&&O.touch0[2]===W.identifier?O.touch0[0]=Q:O.touch1&&O.touch1[2]===W.identifier&&(O.touch1[0]=Q);if(W=O.that.__zoom,O.touch1){var gt=O.touch0[0],ut=O.touch0[1],st=O.touch1[0],dt=O.touch1[1],ct=(ct=st[0]-gt[0])*ct+(ct=st[1]-gt[1])*ct,R=(R=dt[0]-ut[0])*R+(R=dt[1]-ut[1])*R;W=w(W,Math.sqrt(ct/R)),Q=[(gt[0]+st[0])/2,(gt[1]+st[1])/2],J=[(ut[0]+dt[0])/2,(ut[1]+dt[1])/2]}else if(O.touch0)Q=O.touch0[0],J=O.touch0[1];else return;O.zoom("touch",n(m(W,Q,J),O.extent,o))}}function I(k,...V){if(!!this.__zooming){var O=M(this,V).event(k),q=k.changedTouches,G=q.length,K,W;for(Bs(k),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),K=0;K<G;++K)W=q[K],O.touch0&&O.touch0[2]===W.identifier?delete O.touch0:O.touch1&&O.touch1[2]===W.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(W=be(W,this),Math.hypot(f[0]-W[0],f[1]-W[1])<v)){var Q=Wt(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return y.wheelDelta=function(k){return arguments.length?(i=typeof k=="function"?k:lr(+k),y):i},y.filter=function(k){return arguments.length?(t=typeof k=="function"?k:lr(!!k),y):t},y.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:lr(!!k),y):r},y.extent=function(k){return arguments.length?(e=typeof k=="function"?k:lr([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),y):e},y.scaleExtent=function(k){return arguments.length?(s[0]=+k[0],s[1]=+k[1],y):[s[0],s[1]]},y.translateExtent=function(k){return arguments.length?(o[0][0]=+k[0][0],o[1][0]=+k[1][0],o[0][1]=+k[0][1],o[1][1]=+k[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(k){return arguments.length?(n=k,y):n},y.duration=function(k){return arguments.length?(a=+k,y):a},y.interpolate=function(k){return arguments.length?(l=k,y):l},y.on=function(){var k=c.on.apply(c,arguments);return k===c?y:k},y.clickDistance=function(k){return arguments.length?(b=(k=+k)*k,y):Math.sqrt(b)},y.tapDistance=function(k){return arguments.length?(v=+k,y):v},y}const Ea=Math.random,X2=function t(e){function n(i,r){return i=i==null?0:+i,r=r==null?1:+r,arguments.length===1?(r=i,i=0):r-=i,function(){return e()*r+i}}return n.source=t,n}(Ea),Q2=function t(e){function n(i,r){return arguments.length<2&&(r=i,i=0),i=Math.floor(i),r=Math.floor(r)-i,function(){return Math.floor(e()*r+i)}}return n.source=t,n}(Ea),Z2=function t(e){function n(i,r){var s,o;return i=i==null?0:+i,r=r==null?1:+r,function(){var a;if(s!=null)a=s,s=null;else do s=e()*2-1,a=e()*2-1,o=s*s+a*a;while(!o||o>1);return i+r*a*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(Ea);var J2=Array.prototype,t5=J2.slice;function e5(t,e){return t-e}function n5(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}const Rl=t=>()=>t;function i5(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=r5(t,e[n]))return r;return 0}function r5(t,e){for(var n=e[0],i=e[1],r=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],c=l[0],u=l[1],f=t[a],h=f[0],d=f[1];if(s5(l,f,e))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function s5(t,e,n){var i;return o5(t,e,n)&&a5(t[i=+(t[0]===e[0])],n[i],e[i])}function o5(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function a5(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function l5(){}var qe=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function c5(){var t=1,e=1,n=Hc,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(e5);else{const f=Ei(c),h=kr(f[0],f[1],u);u=zi(Math.floor(f[0]/h)*h,Math.floor(f[1]/h-1)*h,u)}return u.map(f=>s(c,f))}function s(c,u){var f=[],h=[];return o(c,u,function(d){i(d,c,u),n5(d)>0?f.push([d]):h.push(d)}),h.forEach(function(d){for(var g=0,b=f.length,v;g<b;++g)if(i5((v=f[g])[0],d)!==-1){v.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(c,u,f){var h=new Array,d=new Array,g,b,v,y,w,m;for(g=b=-1,y=c[0]>=u,qe[y<<1].forEach(p);++g<t-1;)v=y,y=c[g+1]>=u,qe[v|y<<1].forEach(p);for(qe[y<<0].forEach(p);++b<e-1;){for(g=-1,y=c[b*t+t]>=u,w=c[b*t]>=u,qe[y<<1|w<<2].forEach(p);++g<t-1;)v=y,y=c[b*t+t+g+1]>=u,m=w,w=c[b*t+g+1]>=u,qe[v|y<<1|w<<2|m<<3].forEach(p);qe[y|w<<3].forEach(p)}for(g=-1,w=c[b*t]>=u,qe[w<<2].forEach(p);++g<t-1;)m=w,w=c[b*t+g+1]>=u,qe[w<<2|m<<3].forEach(p);qe[w<<3].forEach(p);function p(_){var M=[_[0][0]+g,_[0][1]+b],C=[_[1][0]+g,_[1][1]+b],N=a(M),B=a(C),z,A;(z=d[N])?(A=h[B])?(delete d[z.end],delete h[A.start],z===A?(z.ring.push(C),f(z.ring)):h[z.start]=d[A.end]={start:z.start,end:A.end,ring:z.ring.concat(A.ring)}):(delete d[z.end],z.ring.push(C),d[z.end=B]=z):(z=h[B])?(A=d[N])?(delete h[z.start],delete d[A.end],z===A?(z.ring.push(C),f(z.ring)):h[A.start]=d[z.end]={start:A.start,end:z.end,ring:A.ring.concat(z.ring)}):(delete h[z.start],z.ring.unshift(M),h[z.start=N]=z):h[N]=d[B]={start:N,end:B,ring:[M,C]}}}function a(c){return c[0]*2+c[1]*(t+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],b=d|0,v=g|0,y,w=u[v*t+b];d>0&&d<t&&b===d&&(y=u[v*t+b-1],h[0]=d+(f-y)/(w-y)-.5),g>0&&g<e&&v===g&&(y=u[(v-1)*t+b],h[1]=g+(f-y)/(w-y)-.5)})}return r.contour=s,r.size=function(c){if(!arguments.length)return[t,e];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return t=u,e=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Rl(t5.call(c)):Rl(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:l5,r):i===l},r}var u5=Math.PI,h5=u5*2,f5=Math.abs,La=Math.sqrt;function ke(){}function Ur(t,e){t&&ql.hasOwnProperty(t.type)&&ql[t.type](t,e)}var Fl={Feature:function(t,e){Ur(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ur(n[i].geometry,e)}},ql={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){oo(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)oo(n[i],e,0)},Polygon:function(t,e){Yl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Yl(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ur(n[i],e)}};function oo(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function Yl(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)oo(t[n],e,1);e.polygonEnd()}function wi(t,e){t&&Fl.hasOwnProperty(t.type)?Fl[t.type](t,e):Ur(t,e)}const d5=t=>t;var Vs=new Gn,ao=new Gn,Xu,Qu,lo,co,on={point:ke,lineStart:ke,lineEnd:ke,polygonStart:function(){on.lineStart=g5,on.lineEnd=m5},polygonEnd:function(){on.lineStart=on.lineEnd=on.point=ke,Vs.add(f5(ao)),ao=new Gn},result:function(){var t=Vs/2;return Vs=new Gn,t}};function g5(){on.point=p5}function p5(t,e){on.point=Zu,Xu=lo=t,Qu=co=e}function Zu(t,e){ao.add(co*t-lo*e),lo=t,co=e}function m5(){Zu(Xu,Qu)}const Kl=on;var ei=1/0,Br=ei,Ki=-ei,Vr=Ki,y5={point:b5,lineStart:ke,lineEnd:ke,polygonStart:ke,polygonEnd:ke,result:function(){var t=[[ei,Br],[Ki,Vr]];return Ki=Vr=-(Br=ei=1/0),t}};function b5(t,e){t<ei&&(ei=t),t>Ki&&(Ki=t),e<Br&&(Br=e),e>Vr&&(Vr=e)}const Hl=y5;var uo=0,ho=0,Mi=0,Rr=0,Fr=0,Un=0,fo=0,go=0,Ci=0,Ju,th,De,Ne,_e={point:xn,lineStart:$l,lineEnd:Gl,polygonStart:function(){_e.lineStart=_5,_e.lineEnd=S5},polygonEnd:function(){_e.point=xn,_e.lineStart=$l,_e.lineEnd=Gl},result:function(){var t=Ci?[fo/Ci,go/Ci]:Un?[Rr/Un,Fr/Un]:Mi?[uo/Mi,ho/Mi]:[NaN,NaN];return uo=ho=Mi=Rr=Fr=Un=fo=go=Ci=0,t}};function xn(t,e){uo+=t,ho+=e,++Mi}function $l(){_e.point=w5}function w5(t,e){_e.point=v5,xn(De=t,Ne=e)}function v5(t,e){var n=t-De,i=e-Ne,r=La(n*n+i*i);Rr+=r*(De+t)/2,Fr+=r*(Ne+e)/2,Un+=r,xn(De=t,Ne=e)}function Gl(){_e.point=xn}function _5(){_e.point=k5}function S5(){eh(Ju,th)}function k5(t,e){_e.point=eh,xn(Ju=De=t,th=Ne=e)}function eh(t,e){var n=t-De,i=e-Ne,r=La(n*n+i*i);Rr+=r*(De+t)/2,Fr+=r*(Ne+e)/2,Un+=r,r=Ne*t-De*e,fo+=r*(De+t),go+=r*(Ne+e),Ci+=r*3,xn(De=t,Ne=e)}const Wl=_e;function nh(t){this._context=t}nh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,h5);break}}},result:ke};var po=new Gn,Rs,ih,rh,Ti,Di,qr={point:ke,lineStart:function(){qr.point=x5},lineEnd:function(){Rs&&sh(ih,rh),qr.point=ke},polygonStart:function(){Rs=!0},polygonEnd:function(){Rs=null},result:function(){var t=+po;return po=new Gn,t}};function x5(t,e){qr.point=sh,ih=Ti=t,rh=Di=e}function sh(t,e){Ti-=t,Di-=e,po.add(La(Ti*Ti+Di*Di)),Ti=t,Di=e}const jl=qr;let Xl,Yr,Ql,Zl;class Jl{constructor(e){this._append=e==null?oh:M5(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Ql||this._append!==Yr){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ql=i,Yr=this._append,Zl=this._,this._=r}this._+=Zl;break}}}result(){const e=this._;return this._="",e.length?e:null}}function oh(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function M5(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return oh;if(e!==Xl){const n=10**e;Xl=e,Yr=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return Yr}function C5(t,e){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),wi(a,r(s))),s.result()}return o.area=function(a){return wi(a,r(Kl)),Kl.result()},o.measure=function(a){return wi(a,r(jl)),jl.result()},o.bounds=function(a){return wi(a,r(Hl)),Hl.result()},o.centroid=function(a){return wi(a,r(Wl)),Wl.result()},o.projection=function(a){return arguments.length?(r=a==null?(t=null,d5):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new Jl(n)):new nh(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(s=new Jl(n)),o},o.projection(t).digits(n).context(e)}const U={select:Wt,selectAll:O0,json:U0,scaleLinear:yu,scaleSqrt:_1,scalePoint:ud,scaleBand:ia,scalePow:ua,scaleOrdinal:na,scaleLog:wu,scaleSequential:Tu,scaleTime:Ug,scaleUtc:Bg,schemeTableau10:Fg,interpolateRainbow:Zg,interpolateBlues:Yg,interpolateGreens:Hg,interpolateReds:jg,interpolateOranges:Qg,interpolateGreys:Gg,interpolateViridis:Jg,lch:kd,hsl:Wc,rgb:Ii,color:un,quantize:Wd,interpolate:ai,interpolateHcl:Gd,max:ed,maxIndex:nd,min:id,minIndex:rd,extent:Ei,sum:ld,shuffle:od,bin:td,timeout:Zs,transition:zu,easeLinear:um,easePolyInOut:fm,easeQuadInOut:hm,easeCubicInOut:Iu,easeElasticOut:dm,axisLeft:xm,axisBottom:km,line:Rm,curveStepAfter:Xm,brush:q2,brushX:F2,zoom:j2,zoomIdentity:Na,drag:L2,format:Jr,curveMonotoneX:Wm,curveMonotoneY:jm,curveBasis:Gm,timeFormat:pa,utcParse:Cu,utcFormat:ma,timeSecond:an,timeMinute:ts,timeHour:es,timeDay:li,timeWeek:ji,timeMonth:rs,timeYear:Oe,hierarchy:Ca,partition:w2,tree:M2,arc:Im,linkHorizontal:Hm,linkVertical:$m,path:Vu,randomNormal:Z2,randomUniform:X2,randomInt:Q2,contours:c5,geoPath:C5};var tt=(t=>(t.Keyword="keyword",t.Chrf="chrf",t.SourceID="source id",t.Embedding="embedding",t.Familiarity="familiarity",t.UnitTest="unit test",t))(tt||{}),Gt=(t=>(t.Date="date",t.Keyword="keyword",t.Embedding="embedding",t.Chrf="chrf",t.Familiarity="familiarity",t.SourceID="sourceID",t.OtherSet="otherSet",t.Search="search",t))(Gt||{}),mt=(t=>(t.displayName="displayName",t.logCount="logCount",t.trainCount="trainCount",t.chrf="chrf",t.familiarity="familiarity",t.trainLogRatio="trainLogRatio",t))(mt||{}),vt=(t=>(t.Topic="topic",t.UnitTest="unit-test",t))(vt||{});const T5=[{fileName:"challenge-ovs",displayName:"OVS Set",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-unicode",displayName:"Emojis",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-number",displayName:"Numbers",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-capital",displayName:"Capitals",count:100,type:vt.UnitTest},{fileName:"challenge-topic-pain",displayName:"Pain",count:100,chrf:90.79799999999999,type:vt.Topic},{fileName:"challenge-topic-bills",displayName:"Bills",count:100,chrf:79.7324,type:vt.Topic},{fileName:"challenge-topic-covid",displayName:"COVID",count:100,chrf:92.03,type:vt.Topic},{fileName:"challenge-topic-immigration",displayName:"Immigration",count:100,chrf:92.3788,type:vt.Topic},{fileName:"challenge-topic-insurance",displayName:"Insurance",count:100,chrf:91.81559999999999,type:vt.Topic},{fileName:"challenge-topic-lease",displayName:"Lease",count:100,chrf:91.40879999999999,type:vt.Topic},{fileName:"challenge-topic-legal",displayName:"Legal",count:100,chrf:89.2104,type:vt.Topic},{fileName:"challenge-topic-loans",displayName:"Loans",count:100,chrf:88.3268,type:vt.Topic},{fileName:"challenge-topic-medication",displayName:"Medication",count:100,chrf:87.2668,type:vt.Topic},{fileName:"challenge-topic-medicine",displayName:"Medicine",count:100,chrf:94.3276,type:vt.Topic},{fileName:"challenge-topic-passwords",displayName:"Passwords",count:100,chrf:88.786,type:vt.Topic},{fileName:"challenge-topic-privacy-agreements",displayName:"Privacy",count:100,chrf:94.88719999999999,type:vt.Topic},{fileName:"challenge-topic-school",displayName:"School",count:100,chrf:91.1164,type:vt.Topic},{fileName:"challenge-topic-taxes",displayName:"Taxes",count:100,chrf:92.4384,type:vt.Topic},{fileName:"challenge-topic-ukraine",displayName:"Ukraine",count:100,chrf:89.99799999999999,type:vt.Topic},{fileName:"challenge-topic-work",displayName:"Work",count:100,chrf:88.5992,type:vt.Topic},{fileName:"challenge-mismatch-dots",displayName:"Dots",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-exclamation",displayName:"Exclamation",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-parenthesis",displayName:"Parenthesis",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-period",displayName:"Period",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-question",displayName:"Question",count:100,type:vt.UnitTest},{fileName:"challenge-mismatch-url",displayName:"URL",count:100,type:vt.UnitTest},{fileName:"challenge-new-punctuation",displayName:"New Punctuation",count:100,type:vt.UnitTest}],D5={toolbarHeight:36},N5={mouseenterDelay:300},E5={"red-50":"hsl(350, 100.0%, 96.08%)","red-100":"hsl(354, 100.0%, 90.2%)","red-200":"hsl(0, 72.65%, 77.06%)","red-300":"hsl(0, 68.67%, 67.45%)","red-400":"hsl(1, 83.25%, 62.55%)","red-500":"hsl(4, 89.62%, 58.43%)","red-600":"hsl(1, 77.19%, 55.29%)","red-700":"hsl(0, 65.08%, 50.59%)","red-800":"hsl(0, 66.39%, 46.67%)","red-900":"hsl(0, 73.46%, 41.37%)","red-a100":"hsl(4, 100.0%, 75.1%)","red-a200":"hsl(0, 100.0%, 66.08%)","red-a400":"hsl(348, 100.0%, 54.51%)","red-a700":"hsl(0, 100.0%, 41.76%)","pink-50":"hsl(340, 80.0%, 94.12%)","pink-100":"hsl(339, 81.33%, 85.29%)","pink-200":"hsl(339, 82.11%, 75.88%)","pink-300":"hsl(339, 82.56%, 66.27%)","pink-400":"hsl(339, 81.9%, 58.82%)","pink-500":"hsl(339, 82.19%, 51.57%)","pink-600":"hsl(338, 77.78%, 47.65%)","pink-700":"hsl(336, 77.98%, 42.75%)","pink-800":"hsl(333, 79.27%, 37.84%)","pink-900":"hsl(328, 81.33%, 29.41%)","pink-a100":"hsl(339, 100.0%, 75.1%)","pink-a200":"hsl(339, 100.0%, 62.55%)","pink-a400":"hsl(338, 100.0%, 48.04%)","pink-a700":"hsl(333, 84.11%, 41.96%)","purple-50":"hsl(292, 44.44%, 92.94%)","purple-100":"hsl(291, 46.07%, 82.55%)","purple-200":"hsl(291, 46.94%, 71.18%)","purple-300":"hsl(291, 46.6%, 59.61%)","purple-400":"hsl(291, 46.61%, 50.78%)","purple-500":"hsl(291, 63.72%, 42.16%)","purple-600":"hsl(287, 65.05%, 40.39%)","purple-700":"hsl(282, 67.88%, 37.84%)","purple-800":"hsl(277, 70.17%, 35.49%)","purple-900":"hsl(267, 75.0%, 31.37%)","purple-a100":"hsl(291, 95.38%, 74.51%)","purple-a200":"hsl(291, 95.9%, 61.76%)","purple-a400":"hsl(291, 100.0%, 48.82%)","purple-a700":"hsl(280, 100.0%, 50.0%)","deep-purple-50":"hsl(264, 45.45%, 93.53%)","deep-purple-100":"hsl(261, 45.68%, 84.12%)","deep-purple-200":"hsl(261, 46.27%, 73.73%)","deep-purple-300":"hsl(261, 46.81%, 63.14%)","deep-purple-400":"hsl(261, 46.72%, 55.1%)","deep-purple-500":"hsl(261, 51.87%, 47.25%)","deep-purple-600":"hsl(259, 53.91%, 45.1%)","deep-purple-700":"hsl(257, 57.75%, 41.76%)","deep-purple-800":"hsl(254, 60.8%, 39.02%)","deep-purple-900":"hsl(251, 68.79%, 33.92%)","deep-purple-a100":"hsl(261, 100.0%, 76.67%)","deep-purple-a200":"hsl(255, 100.0%, 65.1%)","deep-purple-a400":"hsl(258, 100.0%, 56.08%)","deep-purple-a700":"hsl(265, 100.0%, 45.88%)","indigo-50":"hsl(231, 43.75%, 93.73%)","indigo-100":"hsl(231, 45.0%, 84.31%)","indigo-200":"hsl(230, 44.36%, 73.92%)","indigo-300":"hsl(230, 44.09%, 63.53%)","indigo-400":"hsl(230, 44.25%, 55.69%)","indigo-500":"hsl(230, 48.36%, 47.84%)","indigo-600":"hsl(231, 50.0%, 44.71%)","indigo-700":"hsl(231, 53.62%, 40.59%)","indigo-800":"hsl(232, 57.22%, 36.67%)","indigo-900":"hsl(234, 65.79%, 29.8%)","indigo-a100":"hsl(230, 100.0%, 77.45%)","indigo-a200":"hsl(230, 98.84%, 66.08%)","indigo-a400":"hsl(230, 98.97%, 61.76%)","indigo-a700":"hsl(230, 99.04%, 59.22%)","blue-50":"hsl(205, 86.67%, 94.12%)","blue-100":"hsl(207, 88.89%, 85.88%)","blue-200":"hsl(206, 89.74%, 77.06%)","blue-300":"hsl(206, 89.02%, 67.84%)","blue-400":"hsl(206, 89.95%, 60.98%)","blue-500":"hsl(206, 89.74%, 54.12%)","blue-600":"hsl(208, 79.28%, 50.78%)","blue-700":"hsl(209, 78.72%, 46.08%)","blue-800":"hsl(211, 80.28%, 41.76%)","blue-900":"hsl(216, 85.06%, 34.12%)","blue-a100":"hsl(217, 100.0%, 75.49%)","blue-a200":"hsl(217, 100.0%, 63.33%)","blue-a400":"hsl(217, 100.0%, 58.04%)","blue-a700":"hsl(224, 100.0%, 58.04%)","light-blue-50":"hsl(198, 93.55%, 93.92%)","light-blue-100":"hsl(198, 92.41%, 84.51%)","light-blue-200":"hsl(198, 92.37%, 74.31%)","light-blue-300":"hsl(198, 91.3%, 63.92%)","light-blue-400":"hsl(198, 91.93%, 56.27%)","light-blue-500":"hsl(198, 97.57%, 48.43%)","light-blue-600":"hsl(199, 97.41%, 45.49%)","light-blue-700":"hsl(201, 98.1%, 41.37%)","light-blue-800":"hsl(202, 97.91%, 37.45%)","light-blue-900":"hsl(206, 98.72%, 30.59%)","light-blue-a100":"hsl(198, 100.0%, 75.1%)","light-blue-a200":"hsl(198, 100.0%, 62.55%)","light-blue-a400":"hsl(198, 100.0%, 50.0%)","light-blue-a700":"hsl(202, 100.0%, 45.88%)","cyan-50":"hsl(186, 72.22%, 92.94%)","cyan-100":"hsl(186, 71.11%, 82.35%)","cyan-200":"hsl(186, 71.62%, 70.98%)","cyan-300":"hsl(186, 71.15%, 59.22%)","cyan-400":"hsl(186, 70.87%, 50.2%)","cyan-500":"hsl(186, 100.0%, 41.57%)","cyan-600":"hsl(186, 100.0%, 37.84%)","cyan-700":"hsl(185, 100.0%, 32.75%)","cyan-800":"hsl(185, 100.0%, 28.04%)","cyan-900":"hsl(182, 100.0%, 19.61%)","cyan-a100":"hsl(180, 100.0%, 75.88%)","cyan-a200":"hsl(180, 100.0%, 54.71%)","cyan-a400":"hsl(186, 100.0%, 50.0%)","cyan-a700":"hsl(187, 100.0%, 41.57%)","teal-50":"hsl(176, 40.91%, 91.37%)","teal-100":"hsl(174, 41.28%, 78.63%)","teal-200":"hsl(174, 41.9%, 64.9%)","teal-300":"hsl(174, 41.83%, 50.78%)","teal-400":"hsl(174, 62.75%, 40.0%)","teal-500":"hsl(174, 100.0%, 29.41%)","teal-600":"hsl(173, 100.0%, 26.86%)","teal-700":"hsl(173, 100.0%, 23.73%)","teal-800":"hsl(172, 100.0%, 20.59%)","teal-900":"hsl(169, 100.0%, 15.1%)","teal-a100":"hsl(166, 100.0%, 82.75%)","teal-a200":"hsl(165, 100.0%, 69.61%)","teal-a400":"hsl(165, 82.26%, 51.37%)","teal-a700":"hsl(171, 100.0%, 37.45%)","green-50":"hsl(124, 39.39%, 93.53%)","green-100":"hsl(121, 37.5%, 84.31%)","green-200":"hsl(122, 37.4%, 74.31%)","green-300":"hsl(122, 38.46%, 64.31%)","green-400":"hsl(122, 38.46%, 56.67%)","green-500":"hsl(122, 39.44%, 49.22%)","green-600":"hsl(122, 40.97%, 44.51%)","green-700":"hsl(122, 43.43%, 38.82%)","green-800":"hsl(123, 46.2%, 33.53%)","green-900":"hsl(124, 55.37%, 23.73%)","green-a100":"hsl(136, 77.22%, 84.51%)","green-a200":"hsl(150, 81.82%, 67.65%)","green-a400":"hsl(150, 100.0%, 45.1%)","green-a700":"hsl(144, 100.0%, 39.22%)","light-green-50":"hsl(88, 51.72%, 94.31%)","light-green-100":"hsl(87, 50.68%, 85.69%)","light-green-200":"hsl(88, 50.0%, 76.47%)","light-green-300":"hsl(87, 50.0%, 67.06%)","light-green-400":"hsl(87, 50.24%, 59.8%)","light-green-500":"hsl(87, 50.21%, 52.75%)","light-green-600":"hsl(89, 46.12%, 48.04%)","light-green-700":"hsl(92, 47.91%, 42.16%)","light-green-800":"hsl(95, 49.46%, 36.47%)","light-green-900":"hsl(103, 55.56%, 26.47%)","light-green-a100":"hsl(87, 100.0%, 78.24%)","light-green-a200":"hsl(87, 100.0%, 67.45%)","light-green-a400":"hsl(92, 100.0%, 50.59%)","light-green-a700":"hsl(96, 81.15%, 47.84%)","lime-50":"hsl(65, 71.43%, 94.51%)","lime-100":"hsl(64, 69.01%, 86.08%)","lime-200":"hsl(65, 70.69%, 77.25%)","lime-300":"hsl(65, 70.37%, 68.24%)","lime-400":"hsl(65, 69.7%, 61.18%)","lime-500":"hsl(65, 69.96%, 54.31%)","lime-600":"hsl(63, 59.68%, 49.61%)","lime-700":"hsl(62, 61.43%, 43.73%)","lime-800":"hsl(59, 62.89%, 38.04%)","lime-900":"hsl(53, 69.93%, 30.0%)","lime-a100":"hsl(65, 100.0%, 75.29%)","lime-a200":"hsl(65, 100.0%, 62.75%)","lime-a400":"hsl(73, 100.0%, 50.0%)","lime-a700":"hsl(75, 100.0%, 45.88%)","yellow-50":"hsl(55, 100.0%, 95.29%)","yellow-100":"hsl(53, 100.0%, 88.43%)","yellow-200":"hsl(53, 100.0%, 80.78%)","yellow-300":"hsl(53, 100.0%, 73.14%)","yellow-400":"hsl(53, 100.0%, 67.25%)","yellow-500":"hsl(53, 100.0%, 61.57%)","yellow-600":"hsl(48, 98.04%, 60.0%)","yellow-700":"hsl(42, 96.26%, 58.04%)","yellow-800":"hsl(37, 94.64%, 56.08%)","yellow-900":"hsl(28, 91.74%, 52.55%)","yellow-a100":"hsl(60, 100.0%, 77.65%)","yellow-a200":"hsl(60, 100.0%, 50.0%)","yellow-a400":"hsl(55, 100.0%, 50.0%)","yellow-a700":"hsl(50, 100.0%, 50.0%)","amber-50":"hsl(46, 100.0%, 94.12%)","amber-100":"hsl(45, 100.0%, 85.1%)","amber-200":"hsl(45, 100.0%, 75.49%)","amber-300":"hsl(45, 100.0%, 65.49%)","amber-400":"hsl(45, 100.0%, 57.84%)","amber-500":"hsl(45, 100.0%, 51.37%)","amber-600":"hsl(42, 100.0%, 50.0%)","amber-700":"hsl(37, 100.0%, 50.0%)","amber-800":"hsl(33, 100.0%, 50.0%)","amber-900":"hsl(26, 100.0%, 50.0%)","amber-a100":"hsl(47, 100.0%, 74.9%)","amber-a200":"hsl(47, 100.0%, 62.55%)","amber-a400":"hsl(46, 100.0%, 50.0%)","amber-a700":"hsl(40, 100.0%, 50.0%)","orange-50":"hsl(36, 100.0%, 93.92%)","orange-100":"hsl(35, 100.0%, 84.9%)","orange-200":"hsl(35, 100.0%, 75.1%)","orange-300":"hsl(35, 100.0%, 65.1%)","orange-400":"hsl(35, 100.0%, 57.45%)","orange-500":"hsl(35, 100.0%, 50.0%)","orange-600":"hsl(33, 100.0%, 49.22%)","orange-700":"hsl(30, 100.0%, 48.04%)","orange-800":"hsl(27, 100.0%, 46.86%)","orange-900":"hsl(21, 100.0%, 45.1%)","orange-a100":"hsl(38, 100.0%, 75.1%)","orange-a200":"hsl(33, 100.0%, 62.55%)","orange-a400":"hsl(34, 100.0%, 50.0%)","orange-a700":"hsl(25, 100.0%, 50.0%)","deep-orange-50":"hsl(5, 71.43%, 94.51%)","deep-orange-100":"hsl(14, 100.0%, 86.86%)","deep-orange-200":"hsl(14, 100.0%, 78.43%)","deep-orange-300":"hsl(14, 100.0%, 69.8%)","deep-orange-400":"hsl(14, 100.0%, 63.14%)","deep-orange-500":"hsl(14, 100.0%, 56.67%)","deep-orange-600":"hsl(14, 90.68%, 53.73%)","deep-orange-700":"hsl(14, 80.39%, 50.0%)","deep-orange-800":"hsl(14, 82.28%, 46.47%)","deep-orange-900":"hsl(14, 88.18%, 39.8%)","deep-orange-a100":"hsl(14, 100.0%, 75.1%)","deep-orange-a200":"hsl(14, 100.0%, 62.55%)","deep-orange-a400":"hsl(14, 100.0%, 50.0%)","deep-orange-a700":"hsl(11, 100.0%, 43.33%)","brown-50":"hsl(19, 15.79%, 92.55%)","brown-100":"hsl(16, 15.79%, 81.37%)","brown-200":"hsl(14, 15.19%, 69.02%)","brown-300":"hsl(15, 15.32%, 56.47%)","brown-400":"hsl(15, 17.5%, 47.06%)","brown-500":"hsl(15, 25.39%, 37.84%)","brown-600":"hsl(15, 25.29%, 34.12%)","brown-700":"hsl(14, 25.68%, 29.02%)","brown-800":"hsl(11, 25.81%, 24.31%)","brown-900":"hsl(8, 27.84%, 19.02%)","gray-50":"hsl(0, 0.0%, 98.04%)","gray-100":"hsl(0, 0.0%, 96.08%)","gray-200":"hsl(0, 0.0%, 93.33%)","gray-300":"hsl(0, 0.0%, 87.84%)","gray-400":"hsl(0, 0.0%, 74.12%)","gray-500":"hsl(0, 0.0%, 61.96%)","gray-600":"hsl(0, 0.0%, 45.88%)","gray-700":"hsl(0, 0.0%, 38.04%)","gray-800":"hsl(0, 0.0%, 25.88%)","gray-900":"hsl(0, 0.0%, 12.94%)","blue-gray-50":"hsl(204, 15.15%, 93.53%)","blue-gray-100":"hsl(198, 15.66%, 83.73%)","blue-gray-200":"hsl(199, 15.33%, 73.14%)","blue-gray-300":"hsl(199, 15.63%, 62.35%)","blue-gray-400":"hsl(200, 15.38%, 54.12%)","blue-gray-500":"hsl(199, 18.3%, 46.08%)","blue-gray-600":"hsl(198, 18.45%, 40.39%)","blue-gray-700":"hsl(199, 18.34%, 33.14%)","blue-gray-800":"hsl(199, 17.91%, 26.27%)","blue-gray-900":"hsl(199, 19.15%, 18.43%)","blue-gray-1000":"hsl(199, 20.93%, 8.43%)"},Qe={colors:E5,layout:D5,time:N5,challengeSets:T5},zn=[];function ls(t,e=Tt){let n;const i=new Set;function r(a){if(Cn(t,a)&&(t=a,n)){const l=!zn.length;for(const c of i)c[1](),zn.push(c,t);if(l){for(let c=0;c<zn.length;c+=2)zn[c][0](zn[c+1]);zn.length=0}}}function s(a){r(a(t))}function o(a,l=Tt){const c=[a,l];return i.add(c),i.size===1&&(n=e(r)||Tt),a(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}const Ze=()=>({selectedFileName:"",fileNames:new Set,selectedTypes:new Set(["test","topic"])}),Mn=()=>({show:!1,html:"null",left:0,top:0,width:0,maxWidth:400,fontSize:"13px",tryHeight:!1,orientation:"s"}),cs=()=>({selectedDates:[],allDates:[],dateFormatter:null}),Hi=()=>({sampleMin:0,sampleMax:1e3,curSample:200,curSampleMethod:"unfamiliar",filteredIndexes:[],showLogContour:!1,showLogSample:!0,showTrainSample:!0}),tc=()=>ls(Mn()),ec=()=>ls(Ze()),Kr=()=>ls(cs()),nc=()=>ls(Hi());class ic{constructor({component:e,myTableViewUpdated:n,challengeSets:i,challengeSetDataMap:r,tooltipStore:s,challengeStore:o}){E(this,"component");E(this,"myTableViewUpdated");E(this,"challengeSets");E(this,"challengeSetDataMap");E(this,"svgSize");E(this,"tooltipStore");E(this,"tooltipStoreValue");E(this,"challengeStore");E(this,"challengeStoreValue");E(this,"selectedSetName","");E(this,"selectedSetSentences",[]);E(this,"selectedSetKeywords",[]);E(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.challengeStore.subscribe(e=>{this.challengeStoreValue=e})});E(this,"rowClicked",e=>{if(U.randomUniform(),e.fileName===this.selectedSetName)this.selectedSetName="";else{this.selectedSetName=e.fileName;const n=new Set,i=this.challengeSetDataMap.get(this.selectedSetName);this.selectedSetSentences=[];for(let l=0;l<Math.min(i.source.length,100);l++)!n.has(i.source[l])&&i.hyp[l]!==null&&(this.selectedSetSentences.push({source:i.source[l],hyp:i.hyp[l],showHyp:!1}),n.add(i.source[l]));const r=[],s=50;for(const[l,c]of i.keywords)r.push({word:l,value:c});this.selectedSetKeywords=r.slice(0,s);const o=U.extent(this.selectedSetKeywords,l=>l.value),a=U.scaleLinear().domain(o).range([.005,.3]);for(const l of this.selectedSetKeywords)l.color=U.interpolateGreys(a(l.value));this.selectedSetKeywords.sort((l,c)=>c.value-l.value)}this.myTableViewUpdated()});E(this,"drawRowTrainCountBar",()=>{const e=U.select(this.component).select("table.table"),n=U.max(this.challengeSets,r=>r.trainCount),i=U.scaleLinear().domain([0,n]).range([this.svgSize.width,0]);for(const r of this.challengeSets){const o=e.select(`#cell-train-count-${r.fileName}`).append("g").attr("class","content");o.append("rect").attr("class","count-bar-back train").attr("width",this.svgSize.width).attr("height",this.svgSize.height),o.append("rect").attr("class","count-bar-front train").attr("x",i(r.trainCount)).attr("width",this.svgSize.width-i(r.trainCount)).attr("height",this.svgSize.height)}});E(this,"drawRowLogCountBar",()=>{const e=U.select(this.component).select("table.table"),n=U.max(this.challengeSets,r=>r.logCount),i=U.scaleLinear().domain([0,n]).range([this.svgSize.width,0]);for(const r of this.challengeSets){const o=e.select(`#cell-log-count-${r.fileName}`).append("g").attr("class","content");o.append("rect").attr("class","count-bar-back log").attr("width",this.svgSize.width).attr("height",this.svgSize.height),o.append("rect").attr("class","count-bar-front log").attr("x",i(r.logCount)).attr("width",this.svgSize.width-i(r.logCount)).attr("height",this.svgSize.height)}});E(this,"drawRowRatio",()=>{const e=U.select(this.component).select("table.table");for(const n of this.challengeSets){const i=n.trainLogRatio?n.trainLogRatio:0,r=e.select(`#cell-ratio-${n.fileName}`);r.style("width",`${2*this.svgSize.height}px`);const s=U.arc(),o={innerRadius:0,outerRadius:this.svgSize.height,startAngle:Math.PI/2,endAngle:Math.PI*3/2},a={innerRadius:0,outerRadius:this.svgSize.height,startAngle:Math.PI/2,endAngle:Math.PI/2+Math.PI*i},l=r.append("g").attr("class","content").attr("transform",`rotate(180, ${this.svgSize.height}, ${this.svgSize.height/2})`);l.append("path").attr("transform",`translate(${this.svgSize.height}, 0)`).attr("class","arc-back").attr("d",s(o)),l.append("path").attr("transform",`translate(${this.svgSize.height}, 0)`).attr("class","arc-front").attr("d",s(a))}});E(this,"drawRowHistograms",(e,n)=>{const i=U.select(this.component).select("table.table");for(const r of this.challengeSets){if(n&&r.type!=="topic")continue;let s=[];if(e==="chrf")s=this.challengeSetDataMap.get(r.fileName).chrf.filter(w=>w!==null);else if(e==="familiarity")s=this.challengeSetDataMap.get(r.fileName).familiarity.filter(w=>w!==null);else{console.error("Unknown metric",e);return}const o=i.select(`#cell-${e}-${r.fileName}`),a=9,l=Array(a).fill(0).map((w,m)=>(m+1)*(1/(a+1))),u=U.bin().domain([0,1]).thresholds(l)(s),f=u.map(w=>w.length),h=o.append("g").attr("class","content");if(e==="chrf"&&s.length===0){h.selectAll("rect.hist-bar").data([0]).join("rect").attr("class",`hist-bar ${e} missing`).attr("x",0).attr("y",0).attr("width",this.svgSize.width).attr("height",this.svgSize.height);continue}const d=U.scaleLinear().domain([0,1]).range([0,this.svgSize.width]),g=U.scaleLinear().domain([0,Math.max(...f)]).range([this.svgSize.height,0]),b=d(.1)-d(0),v=.5,y=.5;h.selectAll("rect.hist-bar").data(u).join("rect").attr("class",`hist-bar ${e}`).attr("x",w=>d(w.x0)+v).attr("y",w=>g(w.length)).attr("width",Math.max(0,b-v-y)).attr("height",w=>this.svgSize.height-g(w.length))}});E(this,"showDetailClicked",e=>{this.challengeStoreValue.selectedFileName=e.fileName,this.challengeStoreValue.challengeSet=e,this.challengeStoreValue.challengeData=this.challengeSetDataMap.get(e.fileName),this.challengeStore.set(this.challengeStoreValue)});E(this,"headerMouseenter",(e,n)=>{let i="";switch(n.key){case mt.chrf:{i="Average of ChrF scores (translation quality) on the training data";break}case mt.trainCount:{i="Number of all training samples in this challenge set";break}case mt.logCount:{i="Number of all log samples in this challenge set";break}case mt.familiarity:{i="Likelyhood of seeing a usage log sample under the training data's distributition";break}case mt.trainLogRatio:{i="Percentage of training samples in this set (training and log samples)";break}default:return}this.tooltipStoreValue.html=i;const s=e.currentTarget.querySelector("span").getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=s.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=s.x+s.width/2,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"headerMouseleave",(e,n)=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"filterHelperMouseenter",(e,n="filter")=>{switch(n){case"filter":{this.tooltipStoreValue.html="Interact the tool to apply filters. For example, you can brush the       timeline to filter sentences by dates. Or you can click keywords to       choose sentences that include certain keywords.";break}case"keyword":{this.tooltipStoreValue.html="Most representative keywords in this set, sorted by their          representativeness. A darker background means the word is          more representative.";break}case"embedding":{this.tooltipStoreValue.html="Position of each sample in the semantic embedding space.";break}case"chrf":{this.tooltipStoreValue.html="Distribution of ChrF scores from training samples. Higher score          suggests better translation quality.";break}case"familiarity":{this.tooltipStoreValue.html="Distribution of the familiarity scores from log samples. Higher          value indicates closer distance to the training distribution.";break}case"sourceid":{this.tooltipStoreValue.html="Distribution of the source apps of translation requests.";break}case"test":{this.tooltipStoreValue.html="Distribution of sentences that are also in other challenge sets.";break}}const r=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=r.y,this.tooltipStoreValue.left=r.x+r.width/2,this.tooltipStoreValue.maxWidth=260,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"filterHelperMouseleave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});this.component=e,this.myTableViewUpdated=n,this.challengeSets=i,this.challengeSetDataMap=r,this.tooltipStore=s,this.tooltipStoreValue=Mn(),this.challengeStore=o,this.challengeStoreValue=Ze(),this.subscribeStores();const a=U.select(this.component).select("tr:not(.hide) .cell-svg").node().getBoundingClientRect();this.svgSize={width:50,height:a.height},this.drawRowHistograms("chrf",!1),this.drawRowHistograms("familiarity",!1),this.drawRowRatio(),this.drawRowTrainCountBar(),this.drawRowLogCountBar()}}const $i=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 14 7" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-2264,-55)">
        <g transform="matrix(4.33918,0,0,3.4263,3972.51,-1878.31)">
            <g transform="matrix(0.230458,0,0,0.29186,-394.834,561.784)">
                <path d="M11.646,15.146L5.854,9.354C5.76,9.26 5.707,9.133 5.707,9C5.707,8.726 5.933,8.5 6.207,8.5L17.793,8.5C18.067,8.5 18.293,8.726 18.293,9C18.293,9.133 18.24,9.26 18.146,9.354L12.353,15.146C12.159,15.34 11.84,15.34 11.646,15.146Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,us=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 78" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-614,-249)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-search" transform="matrix(0.0292011,0,0,0.0553024,-897.818,566.082)">
                <path d="M8.789,-42.236C8.789,-25.098 22.705,-11.23 39.844,-11.23C46.436,-11.23 52.49,-13.281 57.52,-16.797L75.684,1.416C76.709,2.393 77.979,2.832 79.297,2.832C82.129,2.832 84.18,0.684 84.18,-2.148C84.18,-3.516 83.643,-4.736 82.813,-5.664L64.746,-23.779C68.604,-28.955 70.85,-35.303 70.85,-42.236C70.85,-59.375 56.982,-73.291 39.844,-73.291C22.705,-73.291 8.789,-59.375 8.789,-42.236ZM16.309,-42.236C16.309,-55.273 26.807,-65.772 39.844,-65.772C52.832,-65.772 63.379,-55.273 63.379,-42.236C63.379,-29.248 52.832,-18.701 39.844,-18.701C26.807,-18.701 16.309,-29.248 16.309,-42.236Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,Zi=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-312,-408)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-info" transform="matrix(0.0292011,0,0,0.0553024,-906.585,574.91)">
                <path d="M46.24,4.15C67.773,4.15 85.693,-13.721 85.693,-35.254C85.693,-56.787 67.725,-74.658 46.191,-74.658C24.707,-74.658 6.836,-56.787 6.836,-35.254C6.836,-13.721 24.756,4.15 46.24,4.15ZM46.24,-3.271C28.516,-3.271 14.355,-17.481 14.355,-35.254C14.355,-53.027 28.467,-67.236 46.191,-67.236C63.965,-67.236 78.223,-53.027 78.223,-35.254C78.223,-17.481 64.014,-3.271 46.24,-3.271Z" style="fill-rule:nonzero;"/>
                <path d="M39.648,-13.623L55.176,-13.623C56.934,-13.623 58.35,-14.893 58.35,-16.699C58.35,-18.408 56.934,-19.727 55.176,-19.727L50.879,-19.727L50.879,-37.988C50.879,-40.381 49.707,-41.895 47.51,-41.895L40.381,-41.895C38.623,-41.895 37.256,-40.576 37.256,-38.916C37.256,-37.109 38.623,-35.84 40.381,-35.84L43.945,-35.84L43.945,-19.727L39.648,-19.727C37.891,-19.727 36.475,-18.408 36.475,-16.699C36.475,-14.893 37.891,-13.623 39.648,-13.623ZM45.85,-47.9C48.926,-47.9 51.318,-50.342 51.318,-53.418C51.318,-56.494 48.926,-58.887 45.85,-58.887C42.822,-58.887 40.381,-56.494 40.381,-53.418C40.381,-50.342 42.822,-47.9 45.85,-47.9Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{Map:L5,console:A5}=Lc,X="src/components/table-view/TableView.svelte";function cr(t,e,n){const i=t.slice();return i[38]=e[n],i}function rc(t,e,n){const i=t.slice();return i[41]=e[n],i}function sc(t,e,n){const i=t.slice();return i[44]=e[n],i[45]=e,i[46]=n,i}function oc(t,e,n){const i=t.slice();return i[47]=e[n],i[49]=n,i}function ah(t){let e,n,i,r,s,o;const a={c:function(){e=D("div"),n=D("span"),i=H(),r=D("input"),x(n,"class","svg-icon s-qQkOs9mUrBkr"),T(n,X,819,18,21683),x(r,"class","search-bar-input s-qQkOs9mUrBkr"),x(r,"type","text"),x(r,"id","input-search"),x(r,"placeholder","Search..."),T(r,X,820,18,21750),x(e,"class","search-bar s-qQkOs9mUrBkr"),T(e,X,818,16,21640)},m:function(c,u){et(c,e,u),S(e,n),n.innerHTML=us,S(e,i),S(e,r),s||(o=yt(r,"input",t[20],!1,!1,!1,!1),s=!0)},p:Tt,d:function(c){c&&nt(e),s=!1,o()}};return it("SvelteRegisterBlock",{block:a,id:ah.name,type:"if",source:"(818:14) {#if i === 0}",ctx:t}),a}function mo(t){let e,n,i,r=t[47].displayName+"",s,o,a,l,c,u,f,h,d,g;function b(){return t[17](t[47])}function v(){return t[18](t[47])}function y(){return t[19](t[47])}let w=t[49]===0&&ah(t);function m(...M){return t[21](t[47],...M)}function p(...M){return t[22](t[47],...M)}const _={c:function(){e=D("th"),n=D("div"),i=D("span"),s=Ct(r),o=H(),a=D("div"),l=D("div"),c=H(),u=D("div"),f=H(),w&&w.c(),h=H(),T(i,X,793,14,20721),x(l,"class","svg-icon icon-sort-up s-qQkOs9mUrBkr"),T(l,X,803,16,21158),x(u,"class","svg-icon icon-sort-down s-qQkOs9mUrBkr"),T(u,X,809,16,21372),x(a,"class","sort-icons s-qQkOs9mUrBkr"),lt(a,"active-up",t[4].key===t[47].key&&t[4].direction==="up"),lt(a,"active-down",t[4].key===t[47].key&&t[4].direction==="down"),T(a,X,796,14,20840),x(n,"class","header-cell-content s-qQkOs9mUrBkr"),T(n,X,788,12,20494),x(e,"colspan",t[49]===0?"":"2"),x(e,"class","header-cell s-qQkOs9mUrBkr"),T(e,X,787,10,20428)},m:function(C,N){et(C,e,N),S(e,n),S(n,i),S(i,s),S(n,o),S(n,a),S(a,l),l.innerHTML=$i,S(a,c),S(a,u),u.innerHTML=$i,S(n,f),w&&w.m(n,null),S(e,h),d||(g=[yt(i,"click",b,!1,!1,!1,!1),yt(l,"click",v,!1,!1,!1,!1),yt(u,"click",y,!1,!1,!1,!1),yt(n,"mouseenter",m,!1,!1,!1,!1),yt(n,"mouseleave",p,!1,!1,!1,!1)],d=!0)},p:function(C,N){t=C,N[0]&128&&r!==(r=t[47].displayName+"")&&Ut(s,r),N[0]&144&&lt(a,"active-up",t[4].key===t[47].key&&t[4].direction==="up"),N[0]&144&&lt(a,"active-down",t[4].key===t[47].key&&t[4].direction==="down"),t[49]===0&&w.p(t,N)},d:function(C){C&&nt(e),w&&w.d(),d=!1,Ht(g)}};return it("SvelteRegisterBlock",{block:_,id:mo.name,type:"each",source:"(787:8) {#each challengeMeta.headers as header, i}",ctx:t}),_}function yo(t){let e,n=t[3].selectedSetSentences;Et(n);let i=[];for(let s=0;s<n.length;s+=1)i[s]=bo(sc(t,n,s));const r={c:function(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gi()},m:function(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);et(o,e,a)},p:function(o,a){if(a[0]&8){n=o[3].selectedSetSentences,Et(n);let l;for(l=0;l<n.length;l+=1){const c=sc(o,n,l);i[l]?i[l].p(c,a):(i[l]=bo(c),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d:function(o){Ae(i,o),o&&nt(e)}};return it("SvelteRegisterBlock",{block:r,id:yo.name,type:"if",source:"(960:18) {#if myTableView !== null}",ctx:t}),r}function bo(t){let e,n,i=t[44].source+"",r,s,o,a=t[44].hyp+"",l,c,u,f;function h(){return t[24](t[44],t[45],t[46])}const d={c:function(){e=D("div"),n=D("div"),r=Ct(i),s=H(),o=D("div"),l=Ct(a),c=H(),x(n,"class","sentence-source"),T(n,X,967,24,26697),x(o,"class","sentence-hyp s-qQkOs9mUrBkr"),lt(o,"shown",t[44].showHyp),T(o,X,968,24,26774),x(e,"class","sentence-row s-qQkOs9mUrBkr"),T(e,X,961,22,26466)},m:function(b,v){et(b,e,v),S(e,n),S(n,r),S(e,s),S(e,o),S(o,l),S(e,c),u||(f=yt(e,"click",h,!1,!1,!1,!1),u=!0)},p:function(b,v){t=b,v[0]&8&&i!==(i=t[44].source+"")&&Ut(r,i),v[0]&8&&a!==(a=t[44].hyp+"")&&Ut(l,a),v[0]&8&&lt(o,"shown",t[44].showHyp)},d:function(b){b&&nt(e),u=!1,f()}};return it("SvelteRegisterBlock",{block:d,id:bo.name,type:"each",source:"(961:20) {#each myTableView.selectedSetSentences as sentence}",ctx:t}),d}function wo(t){let e,n,i=t[3].selectedSetKeywords;Et(i);let r=[];for(let o=0;o<i.length;o+=1)r[o]=vo(rc(t,i,o));const s={c:function(){for(let a=0;a<r.length;a+=1)r[a].c();e=H(),n=D("div"),x(n,"class","keyword phantom s-qQkOs9mUrBkr"),T(n,X,1018,22,28647)},m:function(a,l){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,l);et(a,e,l),et(a,n,l)},p:function(a,l){if(l[0]&520){i=a[3].selectedSetKeywords,Et(i);let c;for(c=0;c<i.length;c+=1){const u=rc(a,i,c);r[c]?r[c].p(u,l):(r[c]=vo(u),r[c].c(),r[c].m(e.parentNode,e))}for(;c<r.length;c+=1)r[c].d(1);r.length=i.length}},d:function(a){Ae(r,a),a&&nt(e),a&&nt(n)}};return it("SvelteRegisterBlock",{block:s,id:wo.name,type:"if",source:"(1007:20) {#if myTableView !== null}",ctx:t}),s}function vo(t){let e,n=t[41].word+"",i,r,s;const o={c:function(){e=D("div"),i=Ct(n),x(e,"class","keyword s-qQkOs9mUrBkr"),x(e,"style",r=`background-color: ${t[41].color};`),x(e,"title",s=`${t[41].word}, c-TF-IDF: ${t[9](t[41].value)}`),T(e,X,1008,24,28225)},m:function(l,c){et(l,e,c),S(e,i)},p:function(l,c){c[0]&8&&n!==(n=l[41].word+"")&&Ut(i,n),c[0]&8&&r!==(r=`background-color: ${l[41].color};`)&&x(e,"style",r),c[0]&8&&s!==(s=`${l[41].word}, c-TF-IDF: ${l[9](l[41].value)}`)&&x(e,"title",s)},d:function(l){l&&nt(e)}};return it("SvelteRegisterBlock",{block:o,id:vo.name,type:"each",source:"(1008:22) {#each myTableView.selectedSetKeywords as keyword}",ctx:t}),o}function _o(t,e){let n,i,r,s=e[38].displayName+"",o,a,l,c,u,f,h,d,g,b,v=e[38].logCount+"",y,w,m,p,_,M,C,N,B,z,A=(e[38].familiarity===void 0?"0.00":e[8](e[38].familiarity))+"",Y,I,k,V,O,q,G,K,W,Q=e[38].trainCount+"",J,gt,ut,st,dt,ct,R,F,$,L,P=(e[38].chrf===void 0?"N/A":e[8](e[38].chrf))+"",pt,ft,_t,St,Z,rt,Dt,zt,Je,tn,Bt=e[38].trainLogRatio===void 0?"0.00":`${Math.floor(e[38].trainLogRatio*100)}%`,ue,Be,se,Xt,oe,Qt,ne,he,ci,ae,Me,fe,ui,Zt,Vt,de,en,ge,xt,hi,pe,ie,me,kt,Ji,Ve,Jt;function Rt(){return e[23](e[38])}let Ot=e[3]!==null&&yo(e);function tr(){return e[27](e[38])}let It=e[3]!==null&&wo(e);const wt={key:t,first:null,c:function(){var ot,at;n=D("tr"),i=D("td"),r=D("div"),o=Ct(s),l=H(),c=D("td"),u=D("div"),f=re("svg"),d=H(),g=D("td"),b=D("div"),y=Ct(v),w=H(),m=D("td"),p=D("div"),_=re("svg"),C=H(),N=D("td"),B=D("div"),z=D("div"),Y=Ct(A),I=H(),k=D("td"),V=D("div"),O=re("svg"),G=H(),K=D("td"),W=D("div"),J=Ct(Q),gt=H(),ut=D("td"),st=D("div"),dt=re("svg"),R=H(),F=D("td"),$=D("div"),L=D("div"),pt=Ct(P),ft=H(),_t=D("td"),St=D("div"),Z=re("svg"),Dt=H(),zt=D("td"),Je=D("div"),tn=D("div"),ue=Ct(Bt),Be=H(),se=D("tr"),Xt=D("td"),oe=D("div"),Qt=D("div"),ne=D("div"),he=D("span"),he.textContent="Sample Sentences",ci=H(),ae=D("div"),Ot&&Ot.c(),Me=H(),fe=D("div"),ui=H(),Zt=D("div"),Vt=D("div"),de=D("div"),en=D("span"),en.textContent="Keywords",ge=H(),xt=D("span"),hi=H(),pe=D("div"),pe.textContent="Show Details",ie=H(),me=D("div"),kt=D("div"),It&&It.c(),Ji=H(),x(r,"class","cell cell-label s-qQkOs9mUrBkr"),x(r,"title",a=e[38].displayName),T(r,X,852,13,22804),x(i,"class","td-name s-qQkOs9mUrBkr"),T(i,X,851,10,22771),x(f,"class","cell-svg cell-svg-log-count s-qQkOs9mUrBkr"),x(f,"id",h=`cell-log-count-${e[38].fileName}`),T(f,X,859,14,23043),x(u,"class","cell cell-plot s-qQkOs9mUrBkr"),T(u,X,858,12,23e3),x(c,"class","td-log-count td-plot s-qQkOs9mUrBkr"),T(c,X,857,10,22954),x(b,"class","cell cell-label log s-qQkOs9mUrBkr"),T(b,X,866,12,23272),x(g,"class","td-log-count td-label s-qQkOs9mUrBkr"),T(g,X,865,10,23225),x(_,"class","cell-svg cell-svg-familiarity s-qQkOs9mUrBkr"),x(_,"id",M=`cell-familiarity-${e[38].fileName}`),T(_,X,873,14,23481),x(p,"class","cell cell-plot s-qQkOs9mUrBkr"),T(p,X,872,13,23438),x(m,"class","td-familiarity td-plot s-qQkOs9mUrBkr"),T(m,X,871,10,23390),T(z,X,881,14,23764),x(B,"class","cell cell-label log s-qQkOs9mUrBkr"),T(B,X,880,13,23716),x(N,"class","td-familiarity td-label s-qQkOs9mUrBkr"),T(N,X,879,10,23667),x(O,"class","cell-svg cell-svg-train-count s-qQkOs9mUrBkr"),x(O,"id",q=`cell-train-count-${e[38].fileName}`),T(O,X,891,14,24072),x(V,"class","cell cell-plot s-qQkOs9mUrBkr"),T(V,X,890,13,24029),x(k,"class","td-train-count td-plot s-qQkOs9mUrBkr"),T(k,X,889,10,23981),x(W,"class","cell cell-label train s-qQkOs9mUrBkr"),T(W,X,898,13,24307),x(K,"class","td-train-count td-label s-qQkOs9mUrBkr"),T(K,X,897,10,24258),x(dt,"class","cell-svg cell-svg-chrf s-qQkOs9mUrBkr"),x(dt,"id",ct=`cell-chrf-${e[38].fileName}`),T(dt,X,905,14,24513),x(st,"class","cell cell-plot s-qQkOs9mUrBkr"),T(st,X,904,12,24470),x(ut,"class","td-chrf td-plot s-qQkOs9mUrBkr"),T(ut,X,903,10,24429),T(L,X,913,14,24777),x($,"class","cell cell-label train s-qQkOs9mUrBkr"),T($,X,912,12,24727),x(F,"class","td-chrf td-label s-qQkOs9mUrBkr"),T(F,X,911,10,24685),x(Z,"class","cell-svg cell-svg-ratio s-qQkOs9mUrBkr"),x(Z,"id",rt=`cell-ratio-${e[38].fileName}`),T(Z,X,923,14,25064),x(St,"class","cell cell-plot s-qQkOs9mUrBkr"),T(St,X,922,12,25021),x(_t,"class","td-ratio td-plot s-qQkOs9mUrBkr"),T(_t,X,921,10,24979),T(tn,X,931,14,25325),x(Je,"class","cell cell-label s-qQkOs9mUrBkr"),T(Je,X,930,12,25281),x(zt,"class","td-ratio td-label s-qQkOs9mUrBkr"),T(zt,X,929,10,25238),x(n,"class","hoverrable s-qQkOs9mUrBkr"),lt(n,"selected",((ot=e[3])==null?void 0:ot.selectedSetName)===e[38].fileName),lt(n,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),T(n,X,837,8,22215),x(he,"class","name-label"),T(he,X,956,18,26210),x(ne,"class","name s-qQkOs9mUrBkr"),T(ne,X,955,16,26173),x(ae,"class","sentence-list s-qQkOs9mUrBkr"),T(ae,X,958,16,26298),x(Qt,"class","sentence-block s-qQkOs9mUrBkr"),T(Qt,X,954,14,26128),x(fe,"class","separator s-qQkOs9mUrBkr"),T(fe,X,980,14,27121),x(en,"class","name-label"),T(en,X,985,20,27287),x(xt,"class","svg-icon icon-info s-qQkOs9mUrBkr"),T(xt,X,986,20,27348),x(de,"class","name-left s-qQkOs9mUrBkr"),T(de,X,984,18,27243),x(pe,"class","detail-button s-qQkOs9mUrBkr"),T(pe,X,996,18,27738),x(Vt,"class","name s-qQkOs9mUrBkr"),T(Vt,X,983,16,27206),x(kt,"class","keyword-wrapper s-qQkOs9mUrBkr"),T(kt,X,1005,18,28051),x(me,"class","keyword-grid s-qQkOs9mUrBkr"),T(me,X,1004,16,28006),x(Zt,"class","keyword-block s-qQkOs9mUrBkr"),T(Zt,X,982,14,27162),x(oe,"class","detail-content s-qQkOs9mUrBkr"),T(oe,X,953,12,26085),x(Xt,"colspan","11"),x(Xt,"class","s-qQkOs9mUrBkr"),lt(Xt,"hidden",((at=e[3])==null?void 0:at.selectedSetName)!==e[38].fileName),T(Xt,X,948,10,25936),x(se,"class","detail-row s-qQkOs9mUrBkr"),lt(se,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),T(se,X,939,8,25566),this.first=n},m:function(ot,at){et(ot,n,at),S(n,i),S(i,r),S(r,o),S(n,l),S(n,c),S(c,u),S(u,f),S(n,d),S(n,g),S(g,b),S(b,y),S(n,w),S(n,m),S(m,p),S(p,_),S(n,C),S(n,N),S(N,B),S(B,z),S(z,Y),S(n,I),S(n,k),S(k,V),S(V,O),S(n,G),S(n,K),S(K,W),S(W,J),S(n,gt),S(n,ut),S(ut,st),S(st,dt),S(n,R),S(n,F),S(F,$),S($,L),S(L,pt),S(n,ft),S(n,_t),S(_t,St),S(St,Z),S(n,Dt),S(n,zt),S(zt,Je),S(Je,tn),S(tn,ue),et(ot,Be,at),et(ot,se,at),S(se,Xt),S(Xt,oe),S(oe,Qt),S(Qt,ne),S(ne,he),S(Qt,ci),S(Qt,ae),Ot&&Ot.m(ae,null),S(oe,Me),S(oe,fe),S(oe,ui),S(oe,Zt),S(Zt,Vt),S(Vt,de),S(de,en),S(de,ge),S(de,xt),xt.innerHTML=Zi,S(Vt,hi),S(Vt,pe),S(Zt,ie),S(Zt,me),S(me,kt),It&&It.m(kt,null),S(se,Ji),Ve||(Jt=[yt(n,"click",Rt,!1,!1,!1,!1),yt(xt,"mouseenter",e[25],!1,!1,!1,!1),yt(xt,"mouseleave",e[26],!1,!1,!1,!1),yt(pe,"click",tr,!1,!1,!1,!1)],Ve=!0)},p:function(ot,at){var nn,fi;e=ot,at[0]&128&&s!==(s=e[38].displayName+"")&&Ut(o,s),at[0]&128&&a!==(a=e[38].displayName)&&x(r,"title",a),at[0]&128&&h!==(h=`cell-log-count-${e[38].fileName}`)&&x(f,"id",h),at[0]&128&&v!==(v=e[38].logCount+"")&&Ut(y,v),at[0]&128&&M!==(M=`cell-familiarity-${e[38].fileName}`)&&x(_,"id",M),at[0]&128&&A!==(A=(e[38].familiarity===void 0?"0.00":e[8](e[38].familiarity))+"")&&Ut(Y,A),at[0]&128&&q!==(q=`cell-train-count-${e[38].fileName}`)&&x(O,"id",q),at[0]&128&&Q!==(Q=e[38].trainCount+"")&&Ut(J,Q),at[0]&128&&ct!==(ct=`cell-chrf-${e[38].fileName}`)&&x(dt,"id",ct),at[0]&128&&P!==(P=(e[38].chrf===void 0?"N/A":e[8](e[38].chrf))+"")&&Ut(pt,P),at[0]&128&&rt!==(rt=`cell-ratio-${e[38].fileName}`)&&x(Z,"id",rt),at[0]&128&&Bt!==(Bt=e[38].trainLogRatio===void 0?"0.00":`${Math.floor(e[38].trainLogRatio*100)}%`)&&Ut(ue,Bt),at[0]&136&&lt(n,"selected",((nn=e[3])==null?void 0:nn.selectedSetName)===e[38].fileName),at[0]&164&&lt(n,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName)),e[3]!==null?Ot?Ot.p(e,at):(Ot=yo(e),Ot.c(),Ot.m(ae,null)):Ot&&(Ot.d(1),Ot=null),e[3]!==null?It?It.p(e,at):(It=wo(e),It.c(),It.m(kt,null)):It&&(It.d(1),It=null),at[0]&136&&lt(Xt,"hidden",((fi=e[3])==null?void 0:fi.selectedSetName)!==e[38].fileName),at[0]&164&&lt(se,"hide",e[2].selectedTypes.size>0&&!e[2].selectedTypes.has(e[38].type==="topic"?"topic":"test")||e[5].size>0&&!e[5].has(e[38].fileName))},d:function(ot){ot&&nt(n),ot&&nt(Be),ot&&nt(se),Ot&&Ot.d(),It&&It.d(),Ve=!1,Ht(Jt)}};return it("SvelteRegisterBlock",{block:wt,id:_o.name,type:"each",source:"(837:6) {#each challengeMeta.challengeSets as challengeSet (challengeSet.fileName)}",ctx:e}),wt}function So(t){let e,n,i,r;const s={c:function(){e=D("div"),n=D("span"),n.textContent="Loading",i=H(),r=D("span"),x(n,"class","loader-label s-qQkOs9mUrBkr"),T(n,X,1032,6,28927),x(r,"class","loader s-qQkOs9mUrBkr"),T(r,X,1033,6,28975),x(e,"class","loading-placeholder s-qQkOs9mUrBkr"),T(e,X,1031,4,28887)},m:function(a,l){et(a,e,l),S(e,n),S(e,i),S(e,r)},d:function(a){a&&nt(e)}};return it("SvelteRegisterBlock",{block:s,id:So.name,type:"if",source:"(1031:2) {#if !initialized}",ctx:t}),s}function ko(t){let e,n;const i={c:function(){e=D("div"),n=D("span"),n.textContent="No challenge set found",x(n,"class","loader-label s-qQkOs9mUrBkr"),T(n,X,1045,6,29282),x(e,"class","empty-placeholder s-qQkOs9mUrBkr"),T(e,X,1044,4,29244)},m:function(s,o){et(s,e,o),S(e,n)},d:function(s){s&&nt(e)}};return it("SvelteRegisterBlock",{block:i,id:ko.name,type:"if",source:"(1044:2) {#if noSearchResults}",ctx:t}),i}function xo(t){let e,n,i,r,s,o,a=[],l=new L5,c,u,f=t[7].headers;Et(f);let h=[];for(let w=0;w<f.length;w+=1)h[w]=mo(oc(t,f,w));let d=t[7].challengeSets;Et(d);const g=w=>w[38].fileName;Ba(t,d,cr,g);for(let w=0;w<d.length;w+=1){let m=cr(t,d,w),p=g(m);l.set(p,a[w]=_o(p,m))}let b=!t[1]&&So(t),v=t[6]&&ko(t);const y={c:function(){e=D("div"),n=D("table"),i=D("thead"),r=D("tr");for(let m=0;m<h.length;m+=1)h[m].c();s=H(),o=D("tbody");for(let m=0;m<a.length;m+=1)a[m].c();c=H(),b&&b.c(),u=H(),v&&v.c(),x(r,"class","s-qQkOs9mUrBkr"),T(r,X,785,6,20362),x(i,"class","s-qQkOs9mUrBkr"),T(i,X,784,4,20348),T(o,X,835,4,22117),x(n,"class","table s-qQkOs9mUrBkr"),T(n,X,783,2,20322),x(e,"class","table-view-wrapper s-qQkOs9mUrBkr"),T(e,X,782,0,20265)},l:function(m){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(m,p){et(m,e,p),S(e,n),S(n,i),S(i,r);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(r,null);S(n,s),S(n,o);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(o,null);S(e,c),b&&b.m(e,null),S(e,u),v&&v.m(e,null),t[28](e)},p:function(m,p){if(p[0]&7320){f=m[7].headers,Et(f);let _;for(_=0;_<f.length;_+=1){const M=oc(m,f,_);h[_]?h[_].p(M,p):(h[_]=mo(M),h[_].c(),h[_].m(r,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=f.length}p[0]&940&&(d=m[7].challengeSets,Et(d),Ba(m,d,cr,g),a=Zh(a,p,g,1,m,d,l,o,Qh,_o,null,cr)),m[1]?b&&(b.d(1),b=null):b||(b=So(m),b.c(),b.m(e,u)),m[6]?v||(v=ko(m),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:Tt,o:Tt,d:function(m){m&&nt(e),Ae(h,m);for(let p=0;p<a.length;p+=1)a[p].d();b&&b.d(),v&&v.d(),t[28](null)}};return it("SvelteRegisterBlock",{block:y,id:xo.name,type:"component",source:"",ctx:t}),y}function P5(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("TableView",i,[]);let{tooltipStore:s=null}=e,{challengeStore:o=null}=e,a=Ze(),l=!1,c=!1,u=null,f=!1,h=null;const d=new Map;let g={key:mt.logCount,direction:"down"};const b=U.format(".2f"),v=U.format(".4f"),y=U.format(",%");let w=new Set([]),m=!1,p=null;const _=[{displayName:"Challenge Set",key:mt.displayName},{displayName:"Log Count",key:mt.logCount},{displayName:"Familiarity",key:mt.familiarity},{displayName:"Train Count",key:mt.trainCount},{displayName:"ChrF",key:mt.chrf},{displayName:"Train Ratio",key:mt.trainLogRatio}];let M={headers:_,challengeSets:[]};const C=()=>{n(3,h)},N=()=>{n(7,M)},B=async()=>{console.time("Reading challenge sets"),p=await caches.open("cache");const R=await U.json("/data/challenge-sets.json");if(R===void 0){console.error("Cannot load table meta data.");return}for(const F of R.challengeSets)try{let $;const L=`/data/challenge-set/${F.fileName}.json`,P=await p.match(L);if(P)$=await P.json();else{await p.add(L);const rt=await p.match(L);$=await(rt==null?void 0:rt.json())}F.count=$.source.length,F.trainCount=$.train.reduce((rt,Dt)=>rt+Dt),F.logCount=F.count-F.trainCount;const pt=$.train.reduce((rt,Dt)=>rt+Dt);F.trainLogRatio=pt/F.count;const ft=$.chrf.reduce((rt,Dt)=>(rt===null?0:rt)+(Dt===null?0:Dt)),_t=$.chrf.filter(rt=>rt!==null).length;_t===0?F.chrf=void 0:F.chrf=ft/_t;const St=$.familiarity.reduce((rt,Dt)=>(rt===null?0:rt)+(Dt===null?0:Dt)),Z=$.familiarity.filter(rt=>rt!==null).length;F.familiarity=St/Z,M.challengeSets.push(F),d.set(F.fileName,$)}catch($){console.error($)}console.timeEnd("Reading challenge sets"),z(M.challengeSets,g.key,g.direction),N(),n(16,c=!0)},z=(R,F,$)=>{switch(F){case mt.displayName:{R.sort((L,P)=>$==="up"?L.displayName.localeCompare(P.displayName):-L.displayName.localeCompare(P.displayName));break}case mt.trainCount:{R.sort((L,P)=>$==="up"?L.trainCount-P.trainCount:P.trainCount-L.trainCount);break}case mt.logCount:{R.sort((L,P)=>$==="up"?L.logCount-P.logCount:P.logCount-L.logCount);break}case mt.chrf:{R.sort((L,P)=>$==="up"?(L.chrf?L.chrf:0)-(P.chrf?P.chrf:0):(P.chrf?P.chrf:0)-(L.chrf?L.chrf:0));break}case mt.familiarity:{R.sort((L,P)=>$==="up"?(L.familiarity?L.familiarity:0)-(P.familiarity?P.familiarity:0):(P.familiarity?P.familiarity:0)-(L.familiarity?L.familiarity:0));break}case mt.trainLogRatio:R.sort((L,P)=>$==="up"?(L.trainLogRatio?L.trainLogRatio:0)-(P.trainLogRatio?P.trainLogRatio:0):(P.trainLogRatio?P.trainLogRatio:0)-(L.trainLogRatio?L.trainLogRatio:0))}},A=(R,F)=>{n(4,g.key=F.key,g),n(4,g.direction=R,g),n(4,g),z(M.challengeSets,g.key,g.direction),N()},Y=R=>{g.key===R.key?g.direction==="up"?n(4,g.direction="down",g):n(4,g.direction="up",g):(n(4,g.key=R.key,g),n(4,g.direction="up",g)),n(4,g),z(M.challengeSets,g.key,g.direction),N()},I=R=>{let F;n(6,m=!1),R!==null?F=U.select(R.target).property("value"):F="",w.clear();let $=!0;for(const L of M.challengeSets)L.fileName.toLowerCase().includes(F.toLowerCase())&&(w.add(L.fileName),$=!1);F!==""&&$&&(w.add("\u25A0"),n(6,m=!0)),n(5,w)};ln(async()=>{await B(),n(15,l=!0)});const k=()=>{l&&u&&s&&o&&c&&(o.subscribe(R=>{n(2,a=R)}),n(1,f=!0),n(3,h=new ic({component:u,myTableViewUpdated:C,challengeSets:M.challengeSets,challengeSetDataMap:d,tooltipStore:s,challengeStore:o})))},V=["tooltipStore","challengeStore"];Object.keys(e).forEach(R=>{!~V.indexOf(R)&&R.slice(0,2)!=="$$"&&R!=="slot"&&A5.warn(`<TableView> was created with unknown prop '${R}'`)});const O=R=>Y(R),q=R=>A("up",R),G=R=>A("down",R),K=R=>I(R),W=(R,F)=>h==null?void 0:h.headerMouseenter(F,R),Q=(R,F)=>h==null?void 0:h.headerMouseleave(F,R),J=R=>{h==null||h.rowClicked(R)},gt=(R,F,$)=>{n(3,F[$].showHyp=!R.showHyp,h)},ut=R=>h==null?void 0:h.filterHelperMouseenter(R,"keyword"),st=R=>h==null?void 0:h.filterHelperMouseleave(R),dt=R=>h==null?void 0:h.showDetailClicked(R);function ct(R){cn[R?"unshift":"push"](()=>{u=R,n(0,u)})}return t.$$set=R=>{"tooltipStore"in R&&n(13,s=R.tooltipStore),"challengeStore"in R&&n(14,o=R.challengeStore)},t.$capture_state=()=>({onMount:ln,d3:U,TableView:ic,HeaderKey:mt,getChallengeStoreDefaultValue:Ze,iconTriangle:$i,iconSearch:us,iconInfo:Zi,tooltipStore:s,challengeStore:o,challengeStoreValue:a,mounted:l,challengeMetaInitialized:c,component:u,initialized:f,myTableView:h,challengeSetDataMap:d,curSortHeader:g,chrfFormatter:b,ctfidfFormatter:v,percentFormatter:y,challengeSearchResults:w,noSearchResults:m,cache:p,headers:_,challengeMeta:M,myTableViewUpdated:C,updateChallengeMeta:N,initTableData:B,sortChallengeSetsInPlace:z,sortIconClicked:A,headerClicked:Y,searchKeyChanged:I,initView:k}),t.$inject_state=R=>{"tooltipStore"in R&&n(13,s=R.tooltipStore),"challengeStore"in R&&n(14,o=R.challengeStore),"challengeStoreValue"in R&&n(2,a=R.challengeStoreValue),"mounted"in R&&n(15,l=R.mounted),"challengeMetaInitialized"in R&&n(16,c=R.challengeMetaInitialized),"component"in R&&n(0,u=R.component),"initialized"in R&&n(1,f=R.initialized),"myTableView"in R&&n(3,h=R.myTableView),"curSortHeader"in R&&n(4,g=R.curSortHeader),"challengeSearchResults"in R&&n(5,w=R.challengeSearchResults),"noSearchResults"in R&&n(6,m=R.noSearchResults),"cache"in R&&(p=R.cache),"challengeMeta"in R&&n(7,M=R.challengeMeta)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty[0]&122883&&l&&!f&&u&&s&&o&&c&&k()},[u,f,a,h,g,w,m,M,b,v,A,Y,I,s,o,l,c,O,q,G,K,W,Q,J,gt,ut,st,dt,ct]}class lh extends ri{constructor(e){super(e),ni(this,e,P5,xo,Cn,{tooltipStore:13,challengeStore:14},null,[-1,-1]),it("SvelteRegisterComponent",{component:this,tagName:"TableView_1",options:e,id:xo.name})}get tooltipStore(){throw new Error("<TableView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tooltipStore(e){throw new Error("<TableView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengeStore(){throw new Error("<TableView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengeStore(e){throw new Error("<TableView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class z5{constructor({component:e,tooltipStore:n,timelineStore:i,padding:r,dateCount:s}){E(this,"component");E(this,"svg");E(this,"brush",null);E(this,"dateCount");E(this,"padding");E(this,"xAxisHeight",15);E(this,"width");E(this,"height");E(this,"bandwidth",0);E(this,"transformK",1);E(this,"xScale",null);E(this,"orgXScale",null);E(this,"xScaleBand",null);E(this,"yScale",null);E(this,"xAxis",null);E(this,"brushSelection",null);E(this,"tooltipStore");E(this,"tooltipStoreValue");E(this,"timelineStore");E(this,"timelineStoreValue");E(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e})});E(this,"initDensityPlot",async()=>{let e;if(this.dateCount)e=this.dateCount;else{const f=await U.json("/data/daily-count-202203.json");if(f===void 0){console.error("Cannot load density data.");return}e=f.map(h=>{const d=/(\d{4})(\d{2})(\d{2})/;return{date:new Date(String(h[0]).replace(d,"$1-$2-$3")),count:h[1]}}).sort((h,d)=>h.date<d.date?-1:1)}const n=this.svg.select("g.content"),i=U.extent(e,f=>f.date);i[0]=new Date(new Date(i[0].valueOf()).setDate(i[0].getDate()-1)),i[1]=new Date(new Date(i[1].valueOf()).setDate(i[1].getDate()+1));const r=n.append("g").attr("class","density-group");this.xScale=U.scaleUtc().domain(i).range([0,this.width]),this.orgXScale=U.scaleUtc().domain(i).range([0,this.width]);const s=[];for(let f=i[0];f<=i[1];f.setDate(f.getDate()+1))s.push(f.toDateString());this.xScaleBand=U.scaleBand().domain(s).range([0,this.width]).padding(.3),this.yScale=U.scaleLinear().domain([0,U.max(e,f=>f.count)]).range([this.height-this.xAxisHeight,0]),this.bandwidth=this.xScaleBand.bandwidth(),r.selectAll("rect.density-bar").data(e).join("rect").attr("class","density-bar").attr("x",f=>this.xScale(f.date)-this.bandwidth/2).attr("y",f=>this.yScale(f.count)).attr("width",this.bandwidth).attr("height",f=>this.height-this.xAxisHeight-this.yScale(f.count)),r.clone(!0).lower().attr("class","density-group-clone").selectAll("rect.density-bar").data(e),this.xAxis=U.axisBottom(this.xScale);const o=n.append("g").attr("class","x-axis-group").attr("transform",`translate(0, ${this.height-this.xAxisHeight})`).style("cursor","inherent").call(this.xAxis),l=o.select("path.domain").node().getBoundingClientRect();o.selectAll("g.tick").each((f,h,d)=>{const g=d[h],b=g.getBoundingClientRect();b.x<l.x&&g.remove(),b.x+b.width>l.x+l.width&&g.remove()});const c=U.zoom().scaleExtent([1,4]).translateExtent([[0,0],[this.width,this.height]]).extent([[0,0],[this.width,this.height]]).on("zoom",this.zoomed);this.svg.call(c),this.svg.on("dblclick.zoom",null),this.svg.on("dblclick",()=>{this.svg.transition("reset").duration(750).ease(U.easeCubicInOut).call(f=>c.transform(f,U.zoomIdentity)),this.removeOutOfBoundAxisLabels(o)}),this.svg.style("cursor","default"),this.brush=U.brushX().extent([[this.padding.left,0],[this.width+this.padding.left,this.height-this.xAxisHeight+this.padding.top-1]]).on("brush",this.brushed).on("end",this.brushEnd);const u=this.svg.append("g").attr("class","timeline-brush-group").call(this.brush);u.on("mousemove",f=>{const h=u.node().getBoundingClientRect(),d=f.clientX-h.x,g=U.utcFormat("%B %d (%a), %Y"),b=U.format(".2f");this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",v=>{const y=this.xScale(v.date);let w=!1;return d-this.xScaleBand.bandwidth()*this.transformK/2<y&&d+this.xScaleBand.bandwidth()*this.transformK/2>y?w=!0:w=!1,w&&(this.dateCount?this.tooltipStoreValue.html=`<div class="tb"><span class="date">              ${g(v.date)}</span>              <span class="count">${v.count}               requests</span>              </div>
            `:this.tooltipStoreValue.html=`<div class="tb"><span class="date">              ${g(v.date)}</span>              <span class="count">${b(v.count*100/1e6)}M               requests</span>              </div>
            `,this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=h.y,this.tooltipStoreValue.left=y+h.x,this.tooltipStore.set(this.tooltipStoreValue)),w})}),u.on("mouseleave",()=>{this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)}),u.on("mousedown",f=>{f.stopPropagation()})});E(this,"updateDateCount",e=>{const i=this.svg.select("g.content").select("g.density-group"),r=U.transition("update").duration(200);i.selectAll("rect.density-bar").data(e).attr("x",s=>this.xScale(s.date)-this.bandwidth/2).attr("width",this.bandwidth).transition(r).attr("y",s=>this.yScale(s.count)).attr("height",s=>this.height-this.xAxisHeight-this.yScale(s.count))});E(this,"zoomed",e=>{const n=e.transform,i=this.svg.select("g.content"),r=i.select(".x-axis-group");this.transformK=n.k,this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),this.xScale=n.rescaleX(this.orgXScale),this.xAxis.scale(this.xScale),r.call(this.xAxis),this.bandwidth=this.xScaleBand.bandwidth()*n.k,i.select(".density-group").selectAll("rect.density-bar").attr("x",a=>this.xScale(a.date)-this.bandwidth/2).attr("width",this.bandwidth),i.select(".density-group-clone").selectAll("rect.density-bar").attr("x",a=>this.xScale(a.date)-this.bandwidth/2).attr("width",this.bandwidth),this.removeOutOfBoundAxisLabels(r),n.k>1?this.svg.style("cursor","move"):this.svg.style("cursor","default"),this.brushSelection!==null&&this.brushSelectionChanged()});E(this,"brushSelectionChanged",()=>{const e=[];this.brushSelection!==null&&this.svg.select(".density-group").selectAll("rect.density-bar").classed("selected",r=>{const s=this.xScale(r.date);return s>=this.brushSelection[0]&&s<this.brushSelection[1]?(e.push(r.date),!0):!1});const n=U.utcFormat("%Y%m%d"),i=e.map(n);O5(new Set(i),new Set(this.timelineStoreValue.selectedDates))||(this.timelineStoreValue.selectedDates=i,this.timelineStore.set(this.timelineStoreValue))});E(this,"brushed",e=>{e.selection!==null&&(this.brushSelection=e.selection.map(n=>n-this.padding.left),this.svg.select(".density-group").selectAll("rect.density-bar").classed("mouseover",!1),this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),this.brushSelectionChanged())});E(this,"brushEnd",e=>{e.selection===null&&(this.svg.select(".density-group").selectAll("rect.density-bar").classed("selected",!1),this.brushSelection=null,this.brushSelectionChanged())});E(this,"brushClear",()=>{this.brush&&this.svg.select("g.timeline-brush-group").call(e=>{this.brush.move(e,null)})});E(this,"removeOutOfBoundAxisLabels",e=>{const i=e.select("path.domain").node().getBoundingClientRect();e.selectAll("g.tick").each((r,s,o)=>{const a=o[s],l=a.getBoundingClientRect();l.x<i.x&&a.remove(),l.x+l.width>i.x+i.width&&a.remove()})});this.component=e,s?this.dateCount=s:this.dateCount=null,this.svg=U.select(this.component).select("svg.timeline-svg"),this.svg.attr("width","100%").attr("height","100%").attr("viewbox","0 0 600 60").attr("preserveAspectRatio","none"),r?this.padding=r:this.padding={top:20,bottom:7,left:10,right:10};const o=this.svg.node().getBoundingClientRect();this.width=o.width-this.padding.left-this.padding.right,this.height=o.height-this.padding.top-this.padding.bottom,this.tooltipStore=n,this.tooltipStoreValue=Mn(),this.timelineStore=i,this.timelineStoreValue=cs(),this.subscribeStores(),this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),this.initDensityPlot()}}const O5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;for(const n of e)if(!t.has(n))return!1;return!0},ch=16,gn=new Map;gn.set(tt.Keyword,"Keywords");gn.set(tt.Chrf,"ChrF");gn.set(tt.SourceID,"Input Source");gn.set(tt.Embedding,"Embeddings");gn.set(tt.Familiarity,"Familiarities");gn.set(tt.UnitTest,"Unit Tests");let Mo=null,Hr=null,Fs=0,Co=null,$r=null,qs=0;function I5(t){Co=t;const e={top:65,left:10,right:10,bottom:10},n=20,i=35,r=this.focusSVGs[t].select(".content"),s=19,o=Array(s).fill(0).map((p,_)=>(_+1)*(1/(s+1))),a=!this.focusScales.has("familiarity");if(a){r.append("g").attr("class","bar-group");const p=this.challengeData.familiarity.filter(A=>A!==null),M=U.bin().domain([0,1]).thresholds(o)(p),C=M.map(A=>A.length);M[0].x0!==0&&(M[0].x0=0);const N=U.scaleLinear().domain([0,1]).range([i,this.focusSize.width-e.left-e.right]),B=U.scaleLinear().domain([Math.max(...C),0]).range([e.top,this.focusSize.height-n]),z=r.append("g").attr("class","axis-group");z.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-n})`).call(U.axisBottom(N)),z.append("g").attr("class","y-axis").attr("transform",`translate(${i}, ${0})`).call(U.axisLeft(B)),r.append("text").attr("transform",`translate(${i+(this.focusSize.width-e.left-e.right-i)/2}, ${ch})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("Sample Familiarity Distribution").append("tspan").attr("class","tspan-log").style("font-size","0.92em").attr("dominant-baseline","middle").attr("dy","1.1em").attr("x",0).text(`(${p.length} usage log samples)`),qs=p.length,this.focusScales.set("familiarity",[N,B])}const l=this.focusScales.get("familiarity"),c=l[0],u=l[1],f=r.select("g.bar-group"),h=new Set(this.filteredIndexes),d=this.challengeData.familiarity.filter((p,_)=>h.has(_)).filter(p=>p!==null),b=U.bin().domain([0,1]).thresholds(o)(d),v=this.focusSize.height-n,y=c(o[1])-c(o[0]);b[0].x0!==0&&(b[0].x0=0);const w=U.transition("update-familiarity-focus").duration(200);f.selectAll("g.familiarity-bar").data(b).join(p=>{const _=p.append("g").attr("class","familiarity-bar").attr("transform",M=>`translate(${c(M.x0)}, ${u(M.length)})`);return _.append("rect").attr("class","familiarity-rect").attr("width",y).attr("height",M=>v-u(M.length)),_.append("text").attr("class","bar-label is-left is-log").attr("x",y/2).attr("y",-3).style("text-anchor","middle").style("opacity",M=>M.length===0?0:1).text(M=>M.length),_},p=>(p.transition(w).attr("transform",_=>`translate(${c(_.x0)}, ${u(_.length)})`),p.select("rect").transition(w).attr("height",_=>v-u(_.length)),p.select("text").style("opacity",_=>_.length===0?0:1).text(_=>_.length),p),p=>p.remove());let m="";if(d.length===qs?m=`(${d.length} log samples)`:m=`(${d.length} out of ${qs} log samples)`,r.select(".tspan-log").text(m),a){f.clone(!0).lower().attr("class","bar-group-clone");let p=[];const _=C=>{if(C.selection===null)return;const N=[p[0],p[1]];if(p=C.selection.map(B=>{const z=c.invert(B),A=1/(s+1);return Math.floor(Math.floor(z*100)/(A*100))*A}),p[0]!==N[0]||p[1]!==N[1]){this.filters.familiarity=[];for(const[B,z]of this.challengeData.familiarity.entries())z!==null&&z>=p[0]&&z<=p[1]&&this.filters.familiarity.push(B);this.syncFilters()}},M=C=>{C.selection===null&&(this.filters.familiarity=[],this.syncFilters())};$r=U.brushX().extent([[this.focusPadding.left+i,this.focusPadding.top+e.top-1],[this.focusSize.width-e.right-4,this.focusPadding.top+this.focusSize.height-n-1]]).on("brush",_).on("end",M),this.focusSVGs[t].append("g").attr("class","familiarity-brush-group").call($r)}}function U5(){Co&&$r&&this.focusSVGs[Co].select("g.familiarity-brush-group").call(t=>$r.move(t,null))}function B5(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n=19,i=Array(n).fill(0).map((w,m)=>(m+1)*(1/(n+1))),r=U.bin().domain([0,1]).thresholds(i),s={top:5,left:5,right:0,bottom:5},o=5,a=5,l=!this.thumbnailScales.has("familiarity");if(l){this.thumbnailLabels[t].text(gn.get(tt.Familiarity)),e.append("g").attr("class","bar-group");const w=this.challengeData.familiarity.filter(N=>N!==null),p=r(w).map(N=>N.length),_=U.scaleLinear().domain([0,1]).range([a,this.thumbnailSize.width-s.left-s.right]),M=U.scaleLinear().domain([Math.max(...p),0]).range([s.top,this.thumbnailSize.height-o]),C=e.append("g").attr("class","axis-group").style("opacity",.6);C.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-o})`).call(U.axisBottom(_).tickValues([])),C.append("g").attr("class","y-axis").attr("transform",`translate(${a}, ${0})`).call(U.axisLeft(M).tickValues([])),this.thumbnailScales.set("familiarity",[_,M])}const c=e.select("g.bar-group"),u=this.thumbnailScales.get("familiarity"),f=u[0],h=u[1],d=new Set(this.filteredIndexes),g=this.challengeData.familiarity.filter((w,m)=>d.has(m)).filter(w=>w!==null),b=r(g),v=this.thumbnailSize.height-o,y=f(i[1])-f(i[0]);b[0].x0!==0&&(b[0].x0=0),c.selectAll("g.familiarity-bar").data(b).join(w=>{const m=w.append("g").attr("class","familiarity-bar").attr("transform",p=>`translate(${f(p.x0)}, ${h(p.length)})`);return m.append("rect").attr("class","familiarity-rect").attr("width",y).attr("height",p=>v-h(p.length)),m},w=>(w.transition("update-familiarity-thumbnail").duration(200).attr("transform",m=>`translate(${f(m.x0)}, ${h(m.length)})`),w.select("rect").transition("update-familiarity-thumbnail").duration(200).attr("height",m=>v-h(m.length)),w),w=>w.remove()),l&&c.clone(!0).lower().attr("class","bar-group-clone")}function V5(t){Mo=t;const e=this.focusSVGs[t].select(".content"),n=19,i=Array(n).fill(0).map((p,_)=>(_+1)*(1/(n+1))),r=U.bin().domain([0,1]).thresholds(i),s={top:65,left:10,right:10,bottom:10},o=20,a=35,l=!this.focusScales.has("chrf");if(l){e.append("g").attr("class","bar-group");const p=this.challengeData.chrf.filter(z=>z!==null),_=r(p);_[0].x0!==0&&(_[0].x0=0);const M=_.map(z=>z.length),C=U.scaleLinear().domain([0,1]).range([a,this.focusSize.width-s.left-s.right]),N=U.scaleLinear().domain([Math.max(...M),0]).range([s.top,this.focusSize.height-o]),B=e.append("g").attr("class","axis-group");B.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-o})`).call(U.axisBottom(C)),B.append("g").attr("class","y-axis").attr("transform",`translate(${a}, ${0})`).call(U.axisLeft(N)),e.append("text").attr("transform",`translate(${a+(this.focusSize.width-s.left-s.right-a)/2}, ${ch})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("ChrF Score Distribution").append("tspan").attr("class","tspan-train").style("font-size","0.92em").attr("dominant-baseline","middle").attr("dy","1.1em").attr("x",0).text(`(${p.length} training samples)`),Fs=p.length,this.focusScales.set("chrf",[C,N])}const c=this.focusScales.get("chrf"),u=c[0],f=c[1],h=new Set(this.filteredIndexes),d=this.challengeData.chrf.filter((p,_)=>h.has(_)).filter(p=>p!==null);let g=r(d);g[0].x0!==0&&(g[0].x0=0);const b=e.select("g.bar-group"),v=this.focusSize.height-o,y=u(i[1])-u(i[0]),w=U.transition("update-chrf-focus").duration(200);d.length===0&&(g=[]),b.selectAll("g.chrf-bar").data(g).join(p=>{const _=p.append("g").attr("class","chrf-bar").attr("transform",M=>`translate(${u(M.x0)}, ${f(M.length)})`);return _.append("rect").attr("class","chrf-rect").attr("width",y).attr("height",M=>v-f(M.length)),_.append("text").attr("class","bar-label is-left is-train").attr("x",y/2).attr("y",-3).style("text-anchor","middle").style("opacity",M=>M.length===0?0:1).text(M=>M.length),_},p=>(p.transition(w).attr("transform",_=>`translate(${u(_.x0)}, ${f(_.length)})`),p.select("rect").transition(w).attr("height",_=>v-f(_.length)),p.select("text").style("opacity",_=>_.length===0?0:1).text(_=>_.length),p),p=>p.remove());let m="";if(d.length===Fs?m=`(${d.length} training samples)`:m=`(${d.length} out of ${Fs} training samples)`,e.select(".tspan-train").text(m),l){b.clone(!0).lower().attr("class","bar-group-clone");let p=[];const _=C=>{if(C.selection===null)return;const N=[p[0],p[1]];if(p=C.selection.map(B=>{const z=u.invert(B),A=1/(n+1);return Math.floor(Math.floor(z*100)/(A*100))*A}),p[0]!==N[0]||p[1]!==N[1]){this.filters.chrf=[];for(const[B,z]of this.challengeData.chrf.entries())z!==null&&z>=p[0]&&z<=p[1]&&this.filters.chrf.push(B);this.syncFilters()}},M=C=>{C.selection===null&&(this.filters.chrf=[],this.syncFilters())};Hr=U.brushX().extent([[this.focusPadding.left+a,this.focusPadding.top+s.top-1],[this.focusSize.width-s.right-4,this.focusPadding.top+this.focusSize.height-o-1]]).on("brush",_).on("end",M),this.focusSVGs[t].append("g").attr("class","chrf-brush-group").call(Hr)}}function R5(){Mo&&Hr&&this.focusSVGs[Mo].select("g.chrf-brush-group").call(t=>Hr.move(t,null))}function F5(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n=19,i=Array(n).fill(0).map((m,p)=>(p+1)*(1/(n+1))),r=U.bin().domain([0,1]).thresholds(i),s={top:5,left:5,right:0,bottom:5},o=5,a=5,l=!this.thumbnailScales.has("chrf");if(l){this.thumbnailLabels[t].text(gn.get(tt.Chrf)),e.append("g").attr("class","bar-group");const m=this.challengeData.chrf.filter(B=>B!==null),p=r(m);p[0].x0!==0&&(p[0].x0=0);const _=p.map(B=>B.length),M=U.scaleLinear().domain([0,1]).range([a,this.thumbnailSize.width-s.left-s.right]),C=U.scaleLinear().domain([Math.max(..._),0]).range([s.top,this.thumbnailSize.height-o]),N=e.append("g").attr("class","axis-group").style("opacity",.6);N.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-o})`).call(U.axisBottom(M).tickValues([])),N.append("g").attr("class","y-axis").attr("transform",`translate(${a}, ${0})`).call(U.axisLeft(C).tickValues([])),this.thumbnailScales.set("chrf",[M,C])}const c=this.thumbnailScales.get("chrf"),u=c[0],f=c[1],h=e.select("g.bar-group"),d=new Set(this.filteredIndexes),g=this.challengeData.chrf.filter((m,p)=>d.has(p)).filter(m=>m!==null);let b=r(g);b[0].x0!==0&&(b[0].x0=0);const v=this.thumbnailSize.height-o,y=u(i[1])-u(i[0]),w=U.transition("update-chrf-thumbnail").duration(200);g.length===0&&(b=[]),h.selectAll("g.chrf-bar").data(b).join(m=>{const p=m.append("g").attr("class","chrf-bar").attr("transform",_=>`translate(${u(_.x0)}, ${f(_.length)})`);return p.append("rect").attr("class","chrf-rect").attr("width",y).attr("height",_=>v-f(_.length)),p},m=>(m.transition(w).attr("transform",p=>`translate(${u(p.x0)}, ${f(p.length)})`),m.select("rect").transition(w).attr("height",p=>v-f(p.length)),m),m=>m.remove()),l&&h.clone(!0).lower().attr("class","bar-group-clone")}const uh=16,pn=new Map;pn.set(tt.Keyword,"Keywords");pn.set(tt.Chrf,"ChrF");pn.set(tt.SourceID,"Input Source");pn.set(tt.Embedding,"Embeddings");pn.set(tt.Familiarity,"Familiarities");pn.set(tt.UnitTest,"Unit Tests");const vi=new Map,Te=new Set;let _i=0,hh=null,To=null,fh=null,Do=null;async function q5(t){const e=this.focusSVGs[t].select(".content"),n={top:45,left:10,right:10,bottom:10},i=20,r=90,s=!this.focusScales.has("sourceid");if(s){const y="/data/dataset-id-map.json",w=await caches.open("cache"),m=await w.match(y);if(this.sourceIDMap===null)if(this.sourceIDMap={},m)this.sourceIDMap=await m.json();else{await w.add(y);const A=await w.match(y);this.sourceIDMap=await(A==null?void 0:A.json())}e.append("g").attr("class","bar-group");const p=new Map;for(const A of Object.keys(this.sourceIDMap))p.set(A,0);p.set(null,0);for(const[A,Y]of this.challengeData.source_id.entries())this.challengeData.train[A]===0&&p.set(Y,p.get(Y)+1);const _=[];for(const[A,Y]of p.entries()){let I="";A===null?I="Redacted/Others":I=this.sourceIDMap[parseInt(A)][1],vi.has(I)||vi.set(I,A?parseInt(A):null),_.push({id:A,count:Y,displayName:I})}_.sort((A,Y)=>Y.count-A.count);const M=U.extent(_,A=>A.count),C=U.scaleLinear().domain(M).range([r,this.focusSize.width-n.left-n.right]),N=U.scaleBand().domain(_.map(A=>A.displayName)).range([n.top,this.focusSize.height-i]).padding(.2),B=e.append("g").attr("class","axis-group");B.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-i})`).call(U.axisBottom(C));const z=B.append("g").attr("class","y-axis y-axis-cat").attr("transform",`translate(${r}, ${0})`).call(U.axisLeft(N));hh=N,To=z,z.selectAll(".tick").on("click",(A,Y)=>{const I=Y,k=vi.get(I);if(Te.has(k)?Te.delete(k):Te.add(k),z.selectAll(".tick").select("text").classed("selected",V=>Te.size===0||Te.has(vi.get(V))),this.filters.sourceID=[],Te.size>0)for(const[V,O]of this.challengeData.source_id.entries())Te.has(O?parseInt(O):null)&&this.filters.sourceID.push(V);this.syncFilters()}).select("text").classed("selected",A=>Te.size===0||Te.has(vi.get(A))),_i=[...p.values()].reduce((A,Y)=>A+Y),e.append("text").attr("transform",`translate(${r+(this.focusSize.width-n.left-n.right-r)/2}, ${uh})`).style("text-anchor","middle").attr("dominant-baseline","middle").text("Input Source Distribution").append("tspan").attr("class","tspan-log").style("font-size","0.92em").attr("dy","1.1em").attr("dominant-baseline","middle").attr("x",0).text(`(${_i} usage log samples)`),this.focusScales.set("sourceid",[C,N])}const o=e.select("g.bar-group"),a=new Map;for(const y of Object.keys(this.sourceIDMap))a.set(y,0);a.set(null,0);const l=new Set(this.filteredIndexes);for(const[y,w]of this.challengeData.source_id.entries())l.has(y)&&this.challengeData.train[y]===0&&a.set(w,a.get(w)+1);const c=U.transition("update-sourceid-focus").duration(200),u=[];for(const[y,w]of a.entries()){let m="";y===null?m="Redacted/Others":m=this.sourceIDMap[parseInt(y)][1],u.push({id:y,count:w,displayName:m})}u.sort((y,w)=>w.count-y.count);const f=this.focusScales.get("sourceid"),h=f[0],d=f[1],g=h.domain();o.selectAll("g.count-bar").data(u,y=>y.displayName).join(y=>{const w=y.append("g").attr("class","count-bar").attr("transform",m=>`translate(${r}, ${d(m.displayName)})`);return w.append("rect").attr("class","bar-rect is-log").attr("width",m=>h(m.count)-h(0)).attr("height",d.bandwidth()),w.append("text").attr("class","bar-label is-log").classed("is-left",m=>m.count<=g[1]/2).attr("x",m=>m.count>g[1]/2?h(m.count)-h(0)-5:h(m.count)-h(0)+2).attr("y",d.paddingInner()*d.bandwidth()/2+d.bandwidth()/2).attr("dominant-baseline","baseline").text(m=>m.count),w},y=>(y.transition(c).attr("transform",w=>`translate(${r}, ${d(w.displayName)})`),y.select("rect").transition(c).attr("width",w=>h(w.count)-h(0)),y.select("text").text(w=>w.count).classed("is-left",w=>w.count<=g[1]/2).transition(c).attr("x",w=>w.count>g[1]/2?h(w.count)-h(0)-5:h(w.count)-h(0)+2),y),y=>y.remove());const b=[...a.values()].reduce((y,w)=>y+w);let v="";b===_i?v=`(${_i} log samples)`:v=`(${b} out of ${_i} log samples)`,e.select(".tspan-log").text(v),s&&o.clone(!0).lower().attr("class","bar-group-clone")}function Y5(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n={top:5,left:5,right:0,bottom:5},i=5,r=5,s=!this.thumbnailScales.has("sourceid");if(s){this.thumbnailLabels[t].text(pn.get(tt.SourceID));const g=new Map;g.set(null,0);for(const[p,_]of this.challengeData.source_id.entries())this.challengeData.train[p]!==1&&(g.has(_)?g.set(_,g.get(_)+1):g.set(_,1));const b=[];for(const[p,_]of g.entries()){const M="";b.push({id:p,count:_,displayName:M})}b.sort((p,_)=>_.count-p.count);const v=U.extent([...g.entries()],p=>p[1]),y=U.scaleLinear().domain(v).range([r,this.thumbnailSize.width-n.left-n.right]),w=U.scaleBand().domain(b.map(p=>String(p.id))).range([n.top,this.thumbnailSize.height-i]).padding(.2);e.append("g").attr("class","bar-group");const m=e.append("g").attr("class","axis-group").style("opacity",.6);m.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-i})`).call(U.axisBottom(y).tickValues([])),m.append("g").attr("class","y-axis").attr("transform",`translate(${r}, ${0})`).call(U.axisLeft(w).tickValues([])),this.thumbnailScales.set("sourceid",[y,w])}const o=e.select("g.bar-group"),a=this.thumbnailScales.get("sourceid"),l=a[0],c=a[1],u=new Map,f=new Set(this.filteredIndexes);for(const[g,b]of this.challengeData.source_id.entries())this.challengeData.train[g]!==1&&f.has(g)&&(u.has(b)?u.set(b,u.get(b)+1):u.set(b,1));for(const g of this.challengeData.source_id)u.has(g)||u.set(g,0);const h=[];for(const[g,b]of u.entries()){const v="";h.push({id:g,count:b,displayName:v})}h.sort((g,b)=>b.count-g.count);const d=U.transition("update-sourceid-thumbnail").duration(200);o.selectAll("g.count-bar").data(h,g=>{const b=g;return b===null?"redacted":b.id}).join(g=>{const b=g.append("g").attr("class","count-bar").attr("transform",v=>`translate(${r}, ${c(String(v.id))})`);return b.append("rect").attr("class","bar-rect is-log").attr("width",v=>l(v.count)-l(0)).attr("height",c.bandwidth()),b},g=>(g.transition(d).attr("transform",b=>`translate(${r}, ${c(String(b.id))})`),g.select("rect").transition(d).attr("width",b=>l(b.count)-l(0)),g),g=>g.remove()),s&&o.clone(!0).lower().attr("class","bar-group-clone")}function K5(){hh===null||To===null||(Te.clear(),To.selectAll(".tick").select("text").classed("selected",!0),this.filters.sourceID=[],this.syncFilters())}async function H5(t){const e=this.focusSVGs[t].select(".content");if(this.intersectionData===null){const w="/data/challenge-set/challenge-intersections.json",m=await caches.open("cache"),p=await m.match(w);if(p)this.intersectionData=await p.json();else{await m.add(w);const _=await m.match(w);this.intersectionData=await(_==null?void 0:_.json())}}const n={top:30,left:10,right:10,bottom:10},i=20,r=this.challengeSet.type==="topic"?120:200,s=!this.focusScales.has("unittest");if(s){e.append("g").attr("class","bar-group");const m=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],p=new Map;for(const I of Object.keys(m))p.set(I,m[I].length);let _=[];const M=new Map;for(const[I,k]of p.entries()){let V=this.challengeSet.type==="topic"?I.replace("challenge-test_",""):I.replace(/challenge-topic-\d+_/,"");M.set(V,I),V.length>35&&(V=V.slice(0,35).concat("...")),_.push({displayName:V,count:k,sampleIndexes:m[I]})}_.sort((I,k)=>k.count-I.count),_=_.slice(0,15);const C=U.extent([...p.entries()],I=>I[1]),N=U.scaleLinear().domain(C).range([r,this.focusSize.width-n.left-n.right]),B=U.scaleBand().domain(_.map(I=>I.displayName)).range([n.top,this.focusSize.height-i]).padding(.2),z=e.append("g").attr("class","axis-group");z.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.focusSize.height-i})`).call(U.axisBottom(N));const A=z.append("g").attr("class","y-axis y-axis-cat").attr("transform",`translate(${r}, ${0})`).call(U.axisLeft(B));fh=B,Do=A;const Y=new Set;A.selectAll(".tick").on("click",(I,k)=>{const V=k;if(Y.has(V)?Y.delete(V):Y.add(V),A.selectAll(".tick").select("text").classed("selected",O=>Y.size===0||Y.has(O)),this.filters.otherSet=[],Y.size>0){const O=new Set;for(const q of Y){const G=M.get(q);for(const K of m[G])O.add(K)}for(let q=0;q<this.challengeData.source.length;q++)O.has(q)&&this.filters.otherSet.push(q)}this.syncFilters()}).select("text").classed("selected",I=>!Y.has(I)),e.append("text").attr("transform",`translate(${r+(this.focusSize.width-n.left-n.right-r)/2}, ${uh})`).style("text-anchor","middle").attr("dominant-baseline","middle").text(this.challengeSet.type==="topic"?"Overlapping with Unit Test Challenge Sets":"Overlapping with Topic Challenge Sets"),this.focusScales.set("unittest",[N,B])}const o=this.focusScales.get("unittest"),a=o[0],l=o[1],c=e.select("g.bar-group"),f=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],h=new Map,d=new Set(this.filteredIndexes);for(const w of Object.keys(f))h.set(w,f[w].filter(m=>d.has(m)).length);let g=[];for(const[w,m]of h.entries()){let p=this.challengeSet.type==="topic"?w.replace("challenge-test_",""):w.replace(/challenge-topic-\d+_/,"");p.length>35&&(p=p.slice(0,35).concat("...")),g.push({displayName:p,count:m,sampleIndexes:f[w]})}g.sort((w,m)=>m.count-w.count);const b=new Set(l.domain());g=g.filter(w=>b.has(w.displayName));const v=a.domain(),y=U.transition("update-test-focus").duration(200);c.selectAll("g.count-bar").data(g,w=>w.displayName).join(w=>{const m=w.append("g").attr("class","count-bar").attr("transform",p=>`translate(${r}, ${l(p.displayName)})`);return m.append("rect").attr("class","bar-rect").attr("width",p=>a(p.count)-a(0)).attr("height",l.bandwidth()),m.append("text").attr("class","bar-label").classed("is-left",p=>p.count<=v[1]/2).attr("x",p=>p.count>v[1]/2?a(p.count)-a(0)-5:a(p.count)-a(0)+2).attr("y",l.paddingInner()*l.bandwidth()/2+l.bandwidth()/2).attr("dominant-baseline","baseline").text(p=>p.count),m},w=>(w.transition(y).attr("transform",m=>`translate(${r}, ${l(m.displayName)})`),w.select("rect").transition(y).attr("width",m=>a(m.count)-a(0)),w.select("text").classed("is-left",m=>m.count<=v[1]/2).text(m=>m.count).transition(y).attr("x",m=>m.count>v[1]/2?a(m.count)-a(0)-5:a(m.count)-a(0)+2),w),w=>w.remove()),s&&c.clone(!0).lower().attr("class","bar-group-clone")}async function $5(t){const e=this.thumbnailSVGs[t].select(".content").style("opacity",.6),n={top:5,left:5,right:0,bottom:5},i=5,r=5;if(this.intersectionData===null){const y="/data/challenge-set/challenge-intersections.json",w=await caches.open("cache"),m=await w.match(y);if(m)this.intersectionData=await m.json();else{await w.add(y);const p=await w.match(y);this.intersectionData=await(p==null?void 0:p.json())}}const o=this.intersectionData[this.challengeSet.type==="topic"?"topics":"tests"][this.challengeSet.fileName],a=!this.thumbnailScales.has("unittest");if(a){this.challengeSet.type!=="topic"?this.thumbnailLabels[t].text("Topics"):this.thumbnailLabels[t].text(pn.get(tt.UnitTest));const y=new Map;for(const C of Object.keys(o))y.set(C,o[C].length);let w=[];for(const[C,N]of y.entries()){const B=C.replace("challenge-test_","");w.push({displayName:B,count:N,sampleIndexes:o[C]})}w.sort((C,N)=>N.count-C.count),w=w.slice(0,15);const m=U.extent([...y.entries()],C=>C[1]),p=U.scaleLinear().domain(m).range([r,this.thumbnailSize.width-n.left-n.right]),_=U.scaleBand().domain(w.map(C=>String(C.displayName))).range([n.top,this.thumbnailSize.height-i]).padding(.2);e.append("g").attr("class","bar-group");const M=e.append("g").attr("class","axis-group").style("opacity",.6);M.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.thumbnailSize.height-i})`).call(U.axisBottom(p).tickValues([])),M.append("g").attr("class","y-axis").attr("transform",`translate(${r}, ${0})`).call(U.axisLeft(_).tickValues([])),this.thumbnailScales.set("unittest",[p,_])}const l=e.select("g.bar-group"),c=this.thumbnailScales.get("unittest"),u=c[0],f=c[1],h=new Map,d=new Set(this.filteredIndexes);for(const y of Object.keys(o))h.set(y,o[y].filter(w=>d.has(w)).length);let g=[];for(const[y,w]of h.entries()){const m=y.replace("challenge-test_","");g.push({displayName:m,count:w,sampleIndexes:o[y]})}g.sort((y,w)=>w.count-y.count);const b=new Set(f.domain());g=g.filter(y=>b.has(y.displayName));const v=U.transition("update-test-thumbnail").duration(200);l.selectAll("g.count-bar").data(g,y=>y.displayName).join(y=>{const w=y.append("g").attr("class","count-bar").attr("transform",m=>`translate(${r}, ${f(String(m.displayName))})`);return w.append("rect").attr("class","bar-rect").attr("width",m=>u(m.count)-u(0)).attr("height",f.bandwidth()),w},y=>(y.transition(v).attr("transform",w=>`translate(${r}, ${f(String(w.displayName))})`),y.select("rect").transition(v).attr("width",w=>u(w.count)-u(0)),y),y=>y.remove()),a&&l.clone(!0).lower().attr("class","bar-group-clone")}function G5(){fh===null||Do===null||(this.filters.otherSet=[],Do.selectAll(".tick").select("text").classed("selected",!0),this.syncFilters())}let ur=null;const Se=new Map;Se.set(tt.Keyword,"Keywords");Se.set(tt.Chrf,"ChrF");Se.set(tt.SourceID,"Input Source");Se.set(tt.Embedding,"Embeddings");Se.set(tt.Familiarity,"Familiarities");Se.set(tt.UnitTest,"Unit Tests");const fn=new Map;fn.set(tt.Keyword,Qe.colors["pink-200"]);fn.set(tt.Chrf,Qe.colors["blue-200"]);fn.set(tt.SourceID,Qe.colors["green-200"]);fn.set(tt.Embedding,Qe.colors["orange-200"]);fn.set(tt.Familiarity,Qe.colors["purple-200"]);fn.set(tt.UnitTest,Qe.colors["yellow-200"]);class ac{constructor({component:e,challengeSet:n,challengeData:i,mySetViewUpdated:r,tooltipStore:s,challengeStore:o,timelineStore:a,embeddingSettingStore:l}){E(this,"component");E(this,"challengeSet");E(this,"challengeData");E(this,"curKeywords");E(this,"mySetViewUpdated");E(this,"trainingCount",0);E(this,"logCount",0);E(this,"countLabel");E(this,"tooltipStore");E(this,"tooltipStoreValue");E(this,"challengeStore");E(this,"challengeStoreValue");E(this,"timelineStore");E(this,"timelineStoreValue");E(this,"embeddingSettingStore");E(this,"embeddingSettingStoreValue");E(this,"selectedSetName","");E(this,"selectedSetSentences",[]);E(this,"selectedSetKeywords",[]);E(this,"editMode",!1);E(this,"timeline");E(this,"curSentences",[]);E(this,"filteredIndexes",[]);E(this,"filters",{date:[],keyword:[],embedding:[],chrf:[],familiarity:[],sourceID:[],otherSet:[],search:[]});E(this,"filterSearchMatchIndexes",new Map);E(this,"filterKeywordMatchIndexes",new Map);E(this,"filterTags",[]);E(this,"focusScales",new Map);E(this,"thumbnailScales",new Map);E(this,"sourceIDMap",null);E(this,"intersectionData",null);E(this,"focusSVGs");E(this,"thumbnailSVGs");E(this,"focusLabel");E(this,"thumbnailLabels");E(this,"focusPadding");E(this,"thumbnailPadding");E(this,"focusSize");E(this,"thumbnailSize");E(this,"curPlotTypes");E(this,"curSelectedThumbnailID",0);E(this,"curSelectedKeywords",new Set);E(this,"drawFamiliarityFocus",I5);E(this,"drawFamiliarityThumbnail",B5);E(this,"resetFamiliarityPlots",U5);E(this,"drawChrfFocus",V5);E(this,"drawChrfThumbnail",F5);E(this,"resetChrfPlots",R5);E(this,"drawSourceIDFocus",q5);E(this,"drawSourceIDThumbnail",Y5);E(this,"resetSourceIDPlots",K5);E(this,"drawUnitTestFocus",H5);E(this,"drawUnitTestThumbnail",$5);E(this,"resetUnitTestPlots",G5);E(this,"initDateCountData",()=>{const e=new Map,n=/(\d{4})(\d{2})(\d{2})/;for(const r of this.challengeData.date)r!==null&&(e.has(r)?e.set(r,e.get(r)+1):e.set(r,1));return[...e.entries()].map(([r,s])=>({date:new Date(String(r).replace(n,"$1-$2-$3")),count:s})).sort((r,s)=>r.date<s.date?-1:1)});E(this,"getCurDateCountData",()=>{const e=new Map;for(const r of this.timeline.dateCount){const s=parseInt(`${r.date.getUTCFullYear()}${(r.date.getUTCMonth()+1).toString().padStart(2,"0")}${r.date.getUTCDate().toString().padStart(2,"0")}`);e.set(s,0)}const n=/(\d{4})(\d{2})(\d{2})/;for(const r of this.filteredIndexes){const s=this.challengeData.date[r];s!==null&&e.set(s,e.get(s)+1)}return[...e.entries()].map(([r,s])=>({date:new Date(String(r).replace(n,"$1-$2-$3")),count:s})).sort((r,s)=>r.date<s.date?-1:1)});E(this,"initializeKeywords",()=>{const e=[];let n=[];for(const[a,l]of this.challengeData.keywords)e.push({word:a,value:l});n=e.slice(0,50);const r=U.extent(n,a=>a.value),s=U.scaleLinear().domain(r).range([0,1]),o=U.interpolateHcl(Qe.colors["gray-50"],U.hsl(204,.13,.76));for(const a of n)a.color=o(s(a.value));return n.sort((a,l)=>l.value-a.value),n});E(this,"syncFilters",()=>{let e=new Set(Array(this.challengeData.source.length).fill(0).map((r,s)=>s)),n;for(n in this.filters){const r=new Set(this.filters[n]);if(r.size===0){const s=this.filterTags.map(o=>o.type.toString()).indexOf(n);s!==-1&&this.filterTags.splice(s,1);continue}if(!(this.filterTags.filter(s=>s.type===n).length>0)){let s;switch(n){case"date":{s={type:Gt.Date,message:"Dates"},this.filterTags.push(s);break}case"sourceID":{s={type:Gt.SourceID,message:"Input Source"},this.filterTags.push(s);break}case"chrf":{s={type:Gt.Chrf,message:"ChrF"},this.filterTags.push(s);break}case"familiarity":{s={type:Gt.Familiarity,message:"Familiarity"},this.filterTags.push(s);break}case"keyword":{s={type:Gt.Keyword,message:"Keyword"},this.filterTags.push(s);break}case"otherSet":{s={type:Gt.OtherSet,message:"Overlapping Sets"},this.filterTags.push(s);break}case"search":{s={type:Gt.Search,message:"Search Result"},this.filterTags.push(s);break}}}e=new Set([...e].filter(s=>r.has(s)))}this.filteredIndexes=[...e].sort((r,s)=>r-s),this.curSentences=[],this.trainingCount=0,this.logCount=0;for(const r of this.filteredIndexes){if(this.filterSearchMatchIndexes.has(r)||this.filterKeywordMatchIndexes.has(r)){const s=[];if(this.filterSearchMatchIndexes.has(r))for(const o of this.filterSearchMatchIndexes.get(r))s.push([o[0],o[1],1]);if(this.filterKeywordMatchIndexes.has(r))for(const o of this.filterKeywordMatchIndexes.get(r))s.push([o[0],o[1],0]);s.sort((o,a)=>o[0]-a[0]),this.curSentences.push({source:this.challengeData.source[r],hyp:this.challengeData.hyp[r],showHyp:!1,highlightRange:s,type:this.challengeData.train[r]===1?"train":"log"})}else this.curSentences.push({source:this.challengeData.source[r],hyp:this.challengeData.hyp[r],showHyp:!1,type:this.challengeData.train[r]===1?"train":"log"});this.challengeData.train[r]===1?this.trainingCount+=1:this.logCount+=1}this.focusScales.has("chrf")&&(this.drawChrfFocus(2),this.drawChrfThumbnail(2)),this.focusScales.has("familiarity")&&(this.drawFamiliarityFocus(3),this.drawFamiliarityThumbnail(3)),this.focusScales.has("sourceid")&&(this.drawSourceIDFocus(4),this.drawSourceIDThumbnail(4)),this.focusScales.has("unittest")&&(this.drawUnitTestFocus(5),this.drawUnitTestThumbnail(5));const i=this.getCurDateCountData();this.timeline.updateDateCount(i),this.mySetViewUpdated(),this.countLabel.classed("shown")||this.countLabel.style("opacity",0).classed("shown",!0).transition("show").duration(300).ease(U.easeCubicInOut).style("opacity",1),ur!==null&&(clearTimeout(ur),ur=null),ur=setTimeout(()=>{this.countLabel.transition("hide").duration(300).ease(U.easeCubicInOut).style("opacity",0).on("end",()=>{this.countLabel.classed("shown",!1)})},3e3),this.embeddingSettingStoreValue.filteredIndexes=this.filteredIndexes,this.embeddingSettingStore.set(this.embeddingSettingStoreValue)});E(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.challengeStore.subscribe(e=>{this.challengeStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e;const n=[];if(e.selectedDates.length!==0){const i=new Set(this.timelineStoreValue.selectedDates);for(let r=0;r<this.challengeData.source.length;r++)i.has(String(this.challengeData.date[r]))&&n.push(r)}this.filters.date=n,this.syncFilters()}),this.embeddingSettingStore.subscribe(e=>{this.embeddingSettingStoreValue=e})});E(this,"initTranslateSentences",()=>{this.curSentences=[],this.filteredIndexes=[];for(let e=0;e<this.challengeData.source.length;e++)this.curSentences.push({source:this.challengeData.source[e],hyp:this.challengeData.hyp[e],showHyp:!1,type:this.challengeData.train[e]===1?"train":"log"}),this.filteredIndexes.push(e)});E(this,"initSVGs",async()=>{await Hs(),this.focusLabel.text(Se.get(tt.Embedding));for(let i=0;i<this.curPlotTypes.thumbnails.length;i++){const r=U.select(this.component).select(`#focus-${i}`).select(".focus-svg").attr("viewbox","0 0 530 360").attr("preserveAspectRatio","none");r.append("g").attr("class","content").attr("transform",`translate(${this.focusPadding.left}, ${this.focusPadding.top})`),this.focusSVGs.push(r)}const e=this.focusSVGs[2].node().getBoundingClientRect();this.focusSize.width=e.width-this.focusPadding.left-this.focusPadding.right,this.focusSize.height=e.height-this.focusPadding.top-this.focusPadding.bottom;for(let i=0;i<this.curPlotTypes.thumbnails.length;i++){const r=U.select(this.component).select(`#thumbnail-${i}`).select(".thumbnail-svg").attr("viewbox","0 0 100 100").attr("preserveAspectRatio","none");r.append("g").attr("class","content").attr("transform",`translate(${this.thumbnailPadding.left}, ${this.thumbnailPadding.top})`),this.thumbnailSVGs.push(r);const s=U.select(this.component).select(`#thumbnail-${i}`).select(".vis-label");this.thumbnailLabels.push(s)}const n=this.thumbnailSVGs[1].node().getBoundingClientRect();this.thumbnailSize.width=n.width-this.thumbnailPadding.left-this.thumbnailPadding.right,this.thumbnailSize.height=n.height-this.thumbnailPadding.top-this.thumbnailPadding.bottom});E(this,"updateFocusPlot",e=>{switch(this.curPlotTypes.thumbnails[e]){case tt.Keyword:{this.drawKeywordFocus(e);break}case tt.Chrf:{this.drawChrfFocus(e);break}case tt.SourceID:{this.drawSourceIDFocus(e);break}case tt.Embedding:{this.drawEmbeddingFocus(e);break}case tt.Familiarity:{this.drawFamiliarityFocus(e);break}case tt.UnitTest:{this.drawUnitTestFocus(e);break}}});E(this,"updateThumbnailPlot",e=>{switch(this.thumbnailSVGs[e].select("g.content").selectAll("*").remove(),this.curPlotTypes.thumbnails[e]){case tt.Keyword:{this.drawKeywordThumbnail(e);break}case tt.Chrf:{this.drawChrfThumbnail(e);break}case tt.SourceID:{this.drawSourceIDThumbnail(e);break}case tt.Embedding:{this.drawEmbeddingThumbnail(e);break}case tt.Familiarity:{this.drawFamiliarityThumbnail(e);break}case tt.UnitTest:{this.drawUnitTestThumbnail(e);break}}});E(this,"initVis",()=>{for(const[e,n]of this.curPlotTypes.thumbnails.entries())this.updateFocusPlot(e);for(const[e,n]of this.curPlotTypes.thumbnails.entries())this.updateThumbnailPlot(e)});E(this,"drawFocusBox",e=>{const n=this.focusSVGs[e].select(".content"),i=this.curPlotTypes.thumbnails[e];n.append("rect").attr("x",0).attr("y",0).attr("width",this.focusSize.width).attr("height",this.focusSize.height).style("fill",fn.get(i))});E(this,"drawThumbnailBox",e=>{this.thumbnailSVGs[e].select(".content").append("rect").attr("x",0).attr("y",0).attr("width",this.thumbnailSize.width).attr("height",this.thumbnailSize.height).style("fill",fn.get(this.curPlotTypes.thumbnails[e])).style("stroke","white")});E(this,"drawEmbeddingFocus",e=>{this.focusLabel.text(Se.get(tt.Embedding))});E(this,"drawKeywordFocus",e=>{this.drawFocusBox(e)});E(this,"drawEmbeddingThumbnail",e=>{this.thumbnailLabels[e].text(Se.get(tt.Embedding))});E(this,"drawKeywordThumbnail",e=>{this.thumbnailLabels[e].text(Se.get(tt.Keyword))});E(this,"thumbnailClicked",(e,n,i=!1)=>{if(this.curSelectedThumbnailID===n)return;const r=this.curPlotTypes.thumbnails[n];this.curPlotTypes.focus=r;const s=()=>{this.curSelectedThumbnailID=this.curPlotTypes.thumbnails.indexOf(this.curPlotTypes.focus),this.focusLabel.text(Se.get(r)),this.mySetViewUpdated()};if(i){const o=this.thumbnailSVGs[n].node(),a=o.cloneNode(!0),l=U.select(a);document.querySelector("body").appendChild(a);const c=o.getBoundingClientRect(),u=this.focusSVGs[this.curSelectedThumbnailID].node().getBoundingClientRect(),f=u.width/c.width,h=u.height/c.height,d=u.x-c.x,g=u.y-c.y;l.style("position","absolute").attr("preserveAspectRatio","none").style("top",`${c.y}px`).style("left",`${c.x}px`).style("width",`${c.width}px`).style("height",`${c.height}px`).style("transform-origin","top left").style("z-index",3).style("opacity",1),l.transition("move").duration(500).ease(U.easeCubicInOut).style("transform",`translate(${d}px, ${g}px) scale(${f}, ${h})`).style("opacity",0).on("end",()=>{l.remove(),s()})}i||s()});E(this,"editClicked",()=>{this.editMode=!this.editMode,this.mySetViewUpdated()});E(this,"backClicked",()=>{this.challengeStoreValue.selectedFileName="",this.challengeStore.set(this.challengeStoreValue)});E(this,"searchKeyChanged",e=>{let n;if(e!==null?n=U.select(e.target).property("value"):n="",this.filters.search=[],this.filterSearchMatchIndexes=new Map,n!==""){const i=n.toLowerCase();let r=!0;for(const[s,o]of this.challengeData.source.entries()){const a=[...o.matchAll(new RegExp(i,"gi"))].map(l=>[l.index,i.length]);a.length!==0&&(this.filters.search.push(s),this.filterSearchMatchIndexes.set(s,a),r=!1)}r&&(this.filters.search=[-1])}this.syncFilters(),this.mySetViewUpdated()});E(this,"resetSearchKey",()=>{const e=this.component.querySelector(".search-bar-input");e.value="",this.searchKeyChanged(null)});E(this,"displaySource",e=>{const n=e.source.replaceAll("iframe","REDACTED");if(e.highlightRange===void 0)return n;{const i=[];i.push(`${n.substring(0,e.highlightRange[0][0])}`);let r=0;for(const[s,[o,a,l]]of e.highlightRange.entries()){r=o+a;const c=l===1?"highlight-search":"highlight-keyword";i.push(`<span class="${c}">${n.substring(o,o+a)}</span>`),s===e.highlightRange.length-1?i.push(`${n.substring(r)}`):i.push(`${n.substring(r,e.highlightRange[s+1][0])}`)}return i.join("")}});E(this,"keywordClicked",e=>{if(this.curSelectedKeywords.has(e.word)?this.curSelectedKeywords.delete(e.word):this.curSelectedKeywords.add(e.word),this.filters.keyword=[],this.filterKeywordMatchIndexes=new Map,this.curSelectedKeywords.size!==0)for(const[n,i]of this.challengeData.source.entries())for(const r of this.curSelectedKeywords){const s=r.toLowerCase(),o=[...i.matchAll(new RegExp(s,"gi"))].map(a=>[a.index,s.length]);o.length!==0&&(this.filters.keyword.push(n),this.filterKeywordMatchIndexes.set(n,o))}this.syncFilters(),this.mySetViewUpdated()});E(this,"resetKeyword",()=>{this.curSelectedKeywords.clear(),this.filters.keyword=[],this.filterKeywordMatchIndexes=new Map,this.syncFilters(),this.mySetViewUpdated()});E(this,"filterHelperMouseenter",(e,n="filter")=>{switch(n){case"filter":{this.tooltipStoreValue.html="Interact the tool to apply filters. For example, you can brush the       timeline to filter sentences by dates. Or you can click keywords to       choose sentences that include certain keywords.";break}case"keyword":{this.tooltipStoreValue.html="List of most representative keywords in this set. Keywords are          sorted by representativeness: darker background means the word is          more representative.";break}case"embedding":{this.tooltipStoreValue.html="Position of each sample in the semantic embedding space.";break}case"chrf":{this.tooltipStoreValue.html="Distribution of ChrF scores from training samples. Higher score          suggests better translation quality.";break}case"familiarity":{this.tooltipStoreValue.html="Distribution of the familiarity scores from log samples. Higher          value indicates closer distance to the training distribution.";break}case"sourceid":{this.tooltipStoreValue.html="Distribution of the source apps of translation requests.";break}case"test":{this.tooltipStoreValue.html="Distribution of sentences that are also in other challenge sets.";break}}const r=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=r.y,this.tooltipStoreValue.left=r.x+r.width/2,this.tooltipStoreValue.maxWidth=260,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"filterHelperMouseleave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"tagCloseClicked",e=>{switch(e.type){case Gt.SourceID:{this.resetSourceIDPlots();break}case Gt.Chrf:{this.resetChrfPlots();break}case Gt.Date:{this.timeline.brushClear();break}case Gt.Familiarity:{this.resetFamiliarityPlots();break}case Gt.Keyword:{this.resetKeyword();break}case Gt.OtherSet:{this.resetUnitTestPlots();break}case Gt.Search:{this.resetSearchKey();break}}});E(this,"headerMouseenter",(e,n)=>{let i="";switch(n.key){case mt.chrf:{i="Average of sentence-level ChrF scores on the training data.";break}case mt.trainCount:{i="Number of training samples in this challenge set";break}case mt.logCount:{i="Number of log samples in this challenge set";break}case mt.familiarity:{i="Likelyhood of seeing a usage log sample under the training data's distributition";break}case mt.trainLogRatio:i="Percentage of all samples that are from the training data."}this.tooltipStoreValue.html=i;const s=e.currentTarget.querySelector("span").getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=s.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=s.x+s.width/2,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"headerMouseleave",(e,n)=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"exportClicked",()=>{const e={source:[],translation:[]};for(const n of this.curSentences)e.source.push(n.source),e.translation.push(n.hyp);W5(e,null,`challenge-set-${this.challengeSet.displayName}.json`)});E(this,"exportMouseEnter",e=>{this.tooltipStoreValue.html="Download filtered (or all if no filters) source-translation pairs.";const i=e.currentTarget.getBoundingClientRect();this.tooltipStoreValue.show=!0,this.tooltipStoreValue.top=i.y,this.tooltipStoreValue.maxWidth=200,this.tooltipStoreValue.left=i.x+i.width/2,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"exportMouseLeave",e=>{this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue)});E(this,"deleteClicked",(e,n)=>{e.preventDefault(),e.stopPropagation();const i=this.curSentences.indexOf(n);this.curSentences.splice(i,1);const r=this.challengeData.source.indexOf(n.source);this.challengeData.source_id.splice(r,1),this.challengeData.chrf.splice(r,1),this.challengeData.date.splice(r,1),this.challengeData.familiarity.splice(r,1),this.challengeData.hyp.splice(r,1),this.challengeData.source.splice(r,1),this.challengeData.train.splice(r,1),this.challengeData.x.splice(r,1),this.challengeData.y.splice(r,1);const s=a=>{for(let l=a.length-1;l>=0;l--)a[l]>r?a[l]-=1:a[l]===r&&a.splice(l,1)};let o;for(o in this.filters)s(this.filters[o]);this.mySetViewUpdated()});this.component=e,this.challengeSet=n,this.challengeData=i,this.mySetViewUpdated=r,this.countLabel=U.select(this.component).select("#sentence-list-count-label"),this.tooltipStore=s,this.tooltipStoreValue=Mn(),this.challengeStore=o,this.challengeStoreValue=Ze(),this.timelineStore=a,this.timelineStoreValue=cs(),this.embeddingSettingStore=l,this.embeddingSettingStoreValue=Hi(),this.initTranslateSentences(),this.focusSVGs=[],this.thumbnailSVGs=[],this.focusLabel=U.select(this.component).select(".vis-focus").select(".vis-label"),this.thumbnailLabels=[],this.focusPadding={top:5,bottom:5,left:5,right:5},this.thumbnailPadding={top:5,bottom:5,left:5,right:5},this.focusSize={width:0,height:0},this.thumbnailSize={width:0,height:0};const c=tt.Keyword;this.curPlotTypes={focus:c,thumbnails:[tt.Keyword,tt.Embedding,tt.Chrf,tt.Familiarity,tt.SourceID,tt.UnitTest]},this.curSelectedThumbnailID=this.curPlotTypes.thumbnails.indexOf(c),this.initSVGs().then(h=>{this.initVis()}),this.curKeywords=this.initializeKeywords();const u={top:5,bottom:7,left:3,right:3},f=this.initDateCountData();this.timeline=new z5({component:e,tooltipStore:s,timelineStore:a,padding:u,dateCount:f}),this.subscribeStores()}}const W5=(t,e=null,n="download.json")=>{const i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t));let r=e,s=!1;e===null&&(r=document.createElement("a"),r.style.display="none",s=!0),r==null||r.setAttribute("href",i),r==null||r.setAttribute("download",`${n}`),r==null||r.click(),s&&(r==null||r.remove())},dh=`<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16">
    <path fill-rule="evenodd" d="M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z"></path>
</svg>`;const $t="src/components/filter/Filter.svelte";function No(t){let e,n,i,r,s,o,a,l,c,u,f,h,d,g,b,v,y,w,m,p,_,M,C,N,B,z,A;const Y={c:function(){e=D("div"),n=D("div"),i=D("div"),r=D("div"),s=D("div"),o=H(),a=D("div"),a.textContent="Settings",l=H(),c=D("div"),u=D("input"),h=H(),d=D("label"),d.textContent="Usage log density",g=H(),b=D("div"),v=D("input"),w=H(),m=D("label"),m.textContent="Usage log sample",p=H(),_=D("div"),M=D("input"),N=H(),B=D("label"),B.textContent="Training sample",x(s,"class","svg-icon s-o4pJ5fbxPjev"),T(s,$t,215,8,5056),x(r,"class","icon-wrapper s-o4pJ5fbxPjev"),T(r,$t,214,6,4990),x(a,"class","header-name s-o4pJ5fbxPjev"),T(a,$t,219,6,5140),x(i,"class","header s-o4pJ5fbxPjev"),T(i,$t,213,4,4963),x(u,"type","checkbox"),x(u,"class","log-contour-checkbox s-o4pJ5fbxPjev"),x(u,"id","log-contour"),u.checked=f=t[2].showLogContour,T(u,$t,251,6,6004),x(d,"class","log-contour-label s-o4pJ5fbxPjev"),x(d,"for","log-contour"),T(d,$t,258,6,6215),x(c,"class","config-row s-o4pJ5fbxPjev"),T(c,$t,250,4,5973),x(v,"type","checkbox"),x(v,"class","log-sample-checkbox s-o4pJ5fbxPjev"),x(v,"id","log-sample"),v.checked=y=t[2].showLogSample,T(v,$t,264,6,6355),x(m,"class","log-contour-label s-o4pJ5fbxPjev"),x(m,"for","log-sample"),T(m,$t,271,6,6562),x(b,"class","config-row s-o4pJ5fbxPjev"),T(b,$t,263,4,6324),x(M,"type","checkbox"),x(M,"class","train-sample-checkbox s-o4pJ5fbxPjev"),x(M,"id","train-sample"),M.checked=C=t[2].showTrainSample,T(M,$t,275,6,6684),x(B,"class","log-contour-label s-o4pJ5fbxPjev"),x(B,"for","train-sample"),T(B,$t,282,6,6899),x(_,"class","config-row s-o4pJ5fbxPjev"),T(_,$t,274,4,6653),x(n,"class","filter s-o4pJ5fbxPjev"),T(n,$t,212,2,4938),x(e,"class","filter-wrapper s-o4pJ5fbxPjev"),lt(e,"unpinned",t[1]),T(e,$t,211,0,4870)},l:function(k){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(k,V){et(k,e,V),S(e,n),S(n,i),S(i,r),S(r,s),s.innerHTML=dh,S(i,o),S(i,a),S(n,l),S(n,c),S(c,u),S(c,h),S(c,d),S(n,g),S(n,b),S(b,v),S(b,w),S(b,m),S(n,p),S(n,_),S(_,M),S(_,N),S(_,B),t[13](e),z||(A=[yt(r,"click",t[9],!1,!1,!1,!1),yt(u,"input",t[10],!1,!1,!1,!1),yt(v,"input",t[11],!1,!1,!1,!1),yt(M,"input",t[12],!1,!1,!1,!1)],z=!0)},p:function(k,[V]){V&4&&f!==(f=k[2].showLogContour)&&ds(u,"checked",f),V&4&&y!==(y=k[2].showLogSample)&&ds(v,"checked",y),V&4&&C!==(C=k[2].showTrainSample)&&ds(M,"checked",C),V&2&&lt(e,"unpinned",k[1])},i:Tt,o:Tt,d:function(k){k&&nt(e),t[13](null),z=!1,Ht(A)}};return it("SvelteRegisterBlock",{block:Y,id:No.name,type:"component",source:"",ctx:t}),Y}function j5(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("Filter",i,[]);let{embeddingSettingStore:s=null}=e,o=!1,a=null,l=!1,c=!0,u=Hi();ln(()=>{n(8,o=!0)});const f=()=>{o&&a&&s&&(l=!0,s.subscribe(N=>{n(2,u=N)}))},h=()=>{n(1,c=!c)},d=()=>{u.curSampleMethod==="unfamiliar"?n(2,u.curSampleMethod="random",u):n(2,u.curSampleMethod="unfamiliar",u),s==null||s.set(u)},g=N=>{const B=N.target;n(2,u.curSample=parseInt(B.value),u),s==null||s.set(u)},b=N=>{const B=N.target;n(2,u.showLogContour=B.checked,u),s==null||s.set(u)},v=N=>{const B=N.target;n(2,u.showLogSample=B.checked,u),s==null||s.set(u)},y=N=>{const B=N.target;n(2,u.showTrainSample=B.checked,u),s==null||s.set(u)},w=["embeddingSettingStore"];Object.keys(e).forEach(N=>{!~w.indexOf(N)&&N.slice(0,2)!=="$$"&&N!=="slot"&&console.warn(`<Filter> was created with unknown prop '${N}'`)});const m=N=>h(),p=N=>b(N),_=N=>v(N),M=N=>y(N);function C(N){cn[N?"unshift":"push"](()=>{a=N,n(0,a)})}return t.$$set=N=>{"embeddingSettingStore"in N&&n(7,s=N.embeddingSettingStore)},t.$capture_state=()=>({onMount:ln,getEmbeddingSettingStoreDefaultValue:Hi,iconGear:dh,embeddingSettingStore:s,mounted:o,component:a,initialized:l,unpinned:c,embeddingSetting:u,initView:f,gearClicked:h,sampleToggleClicked:d,sampleSliderChanged:g,logContourCheckboxToggled:b,logSampleCheckboxToggled:v,trainSampleCheckboxToggled:y}),t.$inject_state=N=>{"embeddingSettingStore"in N&&n(7,s=N.embeddingSettingStore),"mounted"in N&&n(8,o=N.mounted),"component"in N&&n(0,a=N.component),"initialized"in N&&(l=N.initialized),"unpinned"in N&&n(1,c=N.unpinned),"embeddingSetting"in N&&n(2,u=N.embeddingSetting)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&256&&o&&f()},[a,c,u,h,b,v,y,s,o,m,p,_,M,C]}class gh extends ri{constructor(e){super(e),ni(this,e,j5,No,Cn,{embeddingSettingStore:7}),it("SvelteRegisterComponent",{component:this,tagName:"Filter",options:e,id:No.name})}get embeddingSettingStore(){throw new Error("<Filter>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set embeddingSettingStore(e){throw new Error("<Filter>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const sn=2,lc=.4;let yn=null,hr=null;class cc{constructor({component:e,challengeSet:n,challengeData:i,focusPosition:r,embeddingUpdated:s,tooltipStore:o,timelineStore:a,embeddingSettingStore:l}){E(this,"component");E(this,"challengeSet");E(this,"challengeData");E(this,"focusPosition");E(this,"embeddingUpdated");E(this,"svg");E(this,"padding");E(this,"width");E(this,"height");E(this,"xScale",null);E(this,"yScale",null);E(this,"initXScale",null);E(this,"initYScale",null);E(this,"transformK",1);E(this,"contourMeta",null);E(this,"backgroundContourPromise");E(this,"tooltipStore");E(this,"tooltipStoreValue");E(this,"timelineStore");E(this,"timelineStoreValue");E(this,"embeddingSettingStore");E(this,"embeddingSettingStoreValue");E(this,"backgroundDensityColorScale");E(this,"initBackgroundDensity",async()=>{const e=await U.json("/data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=n.length,r=document.createElement("canvas"),s=r.getContext("2d");r.width=i,r.height=i;const o=s.getImageData(0,0,i,i),a=o.data;for(let d=0;d<a.length;d+=4){const g=Math.floor(d/4),b=Math.floor(g/i),v=g%i,y=n[b][v].pdf,w=U.rgb(this.backgroundDensityColorScale(y));a[d]=w.r,a[d+1]=w.g,a[d+2]=w.b,a[d+3]=255}const l=document.createElement("canvas"),c=this.width+this.padding.left+this.padding.right;l.width=c,l.height=c;const u=l.getContext("2d");s.putImageData(o,0,0),u.drawImage(r,0,0,i,i,this.padding.left,this.padding.top,this.width,this.width);const f=l.toDataURL();this.svg.select("g.content").select(".content-bottom").append("image").attr("transform","scale(1, -1)").attr("transform-origin","center").attr("class","background-density").attr("xlink:href",f).style("opacity",.3)});E(this,"initBackgroundContour",async()=>{const e=await U.json("/data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=e.meta;this.contourMeta=i;const r=[];for(let c=0;c<n.length;c++)for(let u=0;u<n.length;u++)r.push(n[c][u].pdf);this.initXScale=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+this.width]),this.xScale=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+this.width]),this.initYScale=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+this.height,this.padding.top]),this.yScale=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+this.height,this.padding.top]);const s=[.01,.05,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],o=U.contours().size([n.length,n.length]).thresholds(s)(r).map(c=>({type:c.type,value:c.value,coordinates:c.coordinates.map(f=>f.map(h=>h.map(([d,g])=>[this.xScale(e.meta.vmin+e.meta.step*d),this.yScale(e.meta.vmin+e.meta.step*g)])))})),a=this.svg.select("g.content").select(".content-bottom").append("g").attr("class","contour-train"),l=U.scaleSequential(U.extent(s),U.interpolateGreys);a.selectAll("path").data(o).join("path").attr("class","contour").attr("d",U.geoPath()).style("fill",c=>l(c.value)),a.append("rect").attr("class","contour-mask").attr("width",this.width).attr("height",this.height).style("fill","white").style("opacity",.4)});E(this,"initThumbnailBackgroundContour",async()=>{const e=await U.json("/data/density-grid.json");if(e===void 0){console.error("Cannot load density data.");return}const n=e.data,i=e.meta;this.contourMeta=i;const r=[];for(let b=0;b<n.length;b++)for(let v=0;v<n.length;v++)r.push(n[b][v].pdf);const s=U.select(`div#thumbnail-${this.focusPosition}`).select("svg"),o=s.node().getBoundingClientRect(),a=o.width,l=o.height,c=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.left,this.padding.left+a]),u=U.scaleLinear().domain([i.vmin,i.vmax]).range([this.padding.top+l,this.padding.top]),f=[.01,.05,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],h=U.contours().size([n.length,n.length]).thresholds(f)(r).map(b=>({type:b.type,value:b.value,coordinates:b.coordinates.map(y=>y.map(w=>w.map(([m,p])=>[c(e.meta.vmin+e.meta.step*m),u(e.meta.vmin+e.meta.step*p)])))})),d=s.append("g").attr("class","contour-train").style("transform-origin","center").style("transform","scale(1.3)"),g=U.scaleSequential(U.extent(f),U.interpolateGreys);d.selectAll("path").data(h).join("path").attr("class","contour").attr("d",U.geoPath()).style("fill",b=>g(b.value)),d.append("rect").attr("class","contour-mask").attr("width",a).attr("height",l).style("fill","white").style("opacity",.4)});E(this,"drawLogContour",async e=>{const n=[],i=1/e.length;let r=0,s=!1;if(!this.contourMeta){console.error("contourMeta is not initialized, quit drawing.");return}if(e.length===0){this.svg.selectAll("g.contour-log").remove();return}for(const u of e){const f=await U.json("/data/density-grid-logs.json");if(f===void 0){console.error(`Cannot load density data on ${u}.`);return}const h=f.data;if(s||(r=h.length,s=!0),n.length===0)for(let d=0;d<h.length;d++)for(let g=0;g<h.length;g++)n.push(h[d][g]*i);else for(let d=0;d<h.length;d++)for(let g=0;g<h.length;g++)n[d*h.length+g]+=h[d][g]*i}const o=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],a=U.contours().size([r,r]).thresholds(o)(n).map(u=>({type:u.type,value:u.value,coordinates:u.coordinates.map(h=>h.map(d=>d.map(([g,b])=>[this.initXScale(this.contourMeta.vmin+this.contourMeta.step*g),this.initYScale(this.contourMeta.vmin+this.contourMeta.step*b)])))})),l=this.svg.select("g.content-bottom").selectAll("g.contour-log").data([0]).join("g").attr("class","contour-log").style("visibility","hidden"),c=U.scaleSequential(U.extent(o),["hsl(174, 100%, 95%)","hsl(174, 100%, 23%)"]);l.selectAll("path").data(a,u=>u.value).join("path").attr("class","contour-log").style("fill",u=>c(u.value)).style("opacity",.15).attr("d",U.geoPath())});E(this,"drawRareDailyPoints",async(e,n=3e3)=>{const i=[];hr=await caches.open("cache");for(const a of e){let l;const c=`/data/log-daily/daily-${a}.json`,u=await hr.match(c);if(u)l=await u.json();else{await hr.add(c);const f=await hr.match(c);l=await(f==null?void 0:f.json())}if(l===void 0){console.error("Cannot load density data.");continue}i.push(l)}const r=i.reduce((a,l)=>a+l.umap.length,0),s=[],o=new Set;for(let a=0;a<r;a++){const l=i[a%i.length],c=Math.floor(a/i.length);s.length<n&&!o.has(l.source[c])&&(s.push({x:l.umap[c][0],y:l.umap[c][1],source:l.source[c],name:`${e[a]}-${c}`}),o.add(l.source[c]))}this.drawDailyScatter(s)});E(this,"drawDailyScatter",e=>{this.svg.select("g.content-top").selectAll("g.daily-point-group").data([0]).join("g").attr("class","daily-point-group").selectAll("g.daily-point").data(e,r=>r.name).join(r=>{const s=r.append("g").attr("class","daily-point").attr("transform",o=>`translate(${this.initXScale(o.x)}, ${this.initYScale(o.y)})`).on("mouseenter",this.pointMouseenterHandler).on("mouseleave",this.pointMouseleaveHandler);return s.append("circle").attr("cx",-sn).attr("cy",-sn).attr("r",Math.max(1/this.transformK*sn,.5)),s},r=>r.attr("transform",s=>`translate(${this.initXScale(s.x)}, ${this.initYScale(s.y)})`),r=>r.remove())});E(this,"drawChallengeSetScatter",()=>{const e=[];for(let s=0;s<this.challengeData.x.length;s++)e.push({source:this.challengeData.source[s],hyp:this.challengeData.hyp[s],x:this.challengeData.x[s],y:this.challengeData.y[s],name:`${this.challengeSet.fileName}-${s}`,isTrain:this.challengeData.train[s]===1,index:s});this.svg.select("g.content-top").append("g").attr("class","challenge-point-group").selectAll("g.challenge-point").data(e).join("g").attr("class","challenge-point").classed("train-sample",s=>!!s.isTrain).attr("transform",s=>`translate(${this.initXScale(s.x)}, ${this.initYScale(s.y)})`).style("stroke-width",lc).on("mouseenter",this.pointMouseenterHandler).on("mouseleave",this.pointMouseleaveHandler).append("circle").attr("cx",-sn).attr("cy",-sn).attr("r",Math.max(1/this.transformK*sn,.5))});E(this,"pointMouseenterHandler",(e,n)=>{if(e.target===null)return;yn!==null&&(window.clearTimeout(yn),yn=null);const i=()=>{const s=U.select(e.target).node().getBoundingClientRect(),o=s.y,a=s.x+s.width/2;n.hyp?this.tooltipStoreValue.html=`<div class='translate'>        <span>${n.source}</span>        <span class='arrow'></span>        <span>${n.hyp}</span></div>`:this.tooltipStoreValue.html=n.source,this.tooltipStoreValue.show=!0,this.tooltipStoreValue.maxWidth=400,this.tooltipStoreValue.top=o,this.tooltipStoreValue.left=a,this.tooltipStore.set(this.tooltipStoreValue)};yn=window.setTimeout(i,200)});E(this,"pointMouseleaveHandler",e=>{e.target!==null&&(this.tooltipStoreValue.show=!1,this.tooltipStore.set(this.tooltipStoreValue),yn!==null&&(window.clearTimeout(yn),yn=null))});E(this,"initZoom",()=>{const e=U.zoom().scaleExtent([1,40]).translateExtent([[0,0],[this.width+this.padding.left+this.padding.right,this.height+this.padding.top+this.padding.bottom]]).on("zoom",this.zoomed);this.svg.call(e);const n=this.svg.select("g.content"),i=this.svg.node().getBoundingClientRect(),r=(i.width-i.height)/2,s=U.zoomIdentity.translate(0,-r);this.svg.on("dblclick.zoom",null),n.on("dblclick.zoom",null),n.on("dblclick",()=>{this.svg.transition("reset").duration(750).ease(U.easeCubicInOut).call(o=>e.transform(o,s))}),this.backgroundContourPromise.then(()=>{this.svg.call(o=>e.transform(o,s))})});E(this,"zoomed",e=>{const n=e.transform;this.transformK=n.k;const i=this.svg.select("g.content");i.selectAll("g.daily-point").selectAll("circle").attr("r",Math.max(1/n.k*sn,.5)),i.selectAll("g.challenge-point").selectAll("circle").attr("r",Math.max(1/n.k*sn,.5)).style("stroke-width",Math.max(1/n.k*lc,.1)),i.attr("transform",n.toString()),this.xScale=n.rescaleX(this.xScale),this.yScale=n.rescaleY(this.yScale)});E(this,"subscribeStores",()=>{this.tooltipStore.subscribe(e=>{this.tooltipStoreValue=e}),this.timelineStore.subscribe(e=>{this.timelineStoreValue=e;const n=()=>{this.drawLogContour(this.timelineStoreValue.selectedDates)};this.contourMeta?n():this.backgroundContourPromise.then(()=>{n()})}),this.embeddingSettingStore.subscribe(e=>{this.embeddingSettingStoreValue=e;const n=new Set(this.embeddingSettingStoreValue.filteredIndexes);this.svg.select("g.content-top g.challenge-point-group").selectAll("g.challenge-point").classed("hide",i=>!n.has(i.index)),this.svg.select("g.contour-log").style("visibility",e.showLogContour?"unset":"hidden"),this.svg.select("g.content").selectAll(".challenge-point:not(.train-sample)").style("visibility",e.showLogSample?"unset":"hidden"),this.svg.select("g.content").selectAll("g.challenge-point.train-sample").style("visibility",e.showTrainSample?"unset":"hidden"),this.embeddingUpdated()})});this.component=e,this.challengeSet=n,this.challengeData=i,this.focusPosition=r,this.embeddingUpdated=s,this.svg=U.select(this.component).select("svg.embedding-svg"),this.svg.attr("width","100%").attr("height","100%").attr("viewbox","0 0 600 600").attr("preserveAspectRatio","none"),this.padding={top:1,bottom:1,left:1,right:1};const c=this.svg.node().getBoundingClientRect();this.width=c.width-this.padding.left-this.padding.right,this.height=c.height-this.padding.top-this.padding.bottom,this.width!==this.height&&(this.height=this.width);const u=this.svg.append("g").attr("class","content");u.append("g").attr("class","content-bottom"),u.append("g").attr("class","content-top"),this.backgroundDensityColorScale=U.interpolateHcl(Qe.colors["gray-50"],Qe.colors["blue-900"]),this.backgroundContourPromise=this.initBackgroundContour(),this.tooltipStore=o,this.tooltipStoreValue=Mn(),this.timelineStore=a,this.timelineStoreValue=cs(),this.embeddingSettingStore=l,this.embeddingSettingStoreValue=Hi(),this.subscribeStores(),this.backgroundContourPromise.then(()=>{this.drawChallengeSetScatter(),this.drawLogContour(["20220301"])}),this.initZoom(),this.initThumbnailBackgroundContour()}}const Aa=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 91 110" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-140,-394)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-contour">
                <g id="path-3" transform="matrix(0.0124177,0,0,0.0235171,-913.348,568.533)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
                <g id="path-2" transform="matrix(0.00841095,0,0,0.0159291,-912.324,570.293)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
                <g id="path-1" transform="matrix(0.00346681,0,0,0.0065656,-911.116,572.526)">
                    <path d="M331,285C289.667,315 250.167,325.167 212.5,315.5C174.833,305.833 156.333,281 157,241C157.667,201 183.833,153.5 235.5,98.5C287.167,43.5 326.333,53.333 353,128C379.667,202.667 372.333,255 331,285Z" style="fill-rule:nonzero;"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const Nt="src/components/embedding/Embedding.svelte";function Eo(t){let e,n,i,r,s;const o={c:function(){e=D("div"),n=D("div"),i=H(),r=D("div"),s=D("span"),s.textContent="Usage log sample",x(n,"class","circle log s-ovhWPbaoO3ET"),T(n,Nt,216,12,5096),x(e,"class","grid-item center s-ovhWPbaoO3ET"),T(e,Nt,215,10,5053),x(s,"class","label s-ovhWPbaoO3ET"),T(s,Nt,220,12,5188),x(r,"class","grid-item-"),T(r,Nt,219,10,5151)},m:function(l,c){et(l,e,c),S(e,n),et(l,i,c),et(l,r,c),S(r,s)},d:function(l){l&&nt(e),l&&nt(i),l&&nt(r)}};return it("SvelteRegisterBlock",{block:o,id:Eo.name,type:"if",source:"(215:8) {#if myEmbedding?.embeddingSettingStoreValue.showLogSample}",ctx:t}),o}function Lo(t){let e,n,i,r,s;const o={c:function(){e=D("div"),n=D("div"),i=H(),r=D("div"),s=D("span"),s.textContent="Training sample",x(n,"class","circle train s-ovhWPbaoO3ET"),T(n,Nt,226,12,5389),x(e,"class","grid-item center s-ovhWPbaoO3ET"),T(e,Nt,225,10,5346),x(s,"class","label s-ovhWPbaoO3ET"),T(s,Nt,230,12,5482),x(r,"class","grid-item s-ovhWPbaoO3ET"),T(r,Nt,229,10,5446)},m:function(l,c){et(l,e,c),S(e,n),et(l,i,c),et(l,r,c),S(r,s)},d:function(l){l&&nt(e),l&&nt(i),l&&nt(r)}};return it("SvelteRegisterBlock",{block:o,id:Lo.name,type:"if",source:"(225:8) {#if myEmbedding?.embeddingSettingStoreValue.showTrainSample}",ctx:t}),o}function Ao(t){let e,n,i,r;const s={c:function(){e=D("div"),n=D("span"),i=H(),r=D("span"),r.textContent="Usage log density",x(n,"class","svg-icon log s-ovhWPbaoO3ET"),T(n,Nt,246,12,5930),x(e,"class","grid-item center s-ovhWPbaoO3ET"),T(e,Nt,245,10,5887),x(r,"class","label s-ovhWPbaoO3ET"),T(r,Nt,250,10,6039)},m:function(a,l){et(a,e,l),S(e,n),n.innerHTML=Aa,et(a,i,l),et(a,r,l)},p:Tt,d:function(a){a&&nt(e),a&&nt(i),a&&nt(r)}};return it("SvelteRegisterBlock",{block:s,id:Ao.name,type:"if",source:"(245:8) {#if myEmbedding?.embeddingSettingStoreValue.showLogContour}",ctx:t}),s}function Po(t){var B,z,A;let e,n,i,r,s,o,a,l,c,u,f,h,d,g,b,v,y,w,m,p,_=((B=t[2])==null?void 0:B.embeddingSettingStoreValue.showLogSample)&&Eo(t),M=((z=t[2])==null?void 0:z.embeddingSettingStoreValue.showTrainSample)&&Lo(t),C=((A=t[2])==null?void 0:A.embeddingSettingStoreValue.showLogContour)&&Ao(t);y=new gh({props:{embeddingSettingStore:t[0]},$$inline:!0});const N={c:function(){e=D("div"),n=D("div"),i=D("div"),i.textContent="Sentence Embedding",r=H(),s=D("div"),o=D("div"),_&&_.c(),a=H(),M&&M.c(),l=H(),c=D("div"),u=D("span"),f=H(),h=D("div"),d=D("span"),d.textContent="Training density",g=H(),C&&C.c(),b=H(),v=D("div"),Pi(y.$$.fragment),w=H(),m=re("svg"),x(i,"class","embedding-title s-ovhWPbaoO3ET"),x(i,"data-content","Sentence Embedding"),T(i,Nt,209,4,4812),x(u,"class","svg-icon train s-ovhWPbaoO3ET"),T(u,Nt,235,10,5608),x(c,"class","grid-item center s-ovhWPbaoO3ET"),T(c,Nt,234,8,5567),x(d,"class","label s-ovhWPbaoO3ET"),T(d,Nt,241,10,5746),x(h,"class","grid-item s-ovhWPbaoO3ET"),T(h,Nt,240,8,5712),x(o,"class","legend-grid s-ovhWPbaoO3ET"),T(o,Nt,213,6,4949),x(s,"class","legend-panel s-ovhWPbaoO3ET"),T(s,Nt,212,4,4916),x(v,"class","control-panel"),T(v,Nt,280,4,6875),x(m,"class","embedding-svg s-ovhWPbaoO3ET"),T(m,Nt,283,4,6959),x(n,"class","embedding s-ovhWPbaoO3ET"),T(n,Nt,208,2,4784),x(e,"class","embedding-wrapper s-ovhWPbaoO3ET"),T(e,Nt,207,0,4728)},l:function(I){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(I,k){et(I,e,k),S(e,n),S(n,i),S(n,r),S(n,s),S(s,o),_&&_.m(o,null),S(o,a),M&&M.m(o,null),S(o,l),S(o,c),S(c,u),u.innerHTML=Aa,S(o,f),S(o,h),S(h,d),S(o,g),C&&C.m(o,null),S(n,b),S(n,v),Kn(y,v,null),S(n,w),S(n,m),t[8](e),p=!0},p:function(I,[k]){var O,q,G;(O=I[2])!=null&&O.embeddingSettingStoreValue.showLogSample?_||(_=Eo(I),_.c(),_.m(o,a)):_&&(_.d(1),_=null),(q=I[2])!=null&&q.embeddingSettingStoreValue.showTrainSample?M||(M=Lo(I),M.c(),M.m(o,l)):M&&(M.d(1),M=null),(G=I[2])!=null&&G.embeddingSettingStoreValue.showLogContour?C?C.p(I,k):(C=Ao(I),C.c(),C.m(o,null)):C&&(C.d(1),C=null);const V={};k&1&&(V.embeddingSettingStore=I[0]),y.$set(V)},i:function(I){p||(ee(y.$$.fragment,I),p=!0)},o:function(I){Ee(y.$$.fragment,I),p=!1},d:function(I){I&&nt(e),_&&_.d(),M&&M.d(),C&&C.d(),Hn(y),t[8](null)}};return it("SvelteRegisterBlock",{block:N,id:Po.name,type:"component",source:"",ctx:t}),N}function X5(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("Embedding",i,[]);let{tooltipStore:s=null}=e,{challengeSet:o=null}=e,{challengeData:a=null}=e,{focusPosition:l=null}=e,{embeddingSettingStore:c=null}=e;const u=Kr();let f=!1,h=null,d=!1,g=null;ln(()=>{n(7,f=!0)});const b=()=>{n(2,g)},v=()=>{f&&h&&s&&o&&a&&l&&c&&(d=!0,n(2,g=new cc({component:h,challengeSet:o,challengeData:a,focusPosition:l,embeddingUpdated:b,tooltipStore:s,timelineStore:u,embeddingSettingStore:c})))},y=["tooltipStore","challengeSet","challengeData","focusPosition","embeddingSettingStore"];Object.keys(e).forEach(m=>{!~y.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Embedding> was created with unknown prop '${m}'`)});function w(m){cn[m?"unshift":"push"](()=>{h=m,n(1,h)})}return t.$$set=m=>{"tooltipStore"in m&&n(3,s=m.tooltipStore),"challengeSet"in m&&n(4,o=m.challengeSet),"challengeData"in m&&n(5,a=m.challengeData),"focusPosition"in m&&n(6,l=m.focusPosition),"embeddingSettingStore"in m&&n(0,c=m.embeddingSettingStore)},t.$capture_state=()=>({onMount:ln,Filter:gh,Embedding:cc,getTimelineStore:Kr,iconContour:Aa,tooltipStore:s,challengeSet:o,challengeData:a,focusPosition:l,embeddingSettingStore:c,timelineStore:u,mounted:f,component:h,initialized:d,myEmbedding:g,embeddingUpdated:b,initView:v}),t.$inject_state=m=>{"tooltipStore"in m&&n(3,s=m.tooltipStore),"challengeSet"in m&&n(4,o=m.challengeSet),"challengeData"in m&&n(5,a=m.challengeData),"focusPosition"in m&&n(6,l=m.focusPosition),"embeddingSettingStore"in m&&n(0,c=m.embeddingSettingStore),"mounted"in m&&n(7,f=m.mounted),"component"in m&&n(1,h=m.component),"initialized"in m&&(d=m.initialized),"myEmbedding"in m&&n(2,g=m.myEmbedding)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&186&&f&&h&&s&&o&&a&&v()},[c,h,g,s,o,a,l,f,w]}class ph extends ri{constructor(e){super(e),ni(this,e,X5,Po,Cn,{tooltipStore:3,challengeSet:4,challengeData:5,focusPosition:6,embeddingSettingStore:0}),it("SvelteRegisterComponent",{component:this,tagName:"Embedding_1",options:e,id:Po.name})}get tooltipStore(){throw new Error("<Embedding>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tooltipStore(e){throw new Error("<Embedding>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengeSet(){throw new Error("<Embedding>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengeSet(e){throw new Error("<Embedding>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengeData(){throw new Error("<Embedding>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengeData(e){throw new Error("<Embedding>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get focusPosition(){throw new Error("<Embedding>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set focusPosition(e){throw new Error("<Embedding>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get embeddingSettingStore(){throw new Error("<Embedding>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set embeddingSettingStore(e){throw new Error("<Embedding>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const mh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 62 62" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-318,-282)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-edit" transform="matrix(0.0292011,0,0,0.0553024,-906.466,567.442)">
                <path d="M19.775,-7.861L60.547,-48.584L53.223,-55.908L12.451,-15.185L8.887,-6.348C8.496,-5.371 9.521,-4.199 10.596,-4.541L19.775,-7.861ZM64.111,-52.051L68.213,-56.152C70.313,-58.203 70.41,-60.449 68.555,-62.305L67.041,-63.867C65.186,-65.723 62.94,-65.527 60.84,-63.525L56.69,-59.424L64.111,-52.051Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,yh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 69 84" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-471,-118)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-download" transform="matrix(0.0292011,0,0,0.0553024,-902.027,559.05)">
                <path d="M22.217,5.469L66.016,5.469C74.365,5.469 78.467,1.367 78.467,-6.836L78.467,-44.385C78.467,-52.588 74.365,-56.69 66.016,-56.69L55.518,-56.69L55.518,-49.609L65.918,-49.609C69.385,-49.609 71.436,-47.705 71.436,-44.043L71.436,-7.178C71.436,-3.467 69.385,-1.611 65.918,-1.611L22.315,-1.611C18.799,-1.611 16.797,-3.467 16.797,-7.178L16.797,-44.043C16.797,-47.705 18.799,-49.609 22.315,-49.609L32.715,-49.609L32.715,-56.69L22.217,-56.69C13.916,-56.69 9.766,-52.588 9.766,-44.385L9.766,-6.836C9.766,1.367 13.916,5.469 22.217,5.469Z" style="fill-rule:nonzero;"/>
                <path d="M44.092,-20.02C45.02,-20.02 45.752,-20.313 46.631,-21.191L59.228,-33.252C59.912,-33.887 60.303,-34.619 60.303,-35.547C60.303,-37.353 58.935,-38.623 57.08,-38.623C56.25,-38.623 55.371,-38.281 54.736,-37.549L49.365,-31.738L47.315,-29.541L47.607,-35.352L47.607,-74.414C47.607,-76.269 45.996,-77.832 44.092,-77.832C42.236,-77.832 40.625,-76.269 40.625,-74.414L40.625,-35.352L40.918,-29.541L38.867,-31.738L33.496,-37.549C32.861,-38.281 31.934,-38.623 31.104,-38.623C29.248,-38.623 27.93,-37.353 27.93,-35.547C27.93,-34.619 28.32,-33.887 28.955,-33.252L41.553,-21.191C42.481,-20.313 43.213,-20.02 44.092,-20.02Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,bh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path></svg>',wh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 87 79" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-713,-118)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-checklist" transform="matrix(0.0292011,0,0,0.0553024,-894.956,558.862)">
                <path d="M54.883,-53.857L92.969,-53.857C94.775,-53.857 96.289,-55.273 96.289,-57.129C96.289,-58.984 94.775,-60.4 92.969,-60.4L54.883,-60.4C53.027,-60.4 51.563,-58.984 51.563,-57.129C51.563,-55.273 53.027,-53.857 54.883,-53.857ZM54.883,-9.912L92.969,-9.912C94.775,-9.912 96.289,-11.328 96.289,-13.184C96.289,-15.039 94.775,-16.455 92.969,-16.455L54.883,-16.455C53.027,-16.455 51.563,-15.039 51.563,-13.184C51.563,-11.328 53.027,-9.912 54.883,-9.912Z" style="fill-rule:nonzero;"/>
                <path d="M26.514,3.564C35.596,3.564 43.164,-4.102 43.164,-13.184C43.164,-22.315 35.596,-29.932 26.514,-29.932C17.334,-29.932 9.766,-22.315 9.766,-13.184C9.766,-4.102 17.383,3.564 26.514,3.564ZM26.514,-40.43C35.596,-40.43 43.164,-48.047 43.164,-57.129C43.164,-66.26 35.596,-73.877 26.514,-73.877C17.334,-73.877 9.766,-66.26 9.766,-57.129C9.766,-48.047 17.383,-40.43 26.514,-40.43ZM26.514,-2.783C20.85,-2.783 16.113,-7.568 16.113,-13.184C16.113,-18.799 20.898,-23.584 26.514,-23.584C32.08,-23.584 36.816,-18.799 36.816,-13.184C36.816,-7.568 32.08,-2.783 26.514,-2.783ZM24.512,-48.291C23.633,-48.291 23.047,-48.779 22.412,-49.463L18.311,-54.443C17.969,-54.932 17.822,-55.42 17.822,-56.103C17.822,-57.275 18.701,-58.203 19.824,-58.203C20.606,-58.203 21.143,-57.91 21.729,-57.129L24.414,-53.613L30.957,-64.16C31.397,-64.941 32.031,-65.332 32.813,-65.332C33.936,-65.332 34.912,-64.453 34.912,-63.379C34.912,-62.842 34.766,-62.353 34.375,-61.719L26.66,-49.463C26.172,-48.731 25.391,-48.291 24.512,-48.291Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`,vh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-469,-404)">
        <g transform="matrix(34.2453,0,0,18.0824,31351.5,-9912.83)">
            <g id="icon-delete" transform="matrix(0.0292011,0,0,0.0553024,-901.949,575.088)">
                <path d="M24.756,2.393L61.67,2.393C66.553,2.393 69.336,-0.098 69.531,-5.078L71.826,-60.156L77.246,-60.156C79.053,-60.156 80.469,-61.621 80.469,-63.428C80.469,-65.234 79.053,-66.699 77.246,-66.699L9.082,-66.699C7.373,-66.699 5.859,-65.234 5.859,-63.428C5.859,-61.621 7.373,-60.156 9.082,-60.156L14.6,-60.156L16.895,-5.078C17.09,-0.098 19.824,2.393 24.756,2.393ZM25.635,-65.478L33.594,-65.478L33.594,-71.826C33.594,-73.535 34.766,-74.707 36.572,-74.707L49.756,-74.707C51.563,-74.707 52.734,-73.535 52.734,-71.826L52.734,-65.478L60.596,-65.478L60.596,-72.315C60.596,-78.369 56.592,-82.129 50.244,-82.129L35.986,-82.129C29.639,-82.129 25.635,-78.369 25.635,-72.315L25.635,-65.478ZM43.164,-8.545C41.553,-8.545 40.381,-9.57 40.381,-11.084L40.381,-52.051C40.381,-53.516 41.553,-54.59 43.164,-54.59C44.824,-54.59 45.947,-53.516 45.947,-52.051L45.947,-11.084C45.947,-9.57 44.824,-8.545 43.164,-8.545ZM30.957,-8.545C29.395,-8.545 28.32,-9.521 28.272,-11.084L27.197,-52.051C27.148,-53.565 28.223,-54.59 29.883,-54.59C31.397,-54.59 32.52,-53.565 32.568,-52.051L33.643,-11.084C33.691,-9.57 32.617,-8.545 30.957,-8.545ZM55.42,-8.545C53.76,-8.545 52.686,-9.57 52.734,-11.084L53.809,-52.051C53.857,-53.565 54.932,-54.59 56.494,-54.59C58.154,-54.59 59.228,-53.516 59.18,-52.051L58.106,-11.084C58.057,-9.521 56.934,-8.545 55.42,-8.545Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{console:uc}=Lc,j="src/components/set-view/SetView.svelte";function hc(t,e,n){const i=t.slice();return i[41]=e[n],i[42]=e,i[43]=n,i}function fc(t,e,n){const i=t.slice();return i[44]=e[n],i}function dc(t,e,n){const i=t.slice();return i[47]=e[n],i}function gc(t,e,n){const i=t.slice();return i[44]=e[n],i}function pc(t,e,n){const i=t.slice();return i[47]=e[n],i}function mc(t,e,n){const i=t.slice();return i[54]=e[n],i}function yc(t,e,n){const i=t.slice();return i[57]=e[n],i}function zo(t){let e,n,i=t[57].displayName+"",r,s,o,a=t[10](t[1],t[57].key)+"",l,c,u,f;function h(...b){return t[15](t[57],...b)}function d(...b){return t[16](t[57],...b)}const g={c:function(){e=D("div"),n=D("span"),r=Ct(i),s=H(),o=D("span"),l=Ct(a),c=H(),x(n,"class","s-yMTDKkqMY6aC"),T(n,j,882,10,21829),x(o,"class","s-yMTDKkqMY6aC"),T(o,j,883,10,21873),x(e,"class","stat-item s-yMTDKkqMY6aC"),T(e,j,877,8,21636)},m:function(v,y){et(v,e,y),S(e,n),S(n,r),S(e,s),S(e,o),S(o,l),S(e,c),u||(f=[yt(e,"mouseenter",h,!1,!1,!1,!1),yt(e,"mouseleave",d,!1,!1,!1,!1)],u=!0)},p:function(v,y){t=v,y[0]&2&&a!==(a=t[10](t[1],t[57].key)+"")&&Ut(l,a)},d:function(v){v&&nt(e),u=!1,Ht(f)}};return it("SvelteRegisterBlock",{block:g,id:zo.name,type:"each",source:"(877:6) {#each headers as header}",ctx:t}),g}function _h(t){let e,n,i;const r={c:function(){e=D("span"),x(e,"class","svg-icon icon-info s-yMTDKkqMY6aC"),T(e,j,907,10,22547)},m:function(o,a){et(o,e,a),e.innerHTML=Zi,n||(i=[yt(e,"mouseenter",t[18],!1,!1,!1,!1),yt(e,"mouseleave",t[19],!1,!1,!1,!1)],n=!0)},p:Tt,d:function(o){o&&nt(e),n=!1,Ht(i)}};return it("SvelteRegisterBlock",{block:r,id:_h.name,type:"else",source:"(907:8) {:else}",ctx:t}),r}function Sh(t){let e,n=t[5].filterTags;Et(n);let i=[];for(let s=0;s<n.length;s+=1)i[s]=Oo(mc(t,n,s));const r={c:function(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gi()},m:function(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);et(o,e,a)},p:function(o,a){if(a[0]&32){n=o[5].filterTags,Et(n);let l;for(l=0;l<n.length;l+=1){const c=mc(o,n,l);i[l]?i[l].p(c,a):(i[l]=Oo(c),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d:function(o){Ae(i,o),o&&nt(e)}};return it("SvelteRegisterBlock",{block:r,id:Sh.name,type:"if",source:"(895:8) {#if mySetView && mySetView.filterTags.length > 0}",ctx:t}),r}function Oo(t){let e,n,i=t[54].message+"",r,s,o,a,l,c;function u(){return t[17](t[54])}const f={c:function(){e=D("div"),n=D("span"),r=Ct(i),s=H(),o=D("span"),a=H(),T(n,j,897,14,22267),x(o,"class","svg-icon s-yMTDKkqMY6aC"),T(o,j,898,14,22308),x(e,"class","filter-item s-yMTDKkqMY6aC"),T(e,j,896,12,22227)},m:function(d,g){et(d,e,g),S(e,n),S(n,r),S(e,s),S(e,o),o.innerHTML=bh,S(e,a),l||(c=yt(o,"click",u,!1,!1,!1,!1),l=!0)},p:function(d,g){t=d,g[0]&32&&i!==(i=t[54].message+"")&&Ut(r,i)},d:function(d){d&&nt(e),l=!1,c()}};return it("SvelteRegisterBlock",{block:f,id:Oo.name,type:"each",source:"(896:10) {#each mySetView.filterTags as tag}",ctx:t}),f}function kh(t){let e;const n={c:function(){e=re("svg"),x(e,"class","focus-svg s-yMTDKkqMY6aC"),T(e,j,986,16,25364)},m:function(r,s){et(r,e,s)},p:Tt,i:Tt,o:Tt,d:function(r){r&&nt(e)}};return it("SvelteRegisterBlock",{block:n,id:kh.name,type:"else",source:"(986:14) {:else}",ctx:t}),n}function xh(t){let e,n,i,r,s,o,a=t[5]&&Io(t);const l={c:function(){e=re("svg"),n=H(),i=D("div"),r=D("div"),r.textContent="Most Representative Keywords",s=H(),o=D("div"),a&&a.c(),x(e,"class","focus-svg s-yMTDKkqMY6aC"),Qo(e,"display","none"),T(e,j,962,16,24293),x(r,"class","name s-yMTDKkqMY6aC"),T(r,j,964,18,24403),x(o,"class","keyword-wrapper s-yMTDKkqMY6aC"),T(o,j,965,18,24474),x(i,"class","keyword-grid s-yMTDKkqMY6aC"),T(i,j,963,16,24358)},m:function(u,f){et(u,e,f),et(u,n,f),et(u,i,f),S(i,r),S(i,s),S(i,o),a&&a.m(o,null)},p:function(u,f){u[5]?a?a.p(u,f):(a=Io(u),a.c(),a.m(o,null)):a&&(a.d(1),a=null)},i:Tt,o:Tt,d:function(u){u&&nt(e),u&&nt(n),u&&nt(i),a&&a.d()}};return it("SvelteRegisterBlock",{block:l,id:xh.name,type:"if",source:"(962:34) ",ctx:t}),l}function Mh(t){let e,n,i,r;i=new ph({props:{tooltipStore:t[0],challengeSet:t[1],challengeData:t[2],embeddingSettingStore:t[8],focusPosition:t[44]},$$inline:!0});const s={c:function(){e=re("svg"),n=H(),Pi(i.$$.fragment),x(e,"class","focus-svg s-yMTDKkqMY6aC"),Qo(e,"display","none"),T(e,j,953,16,23967)},m:function(a,l){et(a,e,l),et(a,n,l),Kn(i,a,l),r=!0},p:function(a,l){const c={};l[0]&1&&(c.tooltipStore=a[0]),l[0]&2&&(c.challengeSet=a[1]),l[0]&4&&(c.challengeData=a[2]),i.$set(c)},i:function(a){r||(ee(i.$$.fragment,a),r=!0)},o:function(a){Ee(i.$$.fragment,a),r=!1},d:function(a){a&&nt(e),a&&nt(n),Hn(i,a)}};return it("SvelteRegisterBlock",{block:s,id:Mh.name,type:"if",source:"(953:14) {#if pos === 1}",ctx:t}),s}function Io(t){let e,n=t[5].curKeywords;Et(n);let i=[];for(let s=0;s<n.length;s+=1)i[s]=Uo(pc(t,n,s));const r={c:function(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gi()},m:function(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);et(o,e,a)},p:function(o,a){if(a[0]&544){n=o[5].curKeywords,Et(n);let l;for(l=0;l<n.length;l+=1){const c=pc(o,n,l);i[l]?i[l].p(c,a):(i[l]=Uo(c),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d:function(o){Ae(i,o),o&&nt(e)}};return it("SvelteRegisterBlock",{block:r,id:Io.name,type:"if",source:"(967:20) {#if mySetView}",ctx:t}),r}function Uo(t){let e,n=t[47].word+"",i,r,s,o,a,l;function c(...f){return t[25](t[47],...f)}const u={c:function(){var h;e=D("div"),i=Ct(n),r=H(),x(e,"class","keyword s-yMTDKkqMY6aC"),x(e,"style",s=`background-color: ${t[47].color};`),x(e,"title",o=`${t[47].word}, c-TF-IDF: ${t[9](t[47].value)}`),lt(e,"selected",(h=t[5])==null?void 0:h.curSelectedKeywords.has(t[47].word)),T(e,j,968,24,24627)},m:function(h,d){et(h,e,d),S(e,i),S(e,r),a||(l=yt(e,"click",c,!1,!1,!1,!1),a=!0)},p:function(h,d){var g;t=h,d[0]&32&&n!==(n=t[47].word+"")&&Ut(i,n),d[0]&32&&s!==(s=`background-color: ${t[47].color};`)&&x(e,"style",s),d[0]&32&&o!==(o=`${t[47].word}, c-TF-IDF: ${t[9](t[47].value)}`)&&x(e,"title",o),d[0]&32&&lt(e,"selected",(g=t[5])==null?void 0:g.curSelectedKeywords.has(t[47].word))},d:function(h){h&&nt(e),a=!1,l()}};return it("SvelteRegisterBlock",{block:u,id:Uo.name,type:"each",source:"(968:22) {#each mySetView.curKeywords as keyword}",ctx:t}),u}function Bo(t){let e,n,i,r,s,o,a,l,c;function u(...b){return t[23](t[44],...b)}const f=[Mh,xh,kh],h=[];function d(b,v){return b[44]===1?0:b[44]===0?1:2}r=d(t),s=h[r]=f[r](t);const g={c:function(){var v;e=D("div"),n=D("span"),i=H(),s.c(),o=H(),x(n,"class","svg-icon icon-info s-yMTDKkqMY6aC"),lt(n,"embedding-info",t[44]===1),T(n,j,943,14,23562),x(e,"class","vis-focus-plot s-yMTDKkqMY6aC"),x(e,"id",`focus-${t[44]}`),lt(e,"shown",((v=t[5])==null?void 0:v.curSelectedThumbnailID)===t[44]),T(e,j,938,12,23388)},m:function(v,y){et(v,e,y),S(e,n),n.innerHTML=Zi,S(e,i),h[r].m(e,null),S(e,o),a=!0,l||(c=[yt(n,"mouseenter",u,!1,!1,!1,!1),yt(n,"mouseleave",t[24],!1,!1,!1,!1)],l=!0)},p:function(v,y){var w;t=v,s.p(t,y),(!a||y[0]&32)&&lt(e,"shown",((w=t[5])==null?void 0:w.curSelectedThumbnailID)===t[44])},i:function(v){a||(ee(s),a=!0)},o:function(v){Ee(s),a=!1},d:function(v){v&&nt(e),h[r].d(),l=!1,Ht(c)}};return it("SvelteRegisterBlock",{block:g,id:Bo.name,type:"each",source:"(938:10) {#each [0, 1, 2, 3, 4, 5] as pos}",ctx:t}),g}function Ch(t){let e;const n={c:function(){e=re("svg"),x(e,"class","thumbnail-svg s-yMTDKkqMY6aC"),T(e,j,1015,18,26353)},m:function(r,s){et(r,e,s)},p:Tt,d:function(r){r&&nt(e)}};return it("SvelteRegisterBlock",{block:n,id:Ch.name,type:"else",source:"(1015:16) {:else}",ctx:t}),n}function Th(t){let e,n,i,r=t[5]&&Vo(t);const s={c:function(){e=re("svg"),n=H(),i=D("div"),r&&r.c(),x(e,"class","thumbnail-svg s-yMTDKkqMY6aC"),Qo(e,"visibility","hidden"),T(e,j,1004,18,25905),x(i,"class","keyword-thumbnail s-yMTDKkqMY6aC"),T(i,j,1005,18,25981)},m:function(a,l){et(a,e,l),et(a,n,l),et(a,i,l),r&&r.m(i,null)},p:function(a,l){a[5]?r?r.p(a,l):(r=Vo(a),r.c(),r.m(i,null)):r&&(r.d(1),r=null)},d:function(a){a&&nt(e),a&&nt(n),a&&nt(i),r&&r.d()}};return it("SvelteRegisterBlock",{block:s,id:Th.name,type:"if",source:"(1004:16) {#if pos === 0}",ctx:t}),s}function Vo(t){let e,n=t[5].curKeywords;Et(n);let i=[];for(let s=0;s<n.length;s+=1)i[s]=Ro(dc(t,n,s));const r={c:function(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gi()},m:function(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);et(o,e,a)},p:function(o,a){if(a[0]&32){n=o[5].curKeywords,Et(n);let l;for(l=0;l<n.length;l+=1){const c=dc(o,n,l);i[l]?i[l].p(c,a):(i[l]=Ro(c),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d:function(o){Ae(i,o),o&&nt(e)}};return it("SvelteRegisterBlock",{block:r,id:Vo.name,type:"if",source:"(1007:20) {#if mySetView}",ctx:t}),r}function Ro(t){let e,n=t[47].word+"",i,r;const s={c:function(){e=D("div"),i=Ct(n),r=H(),x(e,"class","keyword s-yMTDKkqMY6aC"),T(e,j,1008,24,26136)},m:function(a,l){et(a,e,l),S(e,i),S(e,r)},p:function(a,l){l[0]&32&&n!==(n=a[47].word+"")&&Ut(i,n)},d:function(a){a&&nt(e)}};return it("SvelteRegisterBlock",{block:s,id:Ro.name,type:"each",source:"(1008:22) {#each mySetView.curKeywords as keyword}",ctx:t}),s}function Fo(t){let e,n,i,r,s,o,a;function l(d,g){return d[44]===0?Th:Ch}let u=l(t)(t);function f(...d){return t[26](t[44],...d)}const h={c:function(){var g;e=D("div"),n=D("div"),u.c(),i=H(),r=D("div"),r.textContent="\xA0",s=H(),x(n,"class","thumbnail-vis s-yMTDKkqMY6aC"),lt(n,"selected",((g=t[5])==null?void 0:g.curSelectedThumbnailID)===t[44]),T(n,j,999,14,25721),x(r,"class","vis-label s-yMTDKkqMY6aC"),T(r,j,1018,14,26440),x(e,"class","thumbnail s-yMTDKkqMY6aC"),x(e,"id",`thumbnail-${t[44]}`),T(e,j,994,12,25552)},m:function(g,b){et(g,e,b),S(e,n),u.m(n,null),S(e,i),S(e,r),S(e,s),o||(a=yt(e,"click",f,!1,!1,!1,!1),o=!0)},p:function(g,b){var v;t=g,u.p(t,b),b[0]&32&&lt(n,"selected",((v=t[5])==null?void 0:v.curSelectedThumbnailID)===t[44])},d:function(g){g&&nt(e),u.d(),o=!1,a()}};return it("SvelteRegisterBlock",{block:h,id:Fo.name,type:"each",source:"(994:10) {#each [0, 1, 2, 3, 4, 5] as pos}",ctx:t}),h}function qo(t){let e,n=t[5].curSentences;Et(n);let i=[];for(let s=0;s<n.length;s+=1)i[s]=Yo(hc(t,n,s));const r={c:function(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gi()},m:function(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);et(o,e,a)},p:function(o,a){if(a[0]&48){n=o[5].curSentences,Et(n);let l;for(l=0;l<n.length;l+=1){const c=hc(o,n,l);i[l]?i[l].p(c,a):(i[l]=Yo(c),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d:function(o){Ae(i,o),o&&nt(e)}};return it("SvelteRegisterBlock",{block:r,id:qo.name,type:"if",source:"(1053:10) {#if mySetView !== null}",ctx:t}),r}function Yo(t){var w;let e,n,i,r=((w=t[5])==null?void 0:w.displaySource(t[41]))+"",s,o,a,l,c,u=(t[41].hyp===null?"[translation not available]":t[41].hyp)+"",f,h,d,g;function b(...m){return t[28](t[41],...m)}function v(){return t[29](t[41],t[42],t[43])}const y={c:function(){var p,_;e=D("div"),n=D("div"),i=D("div"),s=H(),o=D("div"),a=D("span"),l=H(),c=D("div"),f=Ct(u),h=H(),x(i,"class","sentence-wrapper"),T(i,j,1063,18,27977),x(a,"class","svg-icon s-yMTDKkqMY6aC"),T(a,j,1090,20,29055),x(o,"class","delete-button s-yMTDKkqMY6aC"),lt(o,"shown",(p=t[5])==null?void 0:p.editMode),T(o,j,1066,18,28114),x(n,"class","sentence-source s-yMTDKkqMY6aC"),T(n,j,1062,16,27929),x(c,"class","sentence-hyp s-yMTDKkqMY6aC"),lt(c,"shown",t[41].showHyp),T(c,j,1093,16,29168),x(e,"class","sentence-row show-source s-yMTDKkqMY6aC"),lt(e,"log",t[41].type==="log"),lt(e,"edit-mode",(_=t[5])==null?void 0:_.editMode),T(e,j,1054,14,27628)},m:function(p,_){et(p,e,_),S(e,n),S(n,i),i.innerHTML=r,S(n,s),S(n,o),S(o,a),a.innerHTML=vh,S(e,l),S(e,c),S(c,f),S(e,h),d||(g=[yt(o,"click",b,!1,!1,!1,!1),yt(e,"click",v,!1,!1,!1,!1)],d=!0)},p:function(p,_){var M,C,N;t=p,_[0]&32&&r!==(r=((M=t[5])==null?void 0:M.displaySource(t[41]))+"")&&(i.innerHTML=r),_[0]&32&&lt(o,"shown",(C=t[5])==null?void 0:C.editMode),_[0]&32&&u!==(u=(t[41].hyp===null?"[translation not available]":t[41].hyp)+"")&&Ut(f,u),_[0]&32&&lt(c,"shown",t[41].showHyp),_[0]&32&&lt(e,"log",t[41].type==="log"),_[0]&32&&lt(e,"edit-mode",(N=t[5])==null?void 0:N.editMode)},d:function(p){p&&nt(e),d=!1,Ht(g)}};return it("SvelteRegisterBlock",{block:y,id:Yo.name,type:"each",source:"(1054:12) {#each mySetView.curSentences as sentence}",ctx:t}),y}function Ko(t){var tr,It;let e,n,i,r,s,o,a=(t[1]===null?"Challenge Set":t[1].displayName)+"",l,c,u,f,h,d,g,b,v,y,w,m,p,_,M,C,N,B,z,A,Y,I,k,V,O,q,G,K,W,Q,J,gt,ut,st,dt,ct,R,F,$,L,P,pt=((tr=t[5])==null?void 0:tr.logCount)+"",ft,_t,St,Z,rt=((It=t[5])==null?void 0:It.trainingCount)+"",Dt,zt,Je,tn,Bt,ue,Be,se,Xt,oe,Qt,ne,he,ci,ae,Me,fe,ui,Zt,Vt,de,en,ge=t[6];Et(ge);let xt=[];for(let wt=0;wt<ge.length;wt+=1)xt[wt]=zo(yc(t,ge,wt));function hi(wt,Mt){return wt[5]&&wt[5].filterTags.length>0?Sh:_h}let pe=hi(t),ie=pe(t),me=[0,1,2,3,4,5];Et(me);let kt=[];for(let wt=0;wt<6;wt+=1)kt[wt]=Bo(gc(t,me,wt));const Ji=wt=>Ee(kt[wt],1,1,()=>{kt[wt]=null});let Ve=[0,1,2,3,4,5];Et(Ve);let Jt=[];for(let wt=0;wt<6;wt+=1)Jt[wt]=Fo(fc(t,Ve,wt));let Rt=t[5]!==null&&qo(t);const Ot={c:function(){var Mt;e=D("div"),n=D("div"),i=D("div"),r=D("div"),s=H(),o=D("div"),l=Ct(a),c=H(),u=D("div"),f=H(),h=D("div");for(let ot=0;ot<xt.length;ot+=1)xt[ot].c();d=H(),g=D("div"),b=D("div"),v=D("div"),y=D("span"),y.textContent="Filters",w=H(),ie.c(),m=H(),p=D("div"),_=D("span"),M=H(),C=D("span"),C.textContent="Export",N=H(),B=D("div"),z=re("svg"),A=H(),Y=D("div"),I=D("div"),k=D("div");for(let ot=0;ot<6;ot+=1)kt[ot].c();V=H(),O=D("div");for(let ot=0;ot<6;ot+=1)Jt[ot].c();q=H(),G=D("div"),K=D("div"),W=D("div"),Q=D("span"),J=H(),gt=D("input"),ut=H(),st=D("div"),dt=D("span"),ct=H(),R=D("span"),R.textContent="Edit",F=H(),$=D("div"),L=D("div"),P=D("span"),ft=Ct(pt),_t=Ct(" usage log samples"),St=H(),Z=D("span"),Dt=Ct(rt),zt=Ct(" training samples"),Je=H(),Rt&&Rt.c(),tn=H(),Bt=D("dialog"),ue=D("div"),Be=D("div"),Be.textContent="Are you sure you want to delete this sentence?",se=H(),Xt=D("div"),Xt.textContent="This action is irreversible!",oe=H(),Qt=D("div"),ne=D("input"),he=D("label"),he.textContent="Don't warn me again",ci=H(),ae=D("form"),Me=D("menu"),fe=D("button"),fe.textContent="Cancel",ui=H(),Zt=D("button"),Zt.textContent="Delete",x(r,"class","svg-icon back-icon s-yMTDKkqMY6aC"),T(r,j,864,6,21220),x(o,"class","name s-yMTDKkqMY6aC"),x(o,"contenteditable","true"),T(o,j,868,6,21344),x(u,"class","svg-icon edit-icon s-yMTDKkqMY6aC"),T(u,j,871,6,21482),x(i,"class","left-content s-yMTDKkqMY6aC"),T(i,j,863,4,21187),x(h,"class","right-content s-yMTDKkqMY6aC"),T(h,j,875,4,21568),x(n,"class","header s-yMTDKkqMY6aC"),T(n,j,862,2,21162),x(y,"class","filter-name s-yMTDKkqMY6aC"),T(y,j,892,8,22068),x(v,"class","filter-left s-yMTDKkqMY6aC"),T(v,j,891,6,22034),x(_,"class","svg-icon s-yMTDKkqMY6aC"),T(_,j,923,8,23047),T(C,j,926,8,23126),x(p,"class","filter-right s-yMTDKkqMY6aC"),T(p,j,917,6,22825),x(b,"class","filter s-yMTDKkqMY6aC"),T(b,j,890,4,22007),x(z,"class","timeline-svg s-yMTDKkqMY6aC"),T(z,j,931,6,23204),x(B,"class","timeline s-yMTDKkqMY6aC"),T(B,j,930,4,23175),x(k,"class","vis-focus s-yMTDKkqMY6aC"),T(k,j,936,8,23308),x(O,"class","vis-others s-yMTDKkqMY6aC"),T(O,j,992,8,25471),x(I,"class","vis-block s-yMTDKkqMY6aC"),T(I,j,935,6,23276),x(Q,"class","svg-icon s-yMTDKkqMY6aC"),T(Q,j,1027,12,26654),x(gt,"class","search-bar-input s-yMTDKkqMY6aC"),x(gt,"type","text"),x(gt,"id","input-search"),x(gt,"placeholder","Type to search..."),T(gt,j,1028,12,26715),x(W,"class","search-bar s-yMTDKkqMY6aC"),T(W,j,1026,10,26617),x(dt,"class","svg-icon s-yMTDKkqMY6aC"),T(dt,j,1041,12,27127),T(R,j,1042,12,27186),x(st,"class","edit-button s-yMTDKkqMY6aC"),lt(st,"edit-mode",(Mt=t[5])==null?void 0:Mt.editMode),T(st,j,1036,10,26968),x(K,"class","top-bar s-yMTDKkqMY6aC"),T(K,j,1025,8,26585),x(P,"class","log s-yMTDKkqMY6aC"),T(P,j,1047,12,27331),x(Z,"class","train s-yMTDKkqMY6aC"),T(Z,j,1048,12,27408),x(L,"id","sentence-list-count-label"),x(L,"class","s-yMTDKkqMY6aC"),T(L,j,1046,10,27282),x($,"class","sentence-list s-yMTDKkqMY6aC"),T($,j,1045,8,27244),x(G,"class","sentence-block s-yMTDKkqMY6aC"),T(G,j,1024,6,26548),x(Y,"class","detail s-yMTDKkqMY6aC"),T(Y,j,934,4,23249),x(g,"class","content s-yMTDKkqMY6aC"),T(g,j,889,2,21981),x(e,"class","set-view-wrapper s-yMTDKkqMY6aC"),T(e,j,861,0,21107),x(Be,"class","primary s-yMTDKkqMY6aC"),T(Be,j,1109,4,29568),x(Xt,"class","secondary s-yMTDKkqMY6aC"),T(Xt,j,1110,4,29646),x(ue,"class","content s-yMTDKkqMY6aC"),T(ue,j,1108,2,29542),x(ne,"id","warn-checkbox"),x(ne,"type","checkbox"),x(ne,"class","s-yMTDKkqMY6aC"),T(ne,j,1113,4,29747),x(he,"for","warn-checkbox"),T(he,j,1117,6,29848),x(Qt,"class","checkbox-menu s-yMTDKkqMY6aC"),T(Qt,j,1112,2,29715),fe.value="cancel",x(fe,"class","s-yMTDKkqMY6aC"),T(fe,j,1121,6,29967),Zt.value="delete",x(Zt,"class","action s-yMTDKkqMY6aC"),T(Zt,j,1122,6,30012),x(Me,"class","menu s-yMTDKkqMY6aC"),T(Me,j,1120,4,29941),x(ae,"method","dialog"),T(ae,j,1119,2,29914),x(Bt,"class","delete-alert s-yMTDKkqMY6aC"),T(Bt,j,1107,0,29491)},l:function(Mt){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(Mt,ot){et(Mt,e,ot),S(e,n),S(n,i),S(i,r),r.innerHTML=$i,S(i,s),S(i,o),S(o,l),S(i,c),S(i,u),u.innerHTML=mh,S(n,f),S(n,h);for(let at=0;at<xt.length;at+=1)xt[at]&&xt[at].m(h,null);S(e,d),S(e,g),S(g,b),S(b,v),S(v,y),S(v,w),ie.m(v,null),S(b,m),S(b,p),S(p,_),_.innerHTML=yh,S(p,M),S(p,C),S(g,N),S(g,B),S(B,z),S(g,A),S(g,Y),S(Y,I),S(I,k);for(let at=0;at<6;at+=1)kt[at]&&kt[at].m(k,null);S(I,V),S(I,O);for(let at=0;at<6;at+=1)Jt[at]&&Jt[at].m(O,null);S(Y,q),S(Y,G),S(G,K),S(K,W),S(W,Q),Q.innerHTML=us,S(W,J),S(W,gt),S(K,ut),S(K,st),S(st,dt),dt.innerHTML=wh,S(st,ct),S(st,R),S(G,F),S(G,$),S($,L),S(L,P),S(P,ft),S(P,_t),S(L,St),S(L,Z),S(Z,Dt),S(Z,zt),S($,Je),Rt&&Rt.m($,null),t[30](e),et(Mt,tn,ot),et(Mt,Bt,ot),S(Bt,ue),S(ue,Be),S(ue,se),S(ue,Xt),S(Bt,oe),S(Bt,Qt),S(Qt,ne),S(Qt,he),S(Bt,ci),S(Bt,ae),S(ae,Me),S(Me,fe),S(Me,ui),S(Me,Zt),t[32](Bt),Vt=!0,de||(en=[yt(r,"click",t[14],!1,!1,!1,!1),yt(p,"mouseenter",t[20],!1,!1,!1,!1),yt(p,"mouseleave",t[21],!1,!1,!1,!1),yt(p,"click",t[22],!1,!1,!1,!1),yt(gt,"input",t[27],!1,!1,!1,!1),yt(st,"click",function(){var at,nn;Gr((at=t[5])==null?void 0:at.editClicked())&&((nn=t[5])==null||nn.editClicked().apply(this,arguments))},!1,!1,!1,!1),yt(ne,"input",t[31],!1,!1,!1,!1)],de=!0)},p:function(Mt,ot){var at,nn,fi;if(t=Mt,(!Vt||ot[0]&2)&&a!==(a=(t[1]===null?"Challenge Set":t[1].displayName)+"")&&ef(l,a),ot[0]&1122){ge=t[6],Et(ge);let ht;for(ht=0;ht<ge.length;ht+=1){const rn=yc(t,ge,ht);xt[ht]?xt[ht].p(rn,ot):(xt[ht]=zo(rn),xt[ht].c(),xt[ht].m(h,null))}for(;ht<xt.length;ht+=1)xt[ht].d(1);xt.length=ge.length}if(pe===(pe=hi(t))&&ie?ie.p(t,ot):(ie.d(1),ie=pe(t),ie&&(ie.c(),ie.m(v,null))),ot[0]&935){me=[0,1,2,3,4,5],Et(me);let ht;for(ht=0;ht<6;ht+=1){const rn=gc(t,me,ht);kt[ht]?(kt[ht].p(rn,ot),ee(kt[ht],1)):(kt[ht]=Bo(rn),kt[ht].c(),ee(kt[ht],1),kt[ht].m(k,null))}for(Nc(),ht=6;ht<6;ht+=1)Ji(ht);Ec()}if(ot[0]&32){Ve=[0,1,2,3,4,5],Et(Ve);let ht;for(ht=0;ht<6;ht+=1){const rn=fc(t,Ve,ht);Jt[ht]?Jt[ht].p(rn,ot):(Jt[ht]=Fo(rn),Jt[ht].c(),Jt[ht].m(O,null))}for(;ht<6;ht+=1)Jt[ht].d(1)}(!Vt||ot[0]&32)&&lt(st,"edit-mode",(at=t[5])==null?void 0:at.editMode),(!Vt||ot[0]&32)&&pt!==(pt=((nn=t[5])==null?void 0:nn.logCount)+"")&&Ut(ft,pt),(!Vt||ot[0]&32)&&rt!==(rt=((fi=t[5])==null?void 0:fi.trainingCount)+"")&&Ut(Dt,rt),t[5]!==null?Rt?Rt.p(t,ot):(Rt=qo(t),Rt.c(),Rt.m($,null)):Rt&&(Rt.d(1),Rt=null)},i:function(Mt){if(!Vt){for(let ot=0;ot<6;ot+=1)ee(kt[ot]);Vt=!0}},o:function(Mt){kt=kt.filter(Boolean);for(let ot=0;ot<6;ot+=1)Ee(kt[ot]);Vt=!1},d:function(Mt){Mt&&nt(e),Ae(xt,Mt),ie.d(),Ae(kt,Mt),Ae(Jt,Mt),Rt&&Rt.d(),t[30](null),Mt&&nt(tn),Mt&&nt(Bt),t[32](null),de=!1,Ht(en)}};return it("SvelteRegisterBlock",{block:Ot,id:Ko.name,type:"component",source:"",ctx:t}),Ot}const Q5=!1;function Z5(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("SetView",i,[]);let{tooltipStore:s=null}=e,{challengeStore:o}=e;const a=[{displayName:"Log Count",key:mt.logCount},{displayName:"Familiarity",key:mt.familiarity},{displayName:"Train Count",key:mt.trainCount},{displayName:"ChrF",key:mt.chrf},{displayName:"Train Ratio",key:mt.trainLogRatio}],l=["keyword","embedding","chrf","familiarity","sourceid","test"];let c=!1,u=null,f=null,h=!1,d=null,g=null,b=null,v=Ze();const y=nc();o.subscribe(L=>{v=L});const w=Kr(),m=U.format(".2f"),p=U.format(".4f"),_=()=>{n(5,d)},M=()=>{if(v.challengeData===void 0||v.challengeSet===void 0){console.error("challengeStoreValue is not updated before constructing the set view");return}n(1,g=v.challengeSet),n(2,b=v.challengeData)},C=async()=>{const L="challenge-topic-5_views_4m_9m_ago",P=await U.json(`/data/challenge-set/${L}.json`);if(P===void 0){console.error(`Cannot load challenge set data ${L}.`);return}n(1,g={fileName:L,displayName:"topic-5_views_4m_9m_ago",count:P.source.length,type:vt.Topic,chrf:.8643,familiarity:.6627,trainLogRatio:.3333}),n(2,b=P)},N=(L,P)=>{if(L===null)return"";switch(P){case mt.chrf:return m(L.chrf);case mt.trainCount:return L.trainCount;case mt.logCount:return L.logCount;case mt.familiarity:return m(L.familiarity);case mt.trainLogRatio:return`${Math.floor(L.trainLogRatio*100)}%`}},B=L=>{const P=L.target;localStorage.setItem("skipSentenceDeleteWarning",P.checked?"true":"false")};ln(async()=>{n(13,c=!0),M()});const z=()=>{c&&u&&s&&o&&g&&b&&w&&(h=!0,n(5,d=new ac({component:u,challengeSet:g,challengeData:b,mySetViewUpdated:_,tooltipStore:s,challengeStore:o,timelineStore:w,embeddingSettingStore:y})))};t.$$.on_mount.push(function(){o===void 0&&!("challengeStore"in e||t.$$.bound[t.$$.props.challengeStore])&&uc.warn("<SetView> was created without expected prop 'challengeStore'")});const A=["tooltipStore","challengeStore"];Object.keys(e).forEach(L=>{!~A.indexOf(L)&&L.slice(0,2)!=="$$"&&L!=="slot"&&uc.warn(`<SetView> was created with unknown prop '${L}'`)});const Y=()=>d==null?void 0:d.backClicked(),I=(L,P)=>d==null?void 0:d.headerMouseenter(P,L),k=(L,P)=>d==null?void 0:d.headerMouseleave(P,L),V=L=>d==null?void 0:d.tagCloseClicked(L),O=L=>d==null?void 0:d.filterHelperMouseenter(L),q=L=>d==null?void 0:d.filterHelperMouseleave(L),G=L=>d==null?void 0:d.exportMouseEnter(L),K=L=>d==null?void 0:d.exportMouseLeave(L),W=()=>d==null?void 0:d.exportClicked(),Q=(L,P)=>d==null?void 0:d.filterHelperMouseenter(P,l[L]),J=L=>d==null?void 0:d.filterHelperMouseleave(L),gt=(L,P)=>d==null?void 0:d.keywordClicked(L),ut=(L,P)=>d==null?void 0:d.thumbnailClicked(P,L),st=L=>d==null?void 0:d.searchKeyChanged(L),dt=(L,P)=>{localStorage.getItem("skipSentenceDeleteWarning")==="true"?d==null||d.deleteClicked(P,L):(f==null||f.addEventListener("close",()=>{(f==null?void 0:f.returnValue)==="delete"&&(d==null||d.deleteClicked(P,L))},{once:!0}),f==null||f.showModal())},ct=(L,P,pt)=>{n(5,P[pt].showHyp=!L.showHyp,d)};function R(L){cn[L?"unshift":"push"](()=>{u=L,n(3,u)})}const F=L=>B(L);function $(L){cn[L?"unshift":"push"](()=>{f=L,n(4,f)})}return t.$$set=L=>{"tooltipStore"in L&&n(0,s=L.tooltipStore),"challengeStore"in L&&n(12,o=L.challengeStore)},t.$capture_state=()=>({onMount:ln,d3:U,SetView:ac,Embedding:ph,HeaderKey:mt,ChallengeSetType:vt,getTimelineStore:Kr,getChallengeStoreDefaultValue:Ze,getEmbeddingSettingStore:nc,iconTriangle:$i,iconEdit:mh,iconDownload:yh,iconClose:bh,iconList:wh,iconSearch:us,iconInfo:Zi,iconDelete:vh,tooltipStore:s,challengeStore:o,headers:a,thumbnailContents:l,mounted:c,component:u,dialog:f,initialized:h,mySetView:d,challengeSet:g,challengeData:b,challengeStoreValue:v,embeddingSettingStore:y,timelineStore:w,chrfFormatter:m,ctfidfFormatter:p,mySetViewUpdated:_,DEV_MODE:Q5,initSetData:M,initSetDataTest:C,getHeaderValue:N,checkboxChanged:B,initView:z}),t.$inject_state=L=>{"tooltipStore"in L&&n(0,s=L.tooltipStore),"challengeStore"in L&&n(12,o=L.challengeStore),"mounted"in L&&n(13,c=L.mounted),"component"in L&&n(3,u=L.component),"dialog"in L&&n(4,f=L.dialog),"initialized"in L&&(h=L.initialized),"mySetView"in L&&n(5,d=L.mySetView),"challengeSet"in L&&n(1,g=L.challengeSet),"challengeData"in L&&n(2,b=L.challengeData),"challengeStoreValue"in L&&(v=L.challengeStoreValue)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty[0]&12295&&c&&s&&o&&g&&b&&w&&z()},[s,g,b,u,f,d,a,l,y,p,N,B,o,c,Y,I,k,V,O,q,G,K,W,Q,J,gt,ut,st,dt,ct,R,F,$]}class Dh extends ri{constructor(e){super(e),ni(this,e,Z5,Ko,Cn,{tooltipStore:0,challengeStore:12},null,[-1,-1]),it("SvelteRegisterComponent",{component:this,tagName:"SetView_1",options:e,id:Ko.name})}get tooltipStore(){throw new Error("<SetView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tooltipStore(e){throw new Error("<SetView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get challengeStore(){throw new Error("<SetView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set challengeStore(e){throw new Error("<SetView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Ho(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function J5(t){const e=t-1;return e*e*e+1}function $o(t,{delay:e=0,duration:n=400,easing:i=J5,x:r=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(t),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[f,h]=za(r),[d,g]=za(s);return{delay:e,duration:n,easing:i,css:(b,v)=>`
			transform: ${c} translate(${(1-b)*f}${h}, ${(1-b)*d}${g});
			opacity: ${l-u*v}`}}const bc="src/Tooltip.svelte";function Go(t){let e,n,i,r,s=t[1].html+"";const o={c:function(){e=D("div"),n=D("div"),i=H(),r=new Fh(!1),x(n,"class","s-pWvczcUijVEk"),lt(n,"arrow-up",t[1].orientation==="n"),lt(n,"arrow-down",t[1].orientation==="s"),T(n,bc,150,2,4102),r.a=null,x(e,"class","tooltip s-pWvczcUijVEk"),x(e,"style",t[2]),lt(e,"hidden",!t[1].show),T(e,bc,144,0,4006)},l:function(l){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(l,c){et(l,e,c),S(e,n),S(e,i),r.m(s,e),t[5](e)},p:function(l,[c]){c&2&&lt(n,"arrow-up",l[1].orientation==="n"),c&2&&lt(n,"arrow-down",l[1].orientation==="s"),c&2&&s!==(s=l[1].html+"")&&r.p(s),c&4&&x(e,"style",l[2]),c&2&&lt(e,"hidden",!l[1].show)},i:Tt,o:Tt,d:function(l){l&&nt(e),t[5](null)}};return it("SvelteRegisterBlock",{block:o,id:Go.name,type:"component",source:"",ctx:t}),o}const Ys=10;function t3(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("Tooltip",i,[]);let{tooltipStore:s=null}=e,o=Mn(),a="",l=null,c=!1,u=0;const f=()=>{o.width===0?n(2,a=`left: ${o.left}px; top: ${o.top}px;
        max-width: ${o.maxWidth}px;
        font-size: ${o.fontSize}; opacity: ${u}`):n(2,a=`left: ${o.left}px; top: ${o.top}px;
        width: ${o.width}px; max-width: ${o.maxWidth}px;
        font-size: ${o.fontSize}; opacity: ${u}`)},h=()=>{s!==null&&l!==null&&(n(4,c=!0),s.subscribe(b=>{b!==null&&(b.show?(u=0,b.html===""&&(b.html=" "),n(1,o=b),Hs().then(()=>{const v=l==null?void 0:l.getBoundingClientRect();v&&(n(1,o.left-=v.width/2,o),o.orientation==="n"?(n(1,o.top+=v.height,o),n(1,o.top+=Ys,o)):(n(1,o.top-=v.height,o),n(1,o.top-=Ys,o)),u=1,f())})):(u=0,n(1,o=b)),f())}))},d=["tooltipStore"];Object.keys(e).forEach(b=>{!~d.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<Tooltip> was created with unknown prop '${b}'`)});function g(b){cn[b?"unshift":"push"](()=>{l=b,n(0,l)})}return t.$$set=b=>{"tooltipStore"in b&&n(3,s=b.tooltipStore)},t.$capture_state=()=>({tick:Hs,getTooltipStoreDefaultValue:Mn,tooltipStore:s,V_GAP:Ys,tooltipConfig:o,style:a,tooltip:l,initialized:c,opacity:u,updateStyle:f,initView:h}),t.$inject_state=b=>{"tooltipStore"in b&&n(3,s=b.tooltipStore),"tooltipConfig"in b&&n(1,o=b.tooltipConfig),"style"in b&&n(2,a=b.style),"tooltip"in b&&n(0,l=b.tooltip),"initialized"in b&&n(4,c=b.initialized),"opacity"in b&&(u=b.opacity)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&25&&s&&!c&&l&&h()},[l,o,a,s,c,g]}class Nh extends ri{constructor(e){super(e),ni(this,e,t3,Go,Cn,{tooltipStore:3}),it("SvelteRegisterComponent",{component:this,tagName:"Tooltip",options:e,id:Go.name})}get tooltipStore(){throw new Error("<Tooltip>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tooltipStore(e){throw new Error("<Tooltip>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ye="src/App.svelte";function Wo(t){let e,n,i,r;n=new Dh({props:{tooltipStore:t[1],challengeStore:t[2]},$$inline:!0});const s={c:function(){e=D("div"),Pi(n.$$.fragment),x(e,"class","detail-view-container s-XsEmFtvddWTw"),T(e,ye,165,6,4272)},m:function(a,l){et(a,e,l),Kn(n,e,null),r=!0},p:function(a,l){t=a},i:function(a){r||(ee(n.$$.fragment,a),Ai(()=>{!r||(i||(i=Ua(e,$o,{x:1e3,duration:700,opacity:1,ease:Ho},!0)),i.run(1))}),r=!0)},o:function(a){Ee(n.$$.fragment,a),i||(i=Ua(e,$o,{x:1e3,duration:700,opacity:1,ease:Ho},!1)),i.run(0),r=!1},d:function(a){a&&nt(e),Hn(n),a&&i&&i.end()}};return it("SvelteRegisterBlock",{block:s,id:Wo.name,type:"if",source:"(164:4) {#if challengeStoreValue.selectedFileName !== ''}",ctx:t}),s}function jo(t){let e,n,i,r,s,o,a,l,c,u,f,h,d,g,b,v,y,w,m,p,_,M;v=new lh({props:{tooltipStore:t[1],challengeStore:t[2]},$$inline:!0});let C=t[0].selectedFileName!==""&&Wo(t);m=new Nh({props:{tooltipStore:t[1]},$$inline:!0});const N={c:function(){e=D("div"),n=D("div"),i=D("div"),i.textContent="Angler",r=H(),s=D("div"),s.textContent="Exploring and curating machine translation challenge sets!",o=H(),a=D("div"),l=D("div"),l.textContent="Set Source",c=H(),u=D("div"),u.textContent="Unfamiliar Topics",f=H(),h=D("div"),h.textContent="Unit Test Failures",d=H(),g=D("div"),b=D("div"),Pi(v.$$.fragment),y=H(),C&&C.c(),w=H(),Pi(m.$$.fragment),x(i,"class","title s-XsEmFtvddWTw"),T(i,ye,132,4,3373),x(s,"class","tagline s-XsEmFtvddWTw"),T(s,ye,133,4,3409),x(n,"class","main-top s-XsEmFtvddWTw"),T(n,ye,131,2,3346),x(l,"class","title s-XsEmFtvddWTw"),T(l,ye,139,4,3547),x(u,"class","option topic s-XsEmFtvddWTw"),lt(u,"selected",t[0].selectedTypes.has("topic")),T(u,ye,140,4,3587),x(h,"class","option test s-XsEmFtvddWTw"),lt(h,"selected",t[0].selectedTypes.has("test")),T(h,ye,147,4,3780),x(a,"class","main-left s-XsEmFtvddWTw"),T(a,ye,138,2,3519),x(b,"class","table-view-container s-XsEmFtvddWTw"),lt(b,"dehighlight",t[0].selectedFileName!==""),T(b,ye,157,4,4007),x(g,"class","main-view s-XsEmFtvddWTw"),T(g,ye,156,2,3979),x(e,"class","main-app s-XsEmFtvddWTw"),T(e,ye,130,0,3321)},l:function(z){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(z,A){et(z,e,A),S(e,n),S(n,i),S(n,r),S(n,s),S(e,o),S(e,a),S(a,l),S(a,c),S(a,u),S(a,f),S(a,h),S(e,d),S(e,g),S(g,b),Kn(v,b,null),S(g,y),C&&C.m(g,null),S(e,w),Kn(m,e,null),p=!0,_||(M=[yt(u,"click",t[4],!1,!1,!1,!1),yt(h,"click",t[5],!1,!1,!1,!1)],_=!0)},p:function(z,[A]){(!p||A&1)&&lt(u,"selected",z[0].selectedTypes.has("topic")),(!p||A&1)&&lt(h,"selected",z[0].selectedTypes.has("test")),(!p||A&1)&&lt(b,"dehighlight",z[0].selectedFileName!==""),z[0].selectedFileName!==""?C?(C.p(z,A),A&1&&ee(C,1)):(C=Wo(z),C.c(),ee(C,1),C.m(g,null)):C&&(Nc(),Ee(C,1,1,()=>{C=null}),Ec())},i:function(z){p||(ee(v.$$.fragment,z),ee(C),ee(m.$$.fragment,z),p=!0)},o:function(z){Ee(v.$$.fragment,z),Ee(C),Ee(m.$$.fragment,z),p=!1},d:function(z){z&&nt(e),Hn(v),C&&C.d(),Hn(m),_=!1,Ht(M)}};return it("SvelteRegisterBlock",{block:N,id:jo.name,type:"component",source:"",ctx:t}),N}function e3(t,e,n){let{$$slots:i={},$$scope:r}=e;ii("App",i,[]);const s=tc(),o=ec();let a=Ze();const l=h=>{a.selectedTypes.has(h)?a.selectedTypes.delete(h):a.selectedTypes.add(h),o.set(a)};o.subscribe(h=>{n(0,a=h)});const c=[];Object.keys(e).forEach(h=>{!~c.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<App> was created with unknown prop '${h}'`)});const u=()=>l("topic"),f=()=>l("test");return t.$capture_state=()=>({TableView:lh,SetView:Dh,fly:$o,cubicInOut:Ho,Tooltip:Nh,getTooltipStore:tc,getChallengeStore:ec,getChallengeStoreDefaultValue:Ze,tooltipStore:s,challengeStore:o,challengeStoreValue:a,optionClicked:l}),t.$inject_state=h=>{"challengeStoreValue"in h&&n(0,a=h.challengeStoreValue)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[a,s,o,l,u,f]}class n3 extends ri{constructor(e){super(e),ni(this,e,e3,jo,Cn,{}),it("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:jo.name})}}new n3({target:document.getElementById("app")});
